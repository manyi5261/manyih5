!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OpenPlayer=t():e.OpenPlayer=t()}(this,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=51)}([function(e,t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_OPTIONS=t.DVR_THRESHOLD=t.SUPPORTS_HLS=t.HAS_MSE=t.IS_STOCK_ANDROID=t.IS_SAFARI=t.IS_FIREFOX=t.IS_CHROME=t.IS_EDGE=t.IS_IE=t.IS_ANDROID=t.IS_IOS=t.IS_IPOD=t.IS_IPHONE=t.IS_IPAD=t.UA=t.NAV=void 0,t.NAV="undefined"!=typeof window?window.navigator:null,t.UA=t.NAV?t.NAV.userAgent.toLowerCase():null,t.IS_IPAD=!!t.UA&&(/ipad/i.test(t.UA)&&!window.MSStream),t.IS_IPHONE=!!t.UA&&(/iphone/i.test(t.UA)&&!window.MSStream),t.IS_IPOD=!!t.UA&&(/ipod/i.test(t.UA)&&!window.MSStream),t.IS_IOS=!!t.UA&&(/ipad|iphone|ipod/i.test(t.UA)&&!window.MSStream),t.IS_ANDROID=!!t.UA&&/android/i.test(t.UA),t.IS_IE=!!t.UA&&/(trident|microsoft)/i.test(t.NAV.appName),t.IS_EDGE=!!t.NAV&&("msLaunchUri"in t.NAV&&!("documentMode"in document)),t.IS_CHROME=!!t.UA&&/chrome/i.test(t.UA),t.IS_FIREFOX=!!t.UA&&/firefox/i.test(t.UA),t.IS_SAFARI=!!t.UA&&(/safari/i.test(t.UA)&&!t.IS_CHROME),t.IS_STOCK_ANDROID=!!t.UA&&/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(t.UA),t.HAS_MSE="undefined"!=typeof window&&"MediaSource"in window,t.SUPPORTS_HLS=function(){if("undefined"==typeof window)return!1;var e=window.MediaSource||window.WebKitMediaSource,n=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!n||n.prototype&&"function"==typeof n.prototype.appendBuffer&&"function"==typeof n.prototype.remove;return!!i&&!!r&&!t.IS_SAFARI},t.DVR_THRESHOLD=120,t.EVENT_OPTIONS=!t.IS_IE&&{passive:!1}},function(e,t,n){"use strict";function i(e){if(e){var t=e.parentNode;t&&t.removeChild(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.isXml=t.offset=t.hasClass=t.request=t.removeElement=t.loadScript=t.isAudio=t.isVideo=t.getAbsoluteUrl=void 0,t.getAbsoluteUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},t.isVideo=function(e){return"video"===e.tagName.toLowerCase()},t.isAudio=function(e){return"audio"===e.tagName.toLowerCase()},t.loadScript=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){i(r),t({})},r.onerror=function(){i(r),n()},document.head&&document.head.appendChild(r)}))},t.removeElement=i,t.request=function(e,t,n,i){var r,s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");switch(t){case"text":r="text/plain";break;case"json":r="application/json, text/javascript";break;case"html":r="text/html";break;case"xml":r="application/xml, text/xml";break;default:r="application/x-www-form-urlencoded; charset=UTF-8"}var a=!1,o="application/x-www-form-urlencoded"!==r?"".concat(r,", */*; q=0.01"):"*/".concat("*");s&&(s.open("GET",e,!0),s.setRequestHeader("Accept",o),s.onreadystatechange=function(){if(!a&&4===s.readyState)if(200===s.status){var e;switch(a=!0,t){case"json":e=JSON.parse(s.responseText);break;case"xml":e=s.responseXML;break;default:e=s.responseText}n(e)}else"function"==typeof i&&i(s.status)},s.send())},t.hasClass=function(e,t){return!!(e.className.split(" ").indexOf(t)>-1)},t.offset=function(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),top:t.top+(window.pageYOffset||document.documentElement.scrollTop)}},t.isXml=function(e){var t;if(void 0!==window.DOMParser)t=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};else{if(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))return!1;t=function(e){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(e),t}}try{var n=t(e);if(n.getElementsByTagName("parsererror").length>0)return!1;if(n.parseError&&0!==n.parseError.errorCode)return!1}catch(e){return!1}return!0}},function(e,t,n){var i=n(0),r=n(54),s=n(8),a=n(55),o=n(59),l=n(92),u=r("wks"),c=i.Symbol,d=l?c:c&&c.withoutSetter||a;e.exports=function(e){return s(u,e)&&(o||"string"==typeof u[e])||(o&&s(c,e)?u[e]=c[e]:u[e]=d("Symbol."+e)),u[e]}},function(e,t,n){var i=n(0),r=n(32).f,s=n(10),a=n(15),o=n(37),l=n(84),u=n(58);e.exports=function(e,t){var n,c,d,h,f,p=e.target,v=e.global,m=e.stat;if(n=v?i:m?i[p]||o(p,{}):(i[p]||{}).prototype)for(c in t){if(h=t[c],d=e.noTargetGet?(f=r(n,c))&&f.value:n[c],!u(v?c:p+(m?".":"#")+c,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&s(h,"sham",!0),a(n,c,h,e)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.events=t.addEvent=void 0,t.addEvent=function(e,t){var n={};return t&&t.detail&&(n={detail:t.detail}),new CustomEvent(e,n)},t.events=["loadstart","durationchange","loadedmetadata","loadeddata","progress","canplay","canplaythrough","suspend","abort","error","emptied","stalled","play","playing","pause","waiting","seeking","seeked","timeupdate","ended","ratechange","volumechange"]},function(e,t,n){var i=n(9);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(11),r=n(12),s=n(17);e.exports=i?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(5);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var i=n(11),r=n(53),s=n(7),a=n(35),o=Object.defineProperty;t.f=i?o:function(e,t,n){if(s(e),t=a(t,!0),s(n),r)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(19),r=n(0),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(i[e])||s(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},function(e,t,n){"use strict";function i(e){var t=e.split("?")[0],n=t?t.split("\\"):null,i=n?n.pop():null,r=i?i.split("/"):null,s=r?r.pop():null;return s&&s.indexOf(".")>-1?s.substring(s.lastIndexOf(".")+1):""}Object.defineProperty(t,"__esModule",{value:!0}),t.isAutoplaySupported=t.predictType=t.isFlvSource=t.isDashSource=t.isM3USource=t.isHlsSource=t.getExtension=void 0,t.getExtension=i,t.isHlsSource=function(e){return/\.m3u8$/i.test(e.src)||["application/x-mpegURL","application/vnd.apple.mpegurl"].indexOf(e.type)>-1},t.isM3USource=function(e){return/\.m3u$/i.test(e.src)},t.isDashSource=function(e){return/\.mpd/i.test(e.src)||"application/dash+xml"===e.type},t.isFlvSource=function(e){return/(^rtmp:\/\/|\.flv$)/i.test(e.src)||["video/x-flv","video/flv"].indexOf(e.type)>-1},t.predictType=function(e){var t,n=i(e);if(!n)return"video/mp4";switch(n){case"m3u8":case"m3u":t="application/x-mpegURL";break;case"mpd":t="application/dash+xml";break;case"mp3":t="audio/mp3";break;case"webm":t="video/webm";break;case"ogg":t="video/ogg";break;default:t="video/mp4"}return t},t.isAutoplaySupported=function(e,t,n,i,r){var s=e.play();void 0!==s?s.then((function(){return e.pause(),n(!0),i(!1),r()})).catch((function(){e.volume=0,e.muted=!0,e.play().then((function(){return e.pause(),n(!0),i(!0),r()})).catch((function(){e.volume=t,e.muted=!1,n(!1),i(!1),r()}))})):(n(!e.paused||"Promise"in window&&s instanceof Promise),e.pause(),i(!1),r())}},function(e,t,n){var i=n(0),r=n(10),s=n(8),a=n(37),o=n(38),l=n(26),u=l.get,c=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,o){var l,u=!!o&&!!o.unsafe,h=!!o&&!!o.enumerable,f=!!o&&!!o.noTargetGet;"function"==typeof n&&("string"!=typeof t||s(n,"name")||r(n,"name",t),(l=c(n)).source||(l.source=d.join("string"==typeof t?t:""))),e!==i?(u?!f&&e[t]&&(h=!0):delete e[t],h?e[t]=n:r(e,t,n)):h?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||o(this)}))},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!1},function(e,t,n){var i=n(0);e.exports=i},function(e,t,n){var i=n(16);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var i=n(34);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports={}},function(e,t,n){"use strict";var i=n(16),r=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new r(e)}},function(e,t,n){var i=n(33),r=n(34);e.exports=function(e){return i(r(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i,r,s,a=n(83),o=n(0),l=n(9),u=n(10),c=n(8),d=n(39),h=n(40),f=n(41),p=o.WeakMap;if(a){var v=d.state||(d.state=new p),m=v.get,y=v.has,g=v.set;i=function(e,t){return t.facade=e,g.call(v,e,t),t},r=function(e){return m.call(v,e)||{}},s=function(e){return y.call(v,e)}}else{var b=h("state");f[b]=!0,i=function(e,t){return t.facade=e,u(e,b,t),t},r=function(e){return c(e,b)?e[b]:{}},s=function(e){return c(e,b)}}e.exports={set:i,get:r,has:s,enforce:function(e){return s(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var i=n(42),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(25),r=n(0);e.exports="process"==i(r.process)},function(e,t,n){var i=n(7),r=n(68),s=n(27),a=n(20),o=n(69),l=n(67),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var c,d,h,f,p,v,m,y=n&&n.that,g=!(!n||!n.AS_ENTRIES),b=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),_=a(t,y,1+g+E),k=function(e){return c&&l(c),new u(!0,e)},w=function(e){return g?(i(e),E?_(e[0],e[1],k):_(e[0],e[1])):E?_(e,k):_(e)};if(b)c=e;else{if("function"!=typeof(d=o(e)))throw TypeError("Target is not iterable");if(r(d)){for(h=0,f=s(e.length);f>h;h++)if((p=w(e[h]))&&p instanceof u)return p;return new u(!1)}c=d.call(e)}for(v=c.next;!(m=v.call(c)).done;){try{p=w(m.value)}catch(e){throw l(c),e}if("object"==typeof p&&p&&p instanceof u)return p}return new u(!1)}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,void 0),this.element=t,this.media=n,this.promise=new Promise((function(e){e({})}))}var t,n,o;return t=e,(n=[{key:"play",value:function(){return this.element.play()}},{key:"pause",value:function(){this.element.pause()}},{key:"instance",set:function(e){s(this,r,e)},get:function(){return a(this,r)}},{key:"volume",set:function(e){this.element.volume=e},get:function(){return this.element.volume}},{key:"muted",set:function(e){this.element.muted=e},get:function(){return this.element.muted}},{key:"playbackRate",set:function(e){this.element.playbackRate=e},get:function(){return this.element.playbackRate}},{key:"defaultPlaybackRate",set:function(e){this.element.defaultPlaybackRate=e},get:function(){return this.element.defaultPlaybackRate}},{key:"currentTime",set:function(e){this.element.currentTime=e},get:function(){return this.element.currentTime}},{key:"duration",get:function(){return this.element.duration}},{key:"paused",get:function(){return this.element.paused}},{key:"ended",get:function(){return this.element.ended}}])&&i(t.prototype,n),o&&i(t,o),e}();r=new WeakMap,t.default=o},function(e,t,n){var i=n(11),r=n(52),s=n(17),a=n(24),o=n(35),l=n(8),u=n(53),c=Object.getOwnPropertyDescriptor;t.f=i?c:function(e,t){if(e=a(e),t=o(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return s(!r.f.call(e,t),e[t])}},function(e,t,n){var i=n(5),r=n(25),s="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?s.call(e,""):Object(e)}:Object},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var i=n(9);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(0),r=n(9),s=i.document,a=r(s)&&r(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},function(e,t,n){var i=n(0),r=n(10);e.exports=function(e,t){try{r(i,e,t)}catch(n){i[e]=t}return t}},function(e,t,n){var i=n(39),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return r.call(e)}),e.exports=i.inspectSource},function(e,t,n){var i=n(0),r=n(37),s=i["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=s},function(e,t,n){var i=n(54),r=n(55),s=i("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},function(e,t){e.exports={}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var i=n(13);e.exports=i("navigator","userAgent")||""},function(e,t,n){var i,r=n(7),s=n(93),a=n(43),o=n(41),l=n(62),u=n(36),c=n(40),d=c("IE_PROTO"),h=function(){},f=function(e){return"<script>"+e+"<\/script>"},p=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=i?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};o[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=r(e),n=new h,h.prototype=null,n[d]=e):n=p(),void 0===t?n:s(n,t)}},function(e,t,n){var i=n(56),r=n(43);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(8),r=n(21),s=n(40),a=n(99),o=s("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,t,n){var i=n(12).f,r=n(8),s=n(3)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},function(e,t,n){var i={};i[n(3)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeToSeconds=t.formatTime=void 0,t.formatTime=function(e,t){var n=Math.floor(e%1*(t||0)),i=Math.floor(e),r=Math.floor(i/60),s=Math.floor(r/60),a=function(e){return e<10?"0".concat(e):e};return r%=60,i%=60,"".concat(s>0?"".concat(a(s),":"):"").concat(a(r),":").concat(a(i)).concat(n?":".concat(a(n)):"")},t.timeToSeconds=function(e){var t=e.replace(/;/g,":").split(":"),n=0;return 3===t.length?(n+=60*parseFloat(t[0])*60,n+=60*parseFloat(t[1]),n+=parseFloat(t[2])):(n+=60*parseFloat(t[0]),n+=parseFloat(t[1])),n}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,s,a,o,l,u,c,d,h,f,p,v,m,y,g,b=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},E=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},_=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(80),n(95),n(105),n(109),n(112),n(131),n(132);var k=_(n(133)),w=_(n(142)),A=_(n(147)),O=n(1),T=n(6),S=n(2),L=n(14),M=function(){function e(t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,void 0),s.set(this,void 0),a.set(this,""),o.set(this,void 0),l.set(this,void 0),u.set(this,void 0),c.set(this,{}),d.set(this,!1),h.set(this,void 0),f.set(this,!1),p.set(this,!1),v.set(this,!1),m.set(this,{}),y.set(this,[]),g.set(this,{controls:{alwaysVisible:!1,layers:{left:["play","time","volume"],middle:["progress"],right:["captions","settings","fullscreen"]}},defaultLevel:null,detachMenus:!1,forceNative:!0,height:0,hidePlayBtnTimer:350,labels:{auto:"Auto",captions:"CC/Subtitles",click:"Click to unmute",fullscreen:"全屏",lang:{en:"English"},levels:"Quality Levels",live:"Live Broadcast",mediaLevels:"Change Quality",mute:"静音",off:"Off",pause:"暂停",play:"播放",progressRail:"Time Rail",progressSlider:"Time Slider",settings:"设置",speed:"倍速",speedNormal:"1.0（默认）",tap:"静音已开启,点我打开声音",toggleCaptions:"Toggle Captions",unmute:"关闭静音",volume:"音量",volumeControl:"Volume Control",volumeSlider:"Volume Slider"},live:{showLabel:!0,showProgress:!1},mode:"responsive",onError:function(){},pauseOthers:!0,progress:{duration:0,showCurrentTimeOnly:!1},showLoaderOnInit:!1,startTime:0,startVolume:1,step:0,width:0}),b(this,o,t instanceof HTMLMediaElement?t:document.getElementById(t)),E(this,o)&&(b(this,d,E(this,o).autoplay||!1),"string"==typeof n||Array.isArray(n)||this._mergeOptions(n),E(this,o).volume=E(this,m).startVolume||1,E(this,m).ads&&E(this,m).ads.src&&b(this,l,E(this,m).ads.src),E(this,m).startTime>0&&(E(this,o).currentTime=E(this,m).startTime),b(this,h,E(this,o).volume)),this}var t,n,_;return t=e,_=[{key:"init",value:function(){e.instances={};for(var t=document.querySelectorAll("video.op-player, audio.op-player"),n=0,i=t.length;n<i;n++){var r=t[n],s=r.getAttribute("data-op-settings");new e(r,s?JSON.parse(s):{}).init()}}},{key:"addMedia",value:function(t,n,i,r){e.customMedia.media[n]=r,e.customMedia.optionsKey[n]=t,e.customMedia.rules.push(i)}}],(n=[{key:"init",value:function(){this._isValid()&&(this._wrapInstance(),this._prepareMedia(),this._createPlayButton(),this._createUID(),this._createControls(),this._setEvents(),e.instances[this.id]=this)}},{key:"load",value:function(){if(this.isMedia())return E(this,u).load()}},{key:"play",value:function(){return E(this,u)&&!E(this,u).loaded&&(E(this,u).load(),E(this,u).loaded=!0),E(this,s)?E(this,s).play():E(this,u).play()}},{key:"pause",value:function(){E(this,s)?E(this,s).pause():E(this,u).pause()}},{key:"destroy",value:function(){var e=this;E(this,s)&&(E(this,s).pause(),E(this,s).destroy());var t=E(this,o);E(this,u)&&E(this,u).destroy(),Object.keys(E(this,c)).forEach((function(n){t.removeEventListener(n,E(e,c)[n])})),E(this,d)&&!E(this,v)&&S.isVideo(E(this,o))&&t.removeEventListener("canplay",this._autoplay.bind(this)),E(this,r)&&E(this,r).destroy(),S.isVideo(E(this,o))&&(S.removeElement(this.playBtn),S.removeElement(this.loader)),t.controls=!0,t.setAttribute("id",E(this,a)),t.removeAttribute("op-live__enabled"),t.removeAttribute("op-dvr__enabled");var n=t.parentElement;n&&n.parentNode&&n.parentNode.replaceChild(t,n);var i=T.addEvent("playerdestroyed");t.dispatchEvent(i)}},{key:"getContainer",value:function(){return E(this,o).parentElement||E(this,o)}},{key:"getControls",value:function(){return E(this,r)}},{key:"getCustomControls",value:function(){return E(this,y)}},{key:"getElement",value:function(){return E(this,o)}},{key:"getEvents",value:function(){return E(this,c)}},{key:"getOptions",value:function(){return E(this,m)}},{key:"activeElement",value:function(){return E(this,s)&&E(this,s).started()?E(this,s):E(this,u)}},{key:"isMedia",value:function(){return this.activeElement()instanceof w.default}},{key:"isAd",value:function(){return this.activeElement()instanceof A.default}},{key:"getMedia",value:function(){return E(this,u)}},{key:"getAd",value:function(){return E(this,s)}},{key:"addCaptions",value:function(e){if(e.default)for(var t=E(this,o).querySelectorAll("track"),n=0,i=t.length;n<i;n++)t[n].default=!1;var r=E(this,o),s=r.querySelector('track[srclang="'.concat(e.srclang,'"][kind="').concat(e.kind,'"]'));s?(s.src=e.src,s.label=e.label,s.default=e.default||!1):((s=document.createElement("track")).srclang=e.srclang,s.src=e.src,s.kind=e.kind,s.label=e.label,s.default=e.default||!1,r.appendChild(s));var a=T.addEvent("controlschanged");r.dispatchEvent(a)}},{key:"addControl",value:function(e){e.custom=!0,E(this,y).push(e);var t=T.addEvent("controlschanged");E(this,o).dispatchEvent(t)}},{key:"removeControl",value:function(e){var t=this,n=this.getOptions().controls.layers;Object.keys(n).forEach((function(t){n[t].forEach((function(i,r){i===e&&n[t].splice(r,1)}))})),E(this,y).forEach((function(n,i){n.id===e&&E(t,y).splice(i,1)}));var i=T.addEvent("controlschanged");E(this,o).dispatchEvent(i)}},{key:"_prepareMedia",value:function(){try{E(this,o).addEventListener("playererror",E(this,m).onError,O.EVENT_OPTIONS),E(this,d)&&S.isVideo(E(this,o))&&E(this,o).addEventListener("canplay",this._autoplay.bind(this),O.EVENT_OPTIONS),b(this,u,new w.default(E(this,o),E(this,m),E(this,d),e.customMedia));var t=E(this,o).getAttribute("preload");if(!E(this,l)&&t&&"none"===t||(E(this,u).load(),E(this,u).loaded=!0),!E(this,d)&&E(this,l)){var n=E(this,m)&&E(this,m).ads?E(this,m).ads:void 0;b(this,s,new A.default(this,E(this,l),!1,!1,n))}}catch(e){console.error(e)}}},{key:"_isValid",value:function(){var e=E(this,o);return!(e instanceof HTMLElement==0||!S.isAudio(e)&&!S.isVideo(e)||!e.classList.contains("op-player__media"))}},{key:"_wrapInstance",value:function(){var e=document.createElement("div");if(e.className="op-player op-player__keyboard--inactive",e.className+=S.isAudio(E(this,o))?" op-player__audio":" op-player__video",e.tabIndex=0,E(this,o).classList.remove("op-player"),E(this,o).parentElement&&E(this,o).parentElement.insertBefore(e,E(this,o)),e.appendChild(E(this,o)),e.addEventListener("keydown",(function(){e.classList.contains("op-player__keyboard--inactive")&&e.classList.remove("op-player__keyboard--inactive")}),O.EVENT_OPTIONS),e.addEventListener("click",(function(){e.classList.contains("op-player__keyboard--inactive")||e.classList.add("op-player__keyboard--inactive")}),O.EVENT_OPTIONS),"fill"!==E(this,m).mode||S.isAudio(E(this,o))||O.IS_IPHONE)if("fit"!==E(this,m).mode||S.isAudio(E(this,o))){var t="";if(E(this,m).width){var n="number"==typeof E(this,m).width?"".concat(E(this,m).width,"px"):E(this,m).width;t+="width: ".concat(n," !important;")}if(E(this,m).height){var i="number"==typeof E(this,m).height?"".concat(E(this,m).height,"px"):E(this,m).height;t+="height: ".concat(i," !important;")}t&&e.setAttribute("style",t)}else{var r=this.getContainer();if(r.parentElement){var s=document.createElement("div");s.className="op-player__fit--wrapper",s.tabIndex=0,r.parentElement.insertBefore(s,r),s.appendChild(r),r.classList.add("op-player__fit")}}else this.getContainer().classList.add("op-player__full")}},{key:"_createControls",value:function(){O.IS_IPHONE&&S.isVideo(E(this,o))&&this.getContainer().classList.add("op-player__ios--iphone"),b(this,r,new k.default(this)),E(this,r).create()}},{key:"_createUID",value:function(){if(E(this,o).id)b(this,a,E(this,o).id),E(this,o).removeAttribute("id");else{var t;do{t="op_".concat(Math.random().toString(36).substr(2,9))}while(void 0!==e.instances[t]);b(this,a,t)}E(this,o).parentElement&&(E(this,o).parentElement.id=E(this,a))}},{key:"_createPlayButton",value:function(){var e=this;S.isAudio(E(this,o))||(this.playBtn=document.createElement("button"),this.playBtn.className="op-player__play",this.playBtn.tabIndex=0,this.playBtn.title=E(this,m).labels.play,this.playBtn.innerHTML="<span>".concat(E(this,m).labels.play,"</span>"),this.playBtn.setAttribute("aria-pressed","false"),this.playBtn.setAttribute("aria-hidden","false"),this.loader=document.createElement("span"),this.loader.className="op-player__loader",this.loader.tabIndex=-1,this.loader.setAttribute("aria-hidden","true"),E(this,o).parentElement&&(E(this,o).parentElement.insertBefore(this.loader,E(this,o)),E(this,o).parentElement.insertBefore(this.playBtn,E(this,o))),this.playBtn.addEventListener("click",(function(){E(e,s)&&(E(e,s).playRequested=e.activeElement().paused),e.activeElement().paused?e.activeElement().play():e.activeElement().pause()}),O.EVENT_OPTIONS))}},{key:"_setEvents",value:function(){var e=this;S.isVideo(E(this,o))&&(E(this,c).loadedmetadata=function(){var t=e.activeElement();!E(e,m).showLoaderOnInit||O.IS_IOS||O.IS_ANDROID?(e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","false")):(e.loader.setAttribute("aria-hidden","false"),e.playBtn.setAttribute("aria-hidden","true")),t.paused&&(e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.setAttribute("aria-pressed","false"))},E(this,c).waiting=function(){e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")},E(this,c).seeking=function(){var t=e.activeElement();e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden",t instanceof w.default?"false":"true")},E(this,c).seeked=function(){var t=e.activeElement();0===Math.round(t.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden",t instanceof w.default?"false":"true"),e.loader.setAttribute("aria-hidden","true"))},E(this,c).play=function(){e.playBtn.classList.add("op-player__play--paused"),e.playBtn.title=E(e,m).labels.pause,e.loader.setAttribute("aria-hidden","true"),E(e,m).showLoaderOnInit?e.playBtn.setAttribute("aria-hidden","true"):setTimeout((function(){e.playBtn.setAttribute("aria-hidden","true")}),E(e,m).hidePlayBtnTimer)},E(this,c).playing=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")},E(this,c).pause=function(){var t=e.activeElement();e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.title=E(e,m).labels.play,E(e,m).showLoaderOnInit&&0===Math.round(t.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden","false"),e.loader.setAttribute("aria-hidden","true"))},E(this,c).ended=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")}),Object.keys(E(this,c)).forEach((function(t){E(e,o).addEventListener(t,E(e,c)[t],O.EVENT_OPTIONS)}))}},{key:"_autoplay",value:function(){var e=this;E(this,v)||(b(this,v,!0),E(this,o).removeEventListener("canplay",this._autoplay.bind(this)),L.isAutoplaySupported(E(this,o),E(this,h),(function(t){b(e,f,t)}),(function(t){b(e,p,t)}),(function(){if(E(e,p)){e.activeElement().muted=!0,e.activeElement().volume=0;var t=T.addEvent("volumechange");E(e,o).dispatchEvent(t);var n=document.createElement("div"),i=O.IS_IOS||O.IS_ANDROID?E(e,m).labels.tap:E(e,m).labels.click;n.className="op-player__unmute",n.innerHTML="<span>".concat(i,"</span>"),n.tabIndex=0,n.addEventListener("click",(function(){e.activeElement().muted=!1,e.activeElement().volume=E(e,h);var t=T.addEvent("volumechange");E(e,o).dispatchEvent(t),S.removeElement(n)}),O.EVENT_OPTIONS);var r=e.getContainer();r.insertBefore(n,r.firstChild)}else e.activeElement().muted=E(e,o).muted,e.activeElement().volume=E(e,h);if(E(e,l)){var a=E(e,m)&&E(e,m).ads?E(e,m).ads:void 0;b(e,s,new A.default(e,E(e,l),E(e,f),E(e,p),a))}else if(E(e,f)||E(e,p))return e.play()})))}},{key:"_mergeOptions",value:function(e){var t=this;b(this,m,Object.assign(Object.assign({},E(this,g)),e)),e&&["labels","controls"].forEach((function(n){E(t,m)[n]=e[n]&&Object.keys(e[n]).length?Object.assign(Object.assign({},E(t,g)[n]),e[n]):E(t,g)[n]}))}},{key:"src",set:function(e){E(this,u)instanceof w.default&&(E(this,u).mediaFiles=[],E(this,u).src=e)},get:function(){return E(this,u).src}},{key:"id",get:function(){return E(this,a)}}])&&i(t.prototype,n),_&&i(t,_),e}();r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,M.instances={},M.customMedia={media:{},optionsKey:{},rules:[]},t.default=M,"undefined"!=typeof window&&(window.OpenPlayer=M,window.OpenPlayerJS=M,M.init())},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!i.call({1:2},1);t.f=s?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(11),r=n(5),s=n(36);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(18),r=n(39);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.1",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){var i=n(8),r=n(24),s=n(87).indexOf,a=n(41);e.exports=function(e,t){var n,o=r(e),l=0,u=[];for(n in o)!i(a,n)&&i(o,n)&&u.push(n);for(;t.length>l;)i(o,n=t[l++])&&(~s(u,n)||u.push(n));return u}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(5),r=/#|\.prototype\./,s=function(e,t){var n=o[a(e)];return n==u||n!=l&&("function"==typeof t?i(t):!!t)},a=s.normalize=function(e){return String(e).replace(r,".").toLowerCase()},o=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},function(e,t,n){var i=n(28),r=n(60),s=n(5);e.exports=!!Object.getOwnPropertySymbols&&!s((function(){return!Symbol.sham&&(i?38===r:r>37&&r<41)}))},function(e,t,n){var i,r,s=n(0),a=n(44),o=s.process,l=o&&o.versions,u=l&&l.v8;u?r=(i=u.split("."))[0]+i[1]:a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(r=i[1]),e.exports=r&&+r},function(e,t,n){var i=n(3),r=n(45),s=n(12),a=i("unscopables"),o=Array.prototype;null==o[a]&&s.f(o,a,{configurable:!0,value:r(null)}),e.exports=function(e){o[a][e]=!0}},function(e,t,n){var i=n(13);e.exports=i("document","documentElement")},function(e,t,n){"use strict";var i=n(97).charAt,r=n(26),s=n(64),a=r.set,o=r.getterFor("String Iterator");s(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=o(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=i(n,r),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var i=n(4),r=n(98),s=n(47),a=n(66),o=n(48),l=n(10),u=n(15),c=n(3),d=n(18),h=n(22),f=n(65),p=f.IteratorPrototype,v=f.BUGGY_SAFARI_ITERATORS,m=c("iterator"),y=function(){return this};e.exports=function(e,t,n,c,f,g,b){r(n,t,c);var E,_,k,w=function(e){if(e===f&&L)return L;if(!v&&e in T)return T[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},A=t+" Iterator",O=!1,T=e.prototype,S=T[m]||T["@@iterator"]||f&&T[f],L=!v&&S||w(f),M="Array"==t&&T.entries||S;if(M&&(E=s(M.call(new e)),p!==Object.prototype&&E.next&&(d||s(E)===p||(a?a(E,p):"function"!=typeof E[m]&&l(E,m,y)),o(E,A,!0,!0),d&&(h[A]=y))),"values"==f&&S&&"values"!==S.name&&(O=!0,L=function(){return S.call(this)}),d&&!b||T[m]===L||l(T,m,L),h[t]=L,f)if(_={values:w("values"),keys:g?L:w("keys"),entries:w("entries")},b)for(k in _)(v||O||!(k in T))&&u(T,k,_[k]);else i({target:t,proto:!0,forced:v||O},_);return _}},function(e,t,n){"use strict";var i,r,s,a=n(5),o=n(47),l=n(10),u=n(8),c=n(3),d=n(18),h=c("iterator"),f=!1;[].keys&&("next"in(s=[].keys())?(r=o(o(s)))!==Object.prototype&&(i=r):f=!0);var p=null==i||a((function(){var e={};return i[h].call(e)!==e}));p&&(i={}),d&&!p||u(i,h)||l(i,h,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var i=n(7),r=n(100);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,s){return i(n),r(s),t?e.call(n,s):n.__proto__=s,n}}():void 0)},function(e,t,n){var i=n(7);e.exports=function(e){var t=e.return;if(void 0!==t)return i(t.call(e)).value}},function(e,t,n){var i=n(3),r=n(22),s=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[s]===e)}},function(e,t,n){var i=n(70),r=n(22),s=n(3)("iterator");e.exports=function(e){if(null!=e)return e[s]||e["@@iterator"]||r[i(e)]}},function(e,t,n){var i=n(49),r=n(25),s=n(3)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=i?r:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?n:a?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){var i=n(3)("iterator"),r=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){r=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var s={};s[i]=function(){return{next:function(){return{done:n=!0}}}},e(s)}catch(e){}return n}},function(e,t,n){"use strict";var i=n(4),r=n(47),s=n(66),a=n(45),o=n(10),l=n(17),u=n(29),c=function(e,t){var n=this;if(!(n instanceof c))return new c(e,t);s&&(n=s(new Error(void 0),r(n))),void 0!==t&&o(n,"message",String(t));var i=[];return u(e,i.push,{that:i}),o(n,"errors",i),n};c.prototype=a(Error.prototype,{constructor:l(5,c),message:l(5,""),name:l(5,"AggregateError")}),i({global:!0},{AggregateError:c})},function(e,t,n){var i=n(0);e.exports=i.Promise},function(e,t,n){var i=n(7),r=n(16),s=n(3)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||null==(n=i(a)[s])?t:r(n)}},function(e,t,n){var i,r,s,a=n(0),o=n(5),l=n(20),u=n(62),c=n(36),d=n(76),h=n(28),f=a.location,p=a.setImmediate,v=a.clearImmediate,m=a.process,y=a.MessageChannel,g=a.Dispatch,b=0,E={},_=function(e){if(E.hasOwnProperty(e)){var t=E[e];delete E[e],t()}},k=function(e){return function(){_(e)}},w=function(e){_(e.data)},A=function(e){a.postMessage(e+"",f.protocol+"//"+f.host)};p&&v||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return E[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(b),b},v=function(e){delete E[e]},h?i=function(e){m.nextTick(k(e))}:g&&g.now?i=function(e){g.now(k(e))}:y&&!d?(s=(r=new y).port2,r.port1.onmessage=w,i=l(s.postMessage,s,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&f&&"file:"!==f.protocol&&!o(A)?(i=A,a.addEventListener("message",w,!1)):i="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),_(e)}}:function(e){setTimeout(k(e),0)}),e.exports={set:p,clear:v}},function(e,t,n){var i=n(44);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},function(e,t,n){var i=n(7),r=n(9),s=n(23);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=s.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var i=n(4),r=n(16),s=n(23),a=n(30),o=n(29);i({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=s.f(t),i=n.resolve,l=n.reject,u=a((function(){var n=r(t.resolve),s=[],a=0,l=1;o(e,(function(e){var r=a++,o=!1;s.push(void 0),l++,n.call(t,e).then((function(e){o||(o=!0,s[r]={status:"fulfilled",value:e},--l||i(s))}),(function(e){o||(o=!0,s[r]={status:"rejected",reason:e},--l||i(s))}))})),--l||i(s)}));return u.error&&l(u.value),n.promise}})},function(e,t,n){"use strict";var i=n(4),r=n(16),s=n(13),a=n(23),o=n(30),l=n(29);i({target:"Promise",stat:!0},{any:function(e){var t=this,n=a.f(t),i=n.resolve,u=n.reject,c=o((function(){var n=r(t.resolve),a=[],o=0,c=1,d=!1;l(e,(function(e){var r=o++,l=!1;a.push(void 0),c++,n.call(t,e).then((function(e){l||d||(d=!0,i(e))}),(function(e){l||d||(l=!0,a[r]=e,--c||u(new(s("AggregateError"))(a,"No one promise resolved")))}))})),--c||u(new(s("AggregateError"))(a,"No one promise resolved"))}));return c.error&&u(c.value),n.promise}})},function(e,t,n){var i=n(81);e.exports=i},function(e,t,n){n(82);var i=n(94);e.exports=i("Array","find")},function(e,t,n){"use strict";var i=n(4),r=n(89).find,s=n(61),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),i({target:"Array",proto:!0,forced:a},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s("find")},function(e,t,n){var i=n(0),r=n(38),s=i.WeakMap;e.exports="function"==typeof s&&/native code/.test(r(s))},function(e,t,n){var i=n(8),r=n(85),s=n(32),a=n(12);e.exports=function(e,t){for(var n=r(t),o=a.f,l=s.f,u=0;u<n.length;u++){var c=n[u];i(e,c)||o(e,c,l(t,c))}}},function(e,t,n){var i=n(13),r=n(86),s=n(57),a=n(7);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(a(e)),n=s.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(56),r=n(43).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(24),r=n(27),s=n(88),a=function(e){return function(t,n,a){var o,l=i(t),u=r(l.length),c=s(a,u);if(e&&n!=n){for(;u>c;)if((o=l[c++])!=o)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var i=n(42),r=Math.max,s=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):s(n,t)}},function(e,t,n){var i=n(20),r=n(33),s=n(21),a=n(27),o=n(90),l=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,c=4==e,d=6==e,h=7==e,f=5==e||d;return function(p,v,m,y){for(var g,b,E=s(p),_=r(E),k=i(v,m,3),w=a(_.length),A=0,O=y||o,T=t?O(p,w):n||h?O(p,0):void 0;w>A;A++)if((f||A in _)&&(b=k(g=_[A],A,E),e))if(t)T[A]=b;else if(b)switch(e){case 3:return!0;case 5:return g;case 6:return A;case 2:l.call(T,g)}else switch(e){case 4:return!1;case 7:l.call(T,g)}return d?-1:u||c?c:T}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},function(e,t,n){var i=n(9),r=n(91),s=n(3)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[s])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(25);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(59);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var i=n(11),r=n(12),s=n(7),a=n(46);e.exports=i?Object.defineProperties:function(e,t){s(e);for(var n,i=a(t),o=i.length,l=0;o>l;)r.f(e,n=i[l++],t[n]);return e}},function(e,t,n){var i=n(0),r=n(20),s=Function.call;e.exports=function(e,t,n){return r(s,i[e].prototype[t],n)}},function(e,t,n){var i=n(96);e.exports=i},function(e,t,n){n(63),n(101);var i=n(19);e.exports=i.Array.from},function(e,t,n){var i=n(42),r=n(34),s=function(e){return function(t,n){var s,a,o=String(r(t)),l=i(n),u=o.length;return l<0||l>=u?e?"":void 0:(s=o.charCodeAt(l))<55296||s>56319||l+1===u||(a=o.charCodeAt(l+1))<56320||a>57343?e?o.charAt(l):s:e?o.slice(l,l+2):a-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},function(e,t,n){"use strict";var i=n(65).IteratorPrototype,r=n(45),s=n(17),a=n(48),o=n(22),l=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=r(i,{next:s(1,n)}),a(e,u,!1,!0),o[u]=l,e}},function(e,t,n){var i=n(5);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var i=n(9);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var i=n(4),r=n(102);i({target:"Array",stat:!0,forced:!n(71)((function(e){Array.from(e)}))},{from:r})},function(e,t,n){"use strict";var i=n(20),r=n(21),s=n(103),a=n(68),o=n(27),l=n(104),u=n(69);e.exports=function(e){var t,n,c,d,h,f,p=r(e),v="function"==typeof this?this:Array,m=arguments.length,y=m>1?arguments[1]:void 0,g=void 0!==y,b=u(p),E=0;if(g&&(y=i(y,m>2?arguments[2]:void 0,2)),null==b||v==Array&&a(b))for(n=new v(t=o(p.length));t>E;E++)f=g?y(p[E],E):p[E],l(n,E,f);else for(h=(d=b.call(p)).next,n=new v;!(c=h.call(d)).done;E++)f=g?s(d,y,[c.value,E],!0):c.value,l(n,E,f);return n.length=E,n}},function(e,t,n){var i=n(7),r=n(67);e.exports=function(e,t,n,s){try{return s?t(i(n)[0],n[1]):t(n)}catch(t){throw r(e),t}}},function(e,t,n){"use strict";var i=n(35),r=n(12),s=n(17);e.exports=function(e,t,n){var a=i(t);a in e?r.f(e,a,s(0,n)):e[a]=n}},function(e,t,n){var i=n(106);e.exports=i},function(e,t,n){n(107);var i=n(19);e.exports=i.Object.assign},function(e,t,n){var i=n(4),r=n(108);i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(e,t,n){"use strict";var i=n(11),r=n(5),s=n(46),a=n(57),o=n(52),l=n(21),u=n(33),c=Object.assign,d=Object.defineProperty;e.exports=!c||r((function(){if(i&&1!==c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||"abcdefghijklmnopqrst"!=s(c({},t)).join("")}))?function(e,t){for(var n=l(e),r=arguments.length,c=1,d=a.f,h=o.f;r>c;)for(var f,p=u(arguments[c++]),v=d?s(p).concat(d(p)):s(p),m=v.length,y=0;m>y;)f=v[y++],i&&!h.call(p,f)||(n[f]=p[f]);return n}:c},function(e,t,n){var i=n(110);e.exports=i},function(e,t,n){n(111);var i=n(19);e.exports=i.Object.keys},function(e,t,n){var i=n(4),r=n(21),s=n(46);i({target:"Object",stat:!0,forced:n(5)((function(){s(1)}))},{keys:function(e){return s(r(e))}})},function(e,t,n){var i=n(113);n(127),n(128),n(129),n(130),e.exports=i},function(e,t,n){n(72),n(114),n(116),n(78),n(79),n(123),n(63),n(124);var i=n(19);e.exports=i.Promise},function(e,t,n){var i=n(49),r=n(15),s=n(115);i||r(Object.prototype,"toString",s,{unsafe:!0})},function(e,t,n){"use strict";var i=n(49),r=n(70);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(e,t,n){"use strict";var i,r,s,a,o=n(4),l=n(18),u=n(0),c=n(13),d=n(73),h=n(15),f=n(117),p=n(48),v=n(118),m=n(9),y=n(16),g=n(119),b=n(38),E=n(29),_=n(71),k=n(74),w=n(75).set,A=n(120),O=n(77),T=n(122),S=n(23),L=n(30),M=n(26),P=n(58),N=n(3),I=n(28),C=n(60),x=N("species"),j="Promise",D=M.get,R=M.set,W=M.getterFor(j),V=d,F=u.TypeError,H=u.document,B=u.process,q=c("fetch"),U=S.f,G=U,z=!!(H&&H.createEvent&&u.dispatchEvent),K="function"==typeof PromiseRejectionEvent,X=P(j,(function(){if(!(b(V)!==String(V))){if(66===C)return!0;if(!I&&!K)return!0}if(l&&!V.prototype.finally)return!0;if(C>=51&&/native code/.test(V))return!1;var e=V.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[x]=t,!(e.then((function(){}))instanceof t)})),$=X||!_((function(e){V.all(e).catch((function(){}))})),Q=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},J=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;A((function(){for(var i=e.value,r=1==e.state,s=0;n.length>s;){var a,o,l,u=n[s++],c=r?u.ok:u.fail,d=u.resolve,h=u.reject,f=u.domain;try{c?(r||(2===e.rejection&&te(e),e.rejection=1),!0===c?a=i:(f&&f.enter(),a=c(i),f&&(f.exit(),l=!0)),a===u.promise?h(F("Promise-chain cycle")):(o=Q(a))?o.call(a,d,h):d(a)):h(i)}catch(e){f&&!l&&f.exit(),h(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Z(e)}))}},Y=function(e,t,n){var i,r;z?((i=H.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),u.dispatchEvent(i)):i={promise:t,reason:n},!K&&(r=u["on"+e])?r(i):"unhandledrejection"===e&&T("Unhandled promise rejection",n)},Z=function(e){w.call(u,(function(){var t,n=e.facade,i=e.value;if(ee(e)&&(t=L((function(){I?B.emit("unhandledRejection",i,n):Y("unhandledrejection",n,i)})),e.rejection=I||ee(e)?2:1,t.error))throw t.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e){w.call(u,(function(){var t=e.facade;I?B.emit("rejectionHandled",t):Y("rejectionhandled",t,e.value)}))},ne=function(e,t,n){return function(i){e(t,i,n)}},ie=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,J(e,!0))},re=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw F("Promise can't be resolved itself");var i=Q(t);i?A((function(){var n={done:!1};try{i.call(t,ne(re,n,e),ne(ie,n,e))}catch(t){ie(n,t,e)}})):(e.value=t,e.state=1,J(e,!1))}catch(t){ie({done:!1},t,e)}}};X&&(V=function(e){g(this,V,j),y(e),i.call(this);var t=D(this);try{e(ne(re,t),ne(ie,t))}catch(e){ie(t,e)}},(i=function(e){R(this,{type:j,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(V.prototype,{then:function(e,t){var n=W(this),i=U(k(this,V));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=I?B.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&J(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,t=D(e);this.promise=e,this.resolve=ne(re,t),this.reject=ne(ie,t)},S.f=U=function(e){return e===V||e===s?new r(e):G(e)},l||"function"!=typeof d||(a=d.prototype.then,h(d.prototype,"then",(function(e,t){var n=this;return new V((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof q&&o({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return O(V,q.apply(u,arguments))}}))),o({global:!0,wrap:!0,forced:X},{Promise:V}),p(V,j,!1,!0),v(j),s=c(j),o({target:j,stat:!0,forced:X},{reject:function(e){var t=U(this);return t.reject.call(void 0,e),t.promise}}),o({target:j,stat:!0,forced:l||X},{resolve:function(e){return O(l&&this===s?V:this,e)}}),o({target:j,stat:!0,forced:$},{all:function(e){var t=this,n=U(t),i=n.resolve,r=n.reject,s=L((function(){var n=y(t.resolve),s=[],a=0,o=1;E(e,(function(e){var l=a++,u=!1;s.push(void 0),o++,n.call(t,e).then((function(e){u||(u=!0,s[l]=e,--o||i(s))}),r)})),--o||i(s)}));return s.error&&r(s.value),n.promise},race:function(e){var t=this,n=U(t),i=n.reject,r=L((function(){var r=y(t.resolve);E(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},function(e,t,n){var i=n(15);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){"use strict";var i=n(13),r=n(12),s=n(3),a=n(11),o=s("species");e.exports=function(e){var t=i(e),n=r.f;a&&t&&!t[o]&&n(t,o,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i,r,s,a,o,l,u,c,d=n(0),h=n(32).f,f=n(75).set,p=n(76),v=n(121),m=n(28),y=d.MutationObserver||d.WebKitMutationObserver,g=d.document,b=d.process,E=d.Promise,_=h(d,"queueMicrotask"),k=_&&_.value;k||(i=function(){var e,t;for(m&&(e=b.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?a():s=void 0,e}}s=void 0,e&&e.enter()},p||m||v||!y||!g?E&&E.resolve?(u=E.resolve(void 0),c=u.then,a=function(){c.call(u,i)}):a=m?function(){b.nextTick(i)}:function(){f.call(d,i)}:(o=!0,l=g.createTextNode(""),new y(i).observe(l,{characterData:!0}),a=function(){l.data=o=!o})),e.exports=k||function(e){var t={fn:e,next:void 0};s&&(s.next=t),r||(r=t,a()),s=t}},function(e,t,n){var i=n(44);e.exports=/web0s(?!.*chrome)/i.test(i)},function(e,t,n){var i=n(0);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){"use strict";var i=n(4),r=n(18),s=n(73),a=n(5),o=n(13),l=n(74),u=n(77),c=n(15);i({target:"Promise",proto:!0,real:!0,forced:!!s&&a((function(){s.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,o("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),r||"function"!=typeof s||s.prototype.finally||c(s.prototype,"finally",o("Promise").prototype.finally)},function(e,t,n){var i=n(0),r=n(125),s=n(126),a=n(10),o=n(3),l=o("iterator"),u=o("toStringTag"),c=s.values;for(var d in r){var h=i[d],f=h&&h.prototype;if(f){if(f[l]!==c)try{a(f,l,c)}catch(e){f[l]=c}if(f[u]||a(f,u,d),r[d])for(var p in s)if(f[p]!==s[p])try{a(f,p,s[p])}catch(e){f[p]=s[p]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var i=n(24),r=n(61),s=n(22),a=n(26),o=n(64),l=a.set,u=a.getterFor("Array Iterator");e.exports=o(Array,"Array",(function(e,t){l(this,{type:"Array Iterator",target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},function(e,t,n){n(72)},function(e,t,n){n(78)},function(e,t,n){"use strict";var i=n(4),r=n(23),s=n(30);i({target:"Promise",stat:!0},{try:function(e){var t=r.f(this),n=s(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}})},function(e,t,n){n(79)},function(e,t){!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,i;return(t=t||{}).bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i=n.preventDefault,n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}()},function(e,t){var n;"function"!=typeof(n=window.Element.prototype).matches&&(n.matches=n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==this;)++n;return Boolean(t[n])}),"function"!=typeof n.closest&&(n.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})},function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw s}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a,o,l,u,c,d,h=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},f=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var v=p(n(134)),m=p(n(135)),y=p(n(136)),g=p(n(137)),b=p(n(138)),E=p(n(139)),_=p(n(140)),k=p(n(141)),w=n(1),A=n(6),O=n(2),T=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={media:{},mouse:{}},a.set(this,void 0),o.set(this,0),l.set(this,void 0),u.set(this,void 0),c.set(this,void 0),d.set(this,{Captions:v.default,Fullscreen:m.default,Levels:y.default,Play:g.default,Progress:b.default,Settings:E.default,Time:_.default,Volume:k.default}),h(this,u,t),this._setElements(),this}var t,n,r;return t=e,(n=[{key:"create",value:function(){var e=this;f(this,u).getElement().controls=!1;var t=O.isVideo(f(this,u).getElement());this._createControlsLayer(),this._buildElements(),this.events.controlschanged=function(){e.destroy(),e._setElements(),e.create()},this.events.ended=function(){f(e,u).getContainer().classList.remove("op-controls--hidden")},f(this,u).getElement().addEventListener("controlschanged",this.events.controlschanged,w.EVENT_OPTIONS),f(this,u).getElement().addEventListener("ended",this.events.ended,w.EVENT_OPTIONS),f(this,u).getOptions().controls.alwaysVisible||w.IS_ANDROID||w.IS_IOS||(this.events.mouse.mouseenter=function(){t&&!f(e,u).activeElement().paused&&(e._stopControlTimer(),f(e,u).activeElement().currentTime?(f(e,u).playBtn.setAttribute("aria-hidden",f(e,u).isMedia()?"false":"true"),f(e,u).loader.setAttribute("aria-hidden","true")):f(e,u).getOptions().showLoaderOnInit&&(f(e,u).playBtn.setAttribute("aria-hidden","true"),f(e,u).loader.setAttribute("aria-hidden","false")),f(e,u).getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mousemove=function(){t&&(f(e,u).activeElement().currentTime?(f(e,u).loader.setAttribute("aria-hidden","true"),f(e,u).playBtn.setAttribute("aria-hidden",f(e,u).isMedia()?"false":"true")):(f(e,u).playBtn.setAttribute("aria-hidden",f(e,u).getOptions().showLoaderOnInit?"true":"false"),f(e,u).loader.setAttribute("aria-hidden",f(e,u).getOptions().showLoaderOnInit?"false":"true")),f(e,u).getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mouseleave=function(){t&&!f(e,u).activeElement().paused&&e._startControlTimer(1e3)},this.events.media.play=function(){t&&e._startControlTimer(f(e,u).getOptions().hidePlayBtnTimer)},this.events.media.pause=function(){f(e,u).getContainer().classList.remove("op-controls--hidden"),e._stopControlTimer()},Object.keys(this.events.media).forEach((function(t){f(e,u).getElement().addEventListener(t,e.events.media[t],w.EVENT_OPTIONS)})),Object.keys(this.events.mouse).forEach((function(t){f(e,u).getContainer().addEventListener(t,e.events.mouse[t],w.EVENT_OPTIONS)})),this._startControlTimer(3e3))}},{key:"destroy",value:function(){var e=this;w.IS_ANDROID||w.IS_IOS||(Object.keys(this.events.mouse).forEach((function(t){f(e,u).getContainer().removeEventListener(t,e.events.mouse[t])})),Object.keys(this.events.media).forEach((function(t){f(e,u).getElement().removeEventListener(t,e.events.media[t])})),this._stopControlTimer()),f(this,u).getElement().removeEventListener("controlschanged",this.events.controlschanged),f(this,u).getElement().removeEventListener("ended",this.events.ended),Object.keys(f(this,c)).forEach((function(t){f(e,c)[t].forEach((function(t){t.custom?e._destroyCustomControl(t):"function"==typeof t.destroy&&t.destroy()}))})),O.removeElement(f(this,l))}},{key:"getContainer",value:function(){return f(this,l)}},{key:"getLayer",value:function(e){return f(this,l).querySelector(".op-controls-layer__".concat(e))||f(this,l)}},{key:"_createControlsLayer",value:function(){f(this,l)&&f(this,u).getContainer().querySelector(".op-controls")||(h(this,l,document.createElement("div")),f(this,l).className="op-controls",f(this,u).getContainer().appendChild(f(this,l)))}},{key:"_startControlTimer",value:function(e){var t=this,n=f(this,u).activeElement();this._stopControlTimer(),"undefined"!=typeof window&&h(this,o,window.setTimeout((function(){if((!n.paused||!n.ended)&&O.isVideo(f(t,u).getElement())){f(t,u).getContainer().classList.add("op-controls--hidden"),f(t,u).playBtn.setAttribute("aria-hidden","true"),t._stopControlTimer();var e=A.addEvent("controlshidden");f(t,u).getElement().dispatchEvent(e)}}),e))}},{key:"_stopControlTimer",value:function(){0!==f(this,o)&&(clearTimeout(f(this,o)),h(this,o,0))}},{key:"_setElements",value:function(){var e=this,t=f(this,u).getOptions().controls.layers;h(this,c,{"bottom-left":[],"bottom-middle":[],"bottom-right":[],left:[],main:[],middle:[],right:[],"top-left":[],"top-middle":[],"top-right":[]});var n=O.isVideo(f(this,u).getElement()),r=O.isAudio(f(this,u).getElement()),s=Object.keys(t),o=s.find((function(e){return/^(top|bottom)/.test(e)}));this._createControlsLayer(),s.forEach((function(s){var p=i(s.split("-"),2),v=p[0],m=p[1];if(m){f(e,l).classList.contains("op-controls__stacked")||f(e,l).classList.add("op-controls__stacked");var y="op-controls-layer__".concat(v);if(!f(e,l).querySelector(".".concat(y))){var g=document.createElement("div");g.className=y,f(e,l).appendChild(g)}}else if(o&&!f(e,l).querySelector(".".concat("op-controls-layer__center"))){var b=document.createElement("div");b.className="op-controls-layer__center",f(e,l).appendChild(b)}t[s].filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(t){var i=o&&!m?"center":v,l="".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),p=new(f(e,d)[l])(f(e,u),m||v,i);"settings"===t&&h(e,a,p),(n||"fullscreen"!==t&&r)&&f(e,c)[s].push(p)}))})),f(this,u).getCustomControls().forEach((function(t){var n=i(t.position.split("-"),2),r=n[0],s=n[1],a=o&&!s?"center":r;t.layer=a,t.position=s||r,"right"===t.position?f(e,c)[t.position].unshift(t):f(e,c)[t.position].push(t)}))}},{key:"_buildElements",value:function(){var e=this;Object.keys(f(this,c)).forEach((function(t){f(e,c)[t].forEach((function(t){t.custom?e._createCustomControl(t):t.create()}))})),Object.keys(f(this,c)).forEach((function(t){f(e,c)[t].forEach((function(t){if((!f(e,u).getOptions().detachMenus||t instanceof E.default)&&!t.custom&&"function"==typeof t.addSettings){var n=t.addSettings();f(e,a)&&Object.keys(n).length&&f(e,a).addItem(n.name,n.key,n.default,n.subitems,n.className)}}))}));var t=A.addEvent("controlschanged");f(this,l).dispatchEvent(t)}},{key:"_hideCustomMenu",value:function(e){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){e.setAttribute("aria-hidden","true")})))}},{key:"_toggleCustomMenu",value:function(e,t,n){f(this,u).getContainer().querySelectorAll(".op-settings").forEach((function(e){"false"===e.getAttribute("aria-hidden")&&e.id!==t.id&&e.setAttribute("aria-hidden","true")})),t.setAttribute("aria-hidden","true"===t.getAttribute("aria-hidden")?"false":"true"),"function"==typeof n.click&&n.click(e)}},{key:"_createCustomControl",value:function(e){var t=this,n=document.createElement("button"),i=/\.(jpg|png|svg|gif)$/.test(e.icon)?'<img src="'.concat(e.icon,'">'):e.icon;if(n.className="op-controls__".concat(e.id," op-control__").concat(e.position," ").concat(e.showInAds?"":"op-control__hide-in-ad"),n.tabIndex=0,n.id=e.id,n.title=e.title,n.innerHTML="".concat(i,' <span class="op-sr">').concat(e.title,"</span>"),e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var r=document.createElement("div");r.className="op-settings op-settings__custom",r.id="".concat(e.id,"-menu"),r.setAttribute("aria-hidden","true");var s=e.subitems.map((function(t){var n="";return t.icon&&(n=/\.(jpg|png|svg|gif)$/.test(t.icon)?'<img src="'.concat(t.icon,'">'):t.icon),'<div class="op-settings__menu-item" tabindex="0" '.concat(t.title?'title="'.concat(t.title,'"'):"",' role="menuitemradio">\n                    <div class="op-settings__menu-label" id="').concat(t.id,'" data-value="').concat(e.id,"-").concat(t.id,'">').concat(n," ").concat(t.label,"</div>\n                </div>")}));r.innerHTML='<div class="op-settings__menu" role="menu">'.concat(s.join(""),"</div>"),f(this,u).getContainer().appendChild(r),e.subitems.forEach((function(e){var t=r.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.addEventListener("click",e.click,w.EVENT_OPTIONS)})),n.addEventListener("click",(function(n){return t._toggleCustomMenu(n,r,e)}),w.EVENT_OPTIONS),f(this,u).getElement().addEventListener("controlshidden",(function(){return t._hideCustomMenu(r)}),w.EVENT_OPTIONS)}else e.click&&"function"==typeof e.click&&n.addEventListener("click",e.click,w.EVENT_OPTIONS);e.mouseenter&&"function"==typeof e.mouseenter&&n.addEventListener("mouseenter",e.mouseenter,w.EVENT_OPTIONS),e.mouseleave&&"function"==typeof e.mouseleave&&n.addEventListener("mouseenter",e.mouseleave,w.EVENT_OPTIONS),e.keydown&&"function"==typeof e.keydown&&n.addEventListener("keydown",e.keydown,w.EVENT_OPTIONS),e.blur&&"function"==typeof e.blur&&n.addEventListener("blur",e.blur,w.EVENT_OPTIONS),e.focus&&"function"==typeof e.focus&&n.addEventListener("focus",e.focus,w.EVENT_OPTIONS),e.layer&&("main"===e.layer?f(this,u).getContainer().appendChild(n):this.getLayer(e.layer).appendChild(n))}},{key:"_destroyCustomControl",value:function(e){var t=this,n=e.title.toLowerCase().replace(" ","-"),i=this.getContainer().querySelector(".op-controls__".concat(n));if(i){if(e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var r=f(this,u).getContainer().querySelector("#".concat(e.id,"-menu"));r&&(e.subitems.forEach((function(e){var t=r.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.removeEventListener("click",e.click)})),i.removeEventListener("click",(function(n){return t._toggleCustomMenu(n,r,e)})),f(this,u).getElement().removeEventListener("controlshidden",(function(){return t._hideCustomMenu(r)})),O.removeElement(r))}e.click&&"function"==typeof e.click&&i.removeEventListener("click",e.click),e.mouseenter&&"function"==typeof e.mouseenter&&i.removeEventListener("mouseenter",e.mouseenter),e.mouseleave&&"function"==typeof e.mouseleave&&i.removeEventListener("mouseenter",e.mouseleave),e.keydown&&"function"==typeof e.keydown&&i.removeEventListener("keydown",e.keydown),e.blur&&"function"==typeof e.blur&&i.removeEventListener("blur",e.blur),e.focus&&"function"==typeof e.focus&&i.removeEventListener("focus",e.focus),O.removeElement(i)}}}])&&s(t.prototype,n),r&&s(t,r),e}();a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,t.default=T},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s,a,o,l,u,c,d,h,f,p,v,m,y,g,b,E=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},_=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var k=n(1),w=n(6),A=n(2),O=n(50),T=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s.set(this,void 0),a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),u.set(this,{button:{},global:{},media:{}}),c.set(this,{}),d.set(this,void 0),h.set(this,{}),f.set(this,void 0),p.set(this,void 0),v.set(this,"off"),m.set(this,void 0),y.set(this,void 0),g.set(this,void 0),b.set(this,void 0),E(this,s,t),E(this,y,t.getOptions().labels),E(this,m,t.getOptions().detachMenus),E(this,g,n),E(this,b,i);for(var r=_(this,s).getElement().textTracks,k=[],w=0,A=r.length;w<A;w++){var O=['track[kind="subtitles"][srclang="'.concat(r[w].language,'"][label="').concat(r[w].label,'"]'),'track[kind="captions"][srclang="'.concat(r[w].language,'"][label="').concat(r[w].label,'"]')];_(this,s).getElement().querySelector(O.join(", "))&&k.push(r[w])}if(!k.length)for(var T=0,S=r.length;T<S;T++)k.push(r[T]);return E(this,d,k),E(this,f,!!_(this,d).length),this}var t,n,T;return t=e,(n=[{key:"create",value:function(){var e=this;if(_(this,f)){E(this,a,document.createElement("button")),_(this,a).className="op-controls__captions op-control__".concat(_(this,g)),_(this,a).tabIndex=0,_(this,a).title=_(this,y).toggleCaptions,_(this,a).setAttribute("aria-controls",_(this,s).id),_(this,a).setAttribute("aria-pressed","false"),_(this,a).setAttribute("aria-label",_(this,y).toggleCaptions),_(this,a).setAttribute("data-active-captions","off"),_(this,a).innerHTML='<span class="op-sr">'.concat(_(this,y).toggleCaptions,"</span>"),_(this,m)&&(_(this,a).classList.add("op-control--no-hover"),E(this,l,document.createElement("div")),_(this,l).className="op-settings op-captions__menu",_(this,l).setAttribute("aria-hidden","true"),_(this,l).innerHTML='<div class="op-settings__menu" role="menu" id="menu-item-captions">\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio" aria-checked="'.concat("off"===_(this,v)?"true":"false",'">\n                    <div class="op-settings__submenu-label op-subtitles__option" data-value="captions-off">').concat(_(this,y).off,"</div>\n                </div>\n            </div>"));for(var t=function(t,n,i){var r=i[t];if("subtitles"===r.kind||"captions"===r.kind){r.default&&(E(e,v,r.srclang),_(e,a).setAttribute("data-active-captions",r.srclang));var s=A.getAbsoluteUrl(r.src),o=_(e,d)[t];o&&o.language===r.srclang&&(o.cues&&o.cues.length>0?(_(e,c)[r.srclang]=e._getNativeCues(_(e,d)[t]),e._prepareTrack(t,r.srclang,s,r.default||!1)):A.request(s,"text",(function(n){if(_(e,c)[r.srclang]=e._getCuesFromText(n),e._prepareTrack(t,r.srclang,s,r.default||!1),_(e,l)&&!_(e,l).querySelector('.op-subtitles__option[data-value="captions-'.concat(_(e,d)[t].language,'"]'))){var i=document.createElement("div");i.className="op-settings__submenu-item",i.tabIndex=0,i.setAttribute("role","menuitemradio"),i.setAttribute("aria-checked",_(e,v)===_(e,d)[t].language?"true":"false"),i.innerHTML='<div class="op-settings__submenu-label op-subtitles__option"\n                                        data-value="captions-'.concat(_(e,d)[t].language,'">\n                                        ').concat(_(e,y).lang[_(e,d)[t].language]||_(e,d)[t].label,"\n                                    </div>"),_(e,l).appendChild(i)}})))}},n=0,i=_(this,s).getElement().querySelectorAll("track"),r=i.length;n<r;n++)t(n,0,i);E(this,o,document.createElement("div")),_(this,o).className="op-captions",_(this,o).innerHTML="<span></span>";var h=_(this,o).querySelector("span");if(_(this,u).media.timeupdate=function(){if(_(e,s).isMedia())if(_(e,p)){var t=_(e,c)[_(e,p).language];if(h&&void 0!==t){var n=e._search(t,_(e,s).getMedia().currentTime);h.innerHTML="",n>-1&&A.hasClass(_(e,a),"op-controls__captions--on")?(_(e,o).classList.add("op-captions--on"),h.innerHTML=e._sanitize(t[n].text)):e._hide()}}else e._hide();else e._hide()},_(this,u).button.click=function(t){var n=t.target;if(_(e,m)){for(var i=_(e,s).getContainer().querySelectorAll(".op-settings"),r=0,a=i.length;r<a;++r)i[r]!==_(e,l)&&i[r].setAttribute("aria-hidden","true");"true"===_(e,l).getAttribute("aria-hidden")?_(e,l).setAttribute("aria-hidden","false"):_(e,l).setAttribute("aria-hidden","true")}else n.setAttribute("aria-pressed","true"),A.hasClass(n,"op-controls__captions--on")?(e._hide(),n.classList.remove("op-controls__captions--on"),n.setAttribute("data-active-captions","off")):(_(e,p)||E(e,p,_(e,d)[0]),e._show(),n.classList.add("op-controls__captions--on"),n.setAttribute("data-active-captions",_(e,p).language))},_(this,u).button.mouseover=function(){if(!k.IS_IOS&&!k.IS_ANDROID&&_(e,m)){for(var t=_(e,s).getContainer().querySelectorAll(".op-settings"),n=0,i=t.length;n<i;++n)t[n]!==_(e,l)&&t[n].setAttribute("aria-hidden","true");"true"===_(e,l).getAttribute("aria-hidden")&&_(e,l).setAttribute("aria-hidden","false")}},_(this,u).button.mouseout=function(){if(!k.IS_IOS&&!k.IS_ANDROID&&_(e,m)){for(var t=_(e,s).getContainer().querySelectorAll(".op-settings"),n=0,i=t.length;n<i;++n)t[n].setAttribute("aria-hidden","true");"false"===_(e,l).getAttribute("aria-hidden")&&_(e,l).setAttribute("aria-hidden","true")}},_(this,f)){var O=_(this,s).getContainer();if(O.insertBefore(_(this,o),O.firstChild),_(this,m)){var T=document.createElement("div");T.className="op-controls__container op-control__".concat(_(this,g)),T.appendChild(_(this,a)),T.appendChild(_(this,l)),_(this,s).getControls().getLayer(_(this,b)).appendChild(T)}else _(this,s).getControls().getLayer(_(this,b)).appendChild(_(this,a));_(this,a).addEventListener("click",_(this,u).button.click,k.EVENT_OPTIONS)}_(this,d).length<=1&&!_(this,m)||!_(this,d).length&&_(this,m)||(_(this,u).global.click=function(t){var n=t.target;if(n.closest("#".concat(_(e,s).id))&&A.hasClass(n,"op-subtitles__option")){var i=n.getAttribute("data-value"),r=i?i.replace("captions-",""):"",o=Array.from(_(e,d)).filter((function(e){return e.language===r}));if(E(e,p,o?o.pop():void 0),_(e,m)){if(A.hasClass(_(e,a),"op-controls__captions--on")?(e._hide(),_(e,a).classList.remove("op-controls__captions--on"),_(e,a).setAttribute("data-active-captions","off")):(e._show(),_(e,a).classList.add("op-controls__captions--on"),_(e,a).setAttribute("data-active-captions",r)),n.parentElement&&n.parentElement.parentElement)for(var u=n.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"),c=0,h=u.length;c<h;++c)u[c].setAttribute("aria-checked","false");n.parentElement&&n.parentElement.setAttribute("aria-checked","true"),_(e,l).setAttribute("aria-hidden","false")}else e._show(),_(e,a).setAttribute("data-active-captions",r);var f=w.addEvent("captionschanged");_(e,s).getElement().dispatchEvent(f)}},_(this,m)&&(_(this,a).addEventListener("mouseover",_(this,u).button.mouseover,k.EVENT_OPTIONS),_(this,l).addEventListener("mouseover",_(this,u).button.mouseover,k.EVENT_OPTIONS),_(this,l).addEventListener("mouseout",_(this,u).button.mouseout,k.EVENT_OPTIONS),_(this,s).getElement().addEventListener("controlshidden",_(this,u).button.mouseout,k.EVENT_OPTIONS)),void 0!==_(this,u).global.click&&document.addEventListener("click",_(this,u).global.click,k.EVENT_OPTIONS))}}},{key:"destroy",value:function(){void 0!==_(this,u).global.click&&document.removeEventListener("click",_(this,u).global.click),_(this,f)&&(_(this,a).removeEventListener("click",_(this,u).button.click),_(this,m)&&(_(this,a).removeEventListener("mouseover",_(this,u).button.mouseover),_(this,l).removeEventListener("mouseover",_(this,u).button.mouseover),_(this,l).removeEventListener("mouseout",_(this,u).button.mouseout),_(this,s).getElement().removeEventListener("controlshidden",_(this,u).button.mouseout),A.removeElement(_(this,l))),_(this,s).getElement().removeEventListener("timeupdate",_(this,u).media.timeupdate),A.removeElement(_(this,a)),A.removeElement(_(this,o)))}},{key:"addSettings",value:function(){if(_(this,m)||_(this,d).length<=1)return{};var e=this._formatMenuItems();return e.length>2?{className:"op-subtitles__option",default:_(this,v)||"off",key:"captions",name:_(this,y).captions,subitems:e}:{}}},{key:"_getCuesFromText",value:function(e){var t,n=e.split(/\r?\n/),r=[],s=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,a=new RegExp("^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\x3e ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*?)$");function o(e){e="string"!=typeof e?JSON.stringify(e):e;try{e=JSON.parse(e)}catch(e){return!1}return"object"===i(e)&&null!==e}for(var l=0,u=n.length;l<u;l++){var c=a.exec(n[l]);if(c&&l<n.length){l-1>=0&&""!==n[l-1]&&(t=n[l-1]);var d=n[++l];for(l++;""!==n[l]&&l<n.length;)d="".concat(d,"\n").concat(n[l]),l++;d=d.trim().replace(s,"<a href='$1' target='_blank'>$1</a>");var h=O.timeToSeconds(c[1]);r.push({endTime:O.timeToSeconds(c[3]),identifier:t||"",settings:o(c[5])?JSON.parse(c[5]):{},startTime:0===h?.2:h,text:d})}t=""}return r}},{key:"_getNativeCues",value:function(e){var t=[],n=e.cues;return Object.keys(n).forEach((function(e){var i=parseInt(e,10),r=n[i];t.push({endTime:r.endTime,identifier:r.id,settings:{},startTime:r.startTime,text:r.text})})),t}},{key:"_show",value:function(){if(_(this,o)&&_(this,p)&&void 0!==_(this,p).cues){var e=_(this,o).querySelector("span");e&&(e.innerHTML=""),_(this,s).getElement().addEventListener("timeupdate",_(this,u).media.timeupdate,k.EVENT_OPTIONS)}}},{key:"_hide",value:function(){_(this,o).classList.remove("op-captions--on"),_(this,p)||(_(this,a).classList.remove("op-controls__captions--on"),_(this,a).setAttribute("data-active-captions","off"))}},{key:"_search",value:function(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>1,s=e[r].startTime,a=e[r].endTime;if(t>=s&&t<a)return r;s<t?n=r+1:s>t&&(i=r-1)}return-1}},{key:"_sanitize",value:function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.getElementsByTagName("script"),i=n.length;i--;)A.removeElement(n[i]);for(var r=t.getElementsByTagName("*"),s=0,a=r.length;s<a;s++)for(var o=r[s].attributes,l=Array.prototype.slice.call(o),u=0,c=l.length;u<c;u++)/^(on|javascript:)/.test(l[u].name)?A.removeElement(r[s]):"style"===l[u].name&&r[s].removeAttribute(l[u].name);return t.innerHTML}},{key:"_prepareTrack",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_(this,h)[t]=n,_(this,d)[e].mode="disabled",r&&(E(this,v,t),_(this,a).classList.add("op-controls__captions--on"),_(this,a).setAttribute("data-active-captions",t),E(this,p,Array.from(_(this,d)).filter((function(e){return e.language===_(i,v)})).pop()),this._show(),_(this,s).getContainer().classList.contains("op-captions--detected")||_(this,s).getContainer().classList.add("op-captions--detected"))}},{key:"_formatMenuItems",value:function(){for(var e=this,t=[{key:"off",label:_(this,y).off}],n=function(n,i){var r=_(e,d)[n];(t=t.filter((function(e){return e.key!==r.language}))).push({key:r.language,label:_(e,y).lang[r.language]||_(e,d)[n].label})},i=0,r=_(this,d).length;i<r;i++)n(i);return t}}])&&r(t.prototype,n),T&&r(t,T),e}();s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,t.default=T},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,s,a,o,l,u,c,d,h,f,p=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},v=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var m=n(1),y=n(2),g=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,void 0),s.set(this,void 0),a.set(this,void 0),o.set(this,[]),l.set(this,0),u.set(this,0),c.set(this,void 0),d.set(this,void 0),h.set(this,void 0),f.set(this,void 0),p(this,r,t),p(this,d,t.getOptions().labels),p(this,h,n),p(this,f,i),p(this,s,document.body.classList.contains("op-fullscreen__on"));var v=document;return this.fullScreenEnabled=!!(v.fullscreenEnabled||v.mozFullScreenEnabled||v.msFullscreenEnabled||v.webkitSupportsFullscreen||v.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen),this}var t,n,g;return t=e,(n=[{key:"create",value:function(){var e=this;p(this,a,document.createElement("button")),v(this,a).type="button",v(this,a).className="op-controls__fullscreen op-control__".concat(v(this,h)),v(this,a).tabIndex=0,v(this,a).title=v(this,d).fullscreen,v(this,a).setAttribute("aria-controls",v(this,r).id),v(this,a).setAttribute("aria-pressed","false"),v(this,a).setAttribute("aria-label",v(this,d).fullscreen),v(this,a).innerHTML='<span class="op-sr">'.concat(v(this,d).fullscreen,"</span>"),p(this,c,(function(){v(e,a).setAttribute("aria-pressed","true"),e.toggleFullscreen()})),p(this,o,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"]),this._setFullscreenData(!1),v(this,r).getContainer().addEventListener("keydown",this._keydownEvent.bind(this),m.EVENT_OPTIONS),v(this,o).forEach((function(t){document.addEventListener(t,e._fullscreenChange.bind(e),m.EVENT_OPTIONS)})),v(this,a).addEventListener("click",v(this,c).bind(this),m.EVENT_OPTIONS),v(this,r).getControls().getLayer(v(this,f)).appendChild(v(this,a)),m.IS_IPHONE&&(v(this,r).getElement().addEventListener("webkitbeginfullscreen",(function(){p(e,s,!0),e._setFullscreenData(!0),document.body.classList.add("op-fullscreen__on")}),m.EVENT_OPTIONS),v(this,r).getElement().addEventListener("webkitendfullscreen",(function(){p(e,s,!1),e._setFullscreenData(!1),document.body.classList.remove("op-fullscreen__on")}),m.EVENT_OPTIONS))}},{key:"destroy",value:function(){var e=this;v(this,r).getContainer().removeEventListener("keydown",this._keydownEvent.bind(this)),v(this,o).forEach((function(t){document.removeEventListener(t,e._fullscreenChange.bind(e))})),m.IS_IPHONE&&(v(this,r).getElement().removeEventListener("webkitbeginfullscreen",(function(){p(e,s,!0),e._setFullscreenData(!1),document.body.classList.add("op-fullscreen__on")})),v(this,r).getElement().removeEventListener("webkitendfullscreen",(function(){p(e,s,!1),e._setFullscreenData(!0),document.body.classList.remove("op-fullscreen__on")}))),v(this,a).removeEventListener("click",v(this,c).bind(this)),y.removeElement(v(this,a))}},{key:"toggleFullscreen",value:function(){if(v(this,s)){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():document.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen?e.msExitFullscreen():this._fullscreenChange(),document.body.classList.remove("op-fullscreen__on")}else{var t=v(this,r).getElement();p(this,l,window.screen.width),p(this,u,window.screen.height),t.requestFullscreen?t.parentElement.requestFullscreen():t.mozRequestFullScreen?t.parentElement.mozRequestFullScreen():t.webkitRequestFullScreen?t.parentElement.webkitRequestFullScreen():t.msRequestFullscreen?t.parentElement.msRequestFullscreen():t.webkitEnterFullscreen?t.webkitEnterFullscreen():this._fullscreenChange(),document.body.classList.add("op-fullscreen__on")}if("undefined"!=typeof window&&(m.IS_ANDROID||m.IS_IPHONE)){var n=window.screen;n.orientation&&(v(this,s)||n.orientation.lock("landscape"))}}},{key:"_fullscreenChange",value:function(){var e=v(this,s)?0:v(this,l),t=v(this,s)?0:v(this,u);this._setFullscreenData(!v(this,s)),v(this,r).isAd()&&v(this,r).getAd().resizeAds(e,t),p(this,s,!v(this,s)),v(this,s)?document.body.classList.add("op-fullscreen__on"):document.body.classList.remove("op-fullscreen__on"),this._resize(e,t)}},{key:"_setFullscreenData",value:function(e){v(this,r).getContainer().setAttribute("data-fullscreen",(!!e).toString()),e?v(this,a).classList.add("op-controls__fullscreen--out"):v(this,a).classList.remove("op-controls__fullscreen--out")}},{key:"_resize",value:function(e,t){var n=v(this,r).getContainer(),i=v(this,r).getElement(),s=v(this,r).getOptions(),a="";if(e)n.style.width="100%",i.style.width="100%";else if(s.width){var o="number"==typeof s.width?"".concat(s.width,"px"):s.width;a+="width: ".concat(o," !important;"),i.style.removeProperty("width")}else i.style.removeProperty("width"),n.style.removeProperty("width");if(t)i.style.height="100%",n.style.height="100%";else if(s.height){var l="number"==typeof s.height?"".concat(s.height,"px"):s.height;a+="height: ".concat(l," !important;"),i.style.removeProperty("height")}else i.style.removeProperty("height"),n.style.removeProperty("height");a&&n.setAttribute("style",a)}},{key:"_keydownEvent",value:function(e){70!==(e.which||e.keyCode||0)||e.ctrlKey||void 0===this.fullScreenEnabled||(this.toggleFullscreen(),e.preventDefault())}}])&&i(t.prototype,n),g&&i(t,g),e}();r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,t.default=g},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,s,a,o,l,u,c,d,h,f,p=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},v=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var m=n(1),y=n(6),g=n(2),b=n(14),E=function(){function e(t,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,void 0),s.set(this,void 0),a.set(this,void 0),o.set(this,{button:{},global:{},media:{}}),l.set(this,void 0),u.set(this,void 0),c.set(this,[]),d.set(this,""),h.set(this,void 0),f.set(this,void 0),p(this,r,t),p(this,u,t.getOptions().labels),p(this,l,t.getOptions().detachMenus),p(this,h,n),p(this,f,i),this}var t,n,E;return t=e,(n=[{key:"create",value:function(){var e=this,t=null!==v(this,r).getOptions().defaultLevel?parseInt(v(this,r).getOptions().defaultLevel,10):v(this,r).getMedia().level;p(this,d,"".concat(t));var n=this._formatMenuItems(),i=n.length?n.find((function(t){return t.key===v(e,d)})):null,f=i?i.label:v(this,u).auto,E=!1;p(this,s,document.createElement("button")),v(this,s).className="op-controls__levels op-control__".concat(v(this,h)),v(this,s).tabIndex=0,v(this,s).title=v(this,u).mediaLevels,v(this,s).setAttribute("aria-controls",v(this,r).id),v(this,s).setAttribute("aria-label",v(this,u).mediaLevels),v(this,s).setAttribute("data-active-level",v(this,d)),v(this,s).innerHTML="<span>".concat(f,"</span>");var _=function(){v(e,c).length?E||(v(e,r).getMedia().level=t,E=!0):(e._gatherLevels.bind(e),setTimeout((function(){v(e,r).getMedia().level=t;var n=y.addEvent("controlschanged");v(e,r).getElement().dispatchEvent(n)}),0))};v(this,o).media.loadedmetadata=_.bind(this),v(this,o).media.manifestLoaded=_.bind(this),v(this,o).media.hlsManifestParsed=_.bind(this),v(this,l)&&(this._buildMenu(),v(this,o).button.click=function(){if(v(e,l)){for(var t=v(e,r).getContainer().querySelectorAll(".op-settings"),n=0,i=t.length;n<i;++n)t[n]!==v(e,a)&&t[n].setAttribute("aria-hidden","true");"true"===v(e,a).getAttribute("aria-hidden")?v(e,a).setAttribute("aria-hidden","false"):v(e,a).setAttribute("aria-hidden","true")}},v(this,o).button.mouseover=function(){if(!m.IS_IOS&&!m.IS_ANDROID){for(var t=v(e,r).getContainer().querySelectorAll(".op-settings"),n=0,i=t.length;n<i;++n)t[n]!==v(e,a)&&t[n].setAttribute("aria-hidden","true");"true"===v(e,a).getAttribute("aria-hidden")&&v(e,a).setAttribute("aria-hidden","false")}},v(this,o).button.mouseout=function(){if(!m.IS_IOS&&!m.IS_ANDROID){for(var t=v(e,r).getContainer().querySelectorAll(".op-settings"),n=0,i=t.length;n<i;++n)t[n].setAttribute("aria-hidden","true");"false"===v(e,a).getAttribute("aria-hidden")&&v(e,a).setAttribute("aria-hidden","true")}},v(this,s).addEventListener("click",v(this,o).button.click,m.EVENT_OPTIONS),v(this,s).addEventListener("mouseover",v(this,o).button.mouseover,m.EVENT_OPTIONS),v(this,a).addEventListener("mouseover",v(this,o).button.mouseover,m.EVENT_OPTIONS),v(this,a).addEventListener("mouseout",v(this,o).button.mouseout,m.EVENT_OPTIONS),v(this,r).getElement().addEventListener("controlshidden",v(this,o).button.mouseout,m.EVENT_OPTIONS)),v(this,o).global.click=function(t){var n=t.target,i=v(e,r).getMedia().currentTime,o=v(e,r).getMedia().paused;if(n.closest("#".concat(v(e,r).id))&&g.hasClass(n,"op-levels__option")){var u=n.getAttribute("data-value"),c=parseInt(u?u.replace("levels-",""):"-1",10);if(p(e,d,"".concat(c)),v(e,l)){v(e,s).setAttribute("data-active-level","".concat(c)),v(e,s).innerHTML="<span>".concat(n.innerText,"</span>");for(var h=n.parentElement&&n.parentElement.parentElement?n.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"):[],f=0,m=h.length;f<m;++f)h[f].setAttribute("aria-checked","false");n.parentElement&&n.parentElement.setAttribute("aria-checked","true"),v(e,a).setAttribute("aria-hidden","false")}v(e,r).getMedia().level=c,v(e,r).getMedia().currentTime=i,o||v(e,r).play();var b=y.addEvent("levelchanged",{detail:{label:n.innerText.trim(),level:c}});v(e,r).getElement().dispatchEvent(b),t.preventDefault()}};var k=m.NAV.connection||m.NAV.mozConnection||m.NAV.webkitConnection;v(this,o).global.connection=function(){var t=v(e,r).getMedia().current;if(!b.isDashSource(t)&&!b.isHlsSource(t)){var n=k.effectiveType,i=v(e,c).map((function(e){return Object.assign(Object.assign({},e),{resolution:parseInt(e.label.replace("p",""),10)})})),s=i.find((function(e){return e.resolution<360}));"4g"===n?s=i.find((function(e){return e.resolution>=720})):"3g"===n&&(s=i.find((function(e){return e.resolution>=360&&e.resolution<720}))),s&&(v(e,r).pause(),v(e,r).getMedia().level=s.id,v(e,r).play()),n=k.effectiveType}},Object.keys(v(this,o).media).forEach((function(t){v(e,r).getElement().addEventListener(t,v(e,o).media[t],m.EVENT_OPTIONS)})),document.addEventListener("click",v(this,o).global.click,m.EVENT_OPTIONS),k&&k.addEventListener("change",v(this,o).global.connection,m.EVENT_OPTIONS)}},{key:"destroy",value:function(){var e=this,t=m.NAV.connection||m.NAV.mozConnection||m.NAV.webkitConnection;Object.keys(v(this,o).media).forEach((function(t){v(e,r).getElement().removeEventListener(t,v(e,o).media[t])})),document.removeEventListener("click",v(this,o).global.click),t&&t.removeEventListener("change",v(this,o).global.connection),v(this,l)&&(v(this,s).removeEventListener("click",v(this,o).button.click),g.removeElement(v(this,s)),v(this,s).removeEventListener("mouseover",v(this,o).button.mouseover),v(this,a).removeEventListener("mouseover",v(this,o).button.mouseover),v(this,a).removeEventListener("mouseout",v(this,o).button.mouseout),v(this,r).getElement().removeEventListener("controlshidden",v(this,o).button.mouseout),g.removeElement(v(this,a)))}},{key:"addSettings",value:function(){if(v(this,l))return{};var e=this._formatMenuItems();return e.length>2?{className:"op-levels__option",default:v(this,d)||"-1",key:"levels",name:v(this,u).levels,subitems:e}:{}}},{key:"_formatMenuItems",value:function(){for(var e=this._gatherLevels(),t=e.length,n=t?[{key:"-1",label:v(this,u).auto}]:[],i=function(t){var i=e[t];(n=n.filter((function(e){return e.key!==i.id}))).push({key:i.id,label:i.label})},r=0;r<t;r++)i(r);return n=n.reduce((function(e,t){return e.find((function(e){return e.label===t.label}))?e:e.concat([t])}),[]).sort((function(e,t){return parseInt(e.label,10)>parseInt(t.label,10)?1:-1}))}},{key:"_getResolutionsLabel",value:function(e){return e>=4320?"8K":e>=2160?"4K":e>=1440?"1440p":e>=1080?"1080p":e>=720?"720p":e>=480?"480p":e>=360?"360p":e>=240?"240p":e>=144?"144p":v(this,u).auto}},{key:"_gatherLevels",value:function(){var e=this;return v(this,c).length||v(this,r).getMedia().levels.forEach((function(t){v(e,c).push(Object.assign(Object.assign({},t),{label:t.label||e._getResolutionsLabel(t.height)}))})),v(this,c)}},{key:"_buildMenu",value:function(){var e=this;if(v(this,l)){v(this,s).classList.add("op-control--no-hover"),p(this,a,document.createElement("div")),v(this,a).className="op-settings op-levels__menu",v(this,a).setAttribute("aria-hidden","true");var t=this._formatMenuItems(),n='<div class="op-settings__menu" role="menu" id="menu-item-levels">\n                '.concat(t.map((function(t){return'\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio"\n                    aria-checked="'.concat(v(e,d)===t.key?"true":"false",'">\n                    <div class="op-settings__submenu-label ').concat("op-levels__option",'" data-value="levels-').concat(t.key,'">').concat(t.label,"</div>\n                </div>")})).join(""),"\n            </div>");v(this,a).innerHTML=n;var i=document.createElement("div");i.className="op-controls__container op-control__".concat(v(this,h)),i.appendChild(v(this,s)),i.appendChild(v(this,a)),v(this,r).getControls().getLayer(v(this,f)).appendChild(i)}}}])&&i(t.prototype,n),E&&i(t,E),e}();r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,t.default=E},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,s,a,o,l,u,c=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},d=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=h(n(51)),p=n(1),v=n(6),m=n(2),y=function(){function e(t,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,void 0),s.set(this,void 0),a.set(this,{controls:{},media:{}}),o.set(this,void 0),l.set(this,void 0),u.set(this,void 0),c(this,r,t),c(this,o,d(this,r).getOptions().labels),c(this,l,n),c(this,u,i),this}var t,n,h;return t=e,(n=[{key:"create",value:function(){var e=this;c(this,s,document.createElement("button")),d(this,s).type="button",d(this,s).className="op-controls__playpause op-control__".concat(d(this,l)),d(this,s).tabIndex=0,d(this,s).title=d(this,o).play,d(this,s).setAttribute("aria-controls",d(this,r).id),d(this,s).setAttribute("aria-pressed","false"),d(this,s).setAttribute("aria-label",d(this,o).play),d(this,s).innerHTML='<span class="op-sr">'.concat(d(this,o).play,"/").concat(d(this,o).pause,"</span>"),d(this,r).getControls().getLayer(d(this,u)).appendChild(d(this,s)),d(this,a).media.click=function(t){d(e,s).setAttribute("aria-pressed","true");var n=d(e,r).activeElement();n.paused||n.ended?(d(e,r).getAd()&&(d(e,r).getAd().playRequested=!0),n.play()):n.pause(),t.preventDefault()};var t=m.isAudio(d(this,r).getElement());d(this,a).media.play=function(){d(e,r).activeElement().ended?(d(e,r).isMedia()?d(e,s).classList.add("op-controls__playpause--replay"):d(e,s).classList.add("op-controls__playpause--pause"),d(e,s).title=d(e,o).play,d(e,s).setAttribute("aria-label",d(e,o).play)):(d(e,s).classList.remove("op-controls__playpause--replay"),d(e,s).classList.add("op-controls__playpause--pause"),d(e,s).title=d(e,o).pause,d(e,s).setAttribute("aria-label",d(e,o).pause),d(e,r).getOptions().pauseOthers&&Object.keys(f.default.instances).forEach((function(t){t!==d(e,r).id&&f.default.instances[t].activeElement().pause()})))},d(this,a).media.loadedmetadata=function(){m.hasClass(d(e,s),"op-controls__playpause--pause")&&(d(e,s).classList.remove("op-controls__playpause--replay"),d(e,s).classList.remove("op-controls__playpause--pause"),d(e,s).title=d(e,o).play,d(e,s).setAttribute("aria-label",d(e,o).play))},d(this,a).media.playing=function(){m.hasClass(d(e,s),"op-controls__playpause--pause")||(d(e,s).classList.remove("op-controls__playpause--replay"),d(e,s).classList.add("op-controls__playpause--pause"),d(e,s).title=d(e,o).pause,d(e,s).setAttribute("aria-label",d(e,o).pause))},d(this,a).media.pause=function(){d(e,s).classList.remove("op-controls__playpause--pause"),d(e,s).title=d(e,o).play,d(e,s).setAttribute("aria-label",d(e,o).play)},d(this,a).media.ended=function(){d(e,r).activeElement().ended&&d(e,r).isMedia()||d(e,r).getElement().currentTime>=d(e,r).getElement().duration||d(e,r).getElement().currentTime<=0?(d(e,s).classList.add("op-controls__playpause--replay"),d(e,s).classList.remove("op-controls__playpause--pause")):(d(e,s).classList.remove("op-controls__playpause--replay"),d(e,s).classList.add("op-controls__playpause--pause")),d(e,s).title=d(e,o).play,d(e,s).setAttribute("aria-label",d(e,o).play)},d(this,a).media.adsmediaended=function(){d(e,s).classList.remove("op-controls__playpause--replay"),d(e,s).classList.add("op-controls__playpause--pause"),d(e,s).title=d(e,o).pause,d(e,s).setAttribute("aria-label",d(e,o).pause)},d(this,a).media.playererror=function(){t&&d(e,r).activeElement().pause()};var n=d(this,r).getElement();d(this,a).controls.controlschanged=function(){if(!d(e,r).activeElement().paused){var t=v.addEvent("playing");n.dispatchEvent(t)}},Object.keys(d(this,a).media).forEach((function(t){n.addEventListener(t,d(e,a).media[t],p.EVENT_OPTIONS)})),d(this,r).getControls().getContainer().addEventListener("controlschanged",d(this,a).controls.controlschanged,p.EVENT_OPTIONS),d(this,r).getContainer().addEventListener("keydown",this._keydownEvent.bind(this),p.EVENT_OPTIONS),d(this,s).addEventListener("click",d(this,a).media.click,p.EVENT_OPTIONS)}},{key:"destroy",value:function(){var e=this;Object.keys(d(this,a).media).forEach((function(t){d(e,r).getElement().removeEventListener(t,d(e,a).media[t])})),d(this,r).getControls().getContainer().removeEventListener("controlschanged",d(this,a).controls.controlschanged),d(this,r).getContainer().removeEventListener("keydown",this._keydownEvent.bind(this)),d(this,s).removeEventListener("click",d(this,a).media.click),m.removeElement(d(this,s))}},{key:"_keydownEvent",value:function(e){var t=e.which||e.keyCode||0,n=d(this,r).activeElement();13!==t&&32!==t||(n.paused?n.play():n.pause(),e.preventDefault())}}])&&i(t.prototype,n),h&&i(t,h),e}();r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,t.default=y},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,s,a,o,l,u,c,d,h,f,p,v=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},m=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var y=n(1),g=n(2),b=n(50),E=function(){function e(t,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,void 0),s.set(this,void 0),a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),u.set(this,void 0),c.set(this,{container:{},controls:{},global:{},media:{},slider:{}}),d.set(this,void 0),h.set(this,void 0),f.set(this,void 0),p.set(this,void 0),v(this,r,t),v(this,h,t.getOptions().labels),v(this,d,!1),v(this,f,n),v(this,p,i),this}var t,n,E;return t=e,(n=[{key:"create",value:function(){var e=this;v(this,s,document.createElement("div")),m(this,s).className="op-controls__progress op-control__".concat(m(this,f)),m(this,s).tabIndex=0,m(this,s).setAttribute("aria-label",m(this,h).progressSlider),m(this,s).setAttribute("aria-valuemin","0"),v(this,a,document.createElement("input")),m(this,a).type="range",m(this,a).className="op-controls__progress--seek",m(this,a).tabIndex=-1,m(this,a).setAttribute("min","0"),m(this,a).setAttribute("max","0"),m(this,a).setAttribute("step","0.1"),m(this,a).value="0",m(this,a).setAttribute("aria-label",m(this,h).progressRail),m(this,a).setAttribute("role","slider"),v(this,o,document.createElement("progress")),m(this,o).className="op-controls__progress--buffer",m(this,o).setAttribute("max","100"),m(this,o).value=0,v(this,l,document.createElement("progress")),m(this,l).className="op-controls__progress--played",m(this,l).setAttribute("max","100"),m(this,l).setAttribute("role","presentation"),m(this,l).value=0,m(this,s).appendChild(m(this,a)),m(this,s).appendChild(m(this,l)),m(this,s).appendChild(m(this,o)),y.IS_IOS||y.IS_ANDROID||(v(this,u,document.createElement("span")),m(this,u).className="op-controls__tooltip",m(this,u).tabIndex=-1,m(this,u).innerHTML="00:00",m(this,s).appendChild(m(this,u)));var t=function(){m(e,a).classList.contains("error")&&m(e,a).classList.remove("error");var t=m(e,r).activeElement();if(t.duration===1/0||m(e,r).getElement().getAttribute("op-live__enabled")||m(e,r).getElement().getAttribute("op-dvr__enabled"))m(e,r).getElement().getAttribute("op-dvr__enabled")?(m(e,a).setAttribute("max","1"),m(e,a).value="1",m(e,a).style.backgroundSize="100% 100%",m(e,l).value=1,m(e,s).setAttribute("aria-valuemax","1"),m(e,s).setAttribute("aria-hidden","false")):m(e,r).getOptions().live.showProgress||m(e,s).setAttribute("aria-hidden","true");else{m(e,a).setAttribute("max","".concat(t.duration));var n=m(e,r).isMedia()?t.currentTime:t.duration-t.currentTime;m(e,a).value=n.toString(),m(e,s).setAttribute("aria-valuemax",t.duration.toString())}},n=0,i=m(this,r).getOptions().progress.duration||0,E=g.isAudio(m(this,r).getElement());m(this,c).media.loadedmetadata=t.bind(this),m(this,c).controls.controlschanged=t.bind(this),m(this,c).media.progress=function(t){var n=t.target;if(n.duration===1/0||m(e,r).getElement().getAttribute("op-live__enabled"))m(e,r).getElement().getAttribute("op-dvr__enabled")||"false"!==m(e,s).getAttribute("aria-hidden")||m(e,r).getOptions().live.showProgress||m(e,s).setAttribute("aria-hidden","true");else if(n.duration>0)for(var i=0,a=n.buffered.length;i<a;i++)if(n.buffered.start(n.buffered.length-1-i)<n.currentTime){m(e,o).value=n.buffered.end(n.buffered.length-1-i)/n.duration*100;break}},m(this,c).media.waiting=function(){E&&!m(e,a).classList.contains("loading")&&m(e,a).classList.add("loading"),E&&m(e,a).classList.contains("error")&&m(e,a).classList.remove("error")},m(this,c).media.playererror=function(){E&&!m(e,a).classList.contains("error")&&m(e,a).classList.add("error"),E&&m(e,a).classList.contains("loading")&&m(e,a).classList.remove("loading")},m(this,c).media.pause=function(){var t=m(e,r).activeElement();if(t.duration!==1/0&&!m(e,r).getElement().getAttribute("op-live__enabled")){var n=t.currentTime;m(e,s).setAttribute("aria-valuenow",n.toString()),m(e,s).setAttribute("aria-valuetext",b.formatTime(n))}},m(this,c).media.play=function(){E&&m(e,a).classList.contains("loading")&&m(e,a).classList.remove("loading"),E&&m(e,a).classList.contains("error")&&m(e,a).classList.remove("error"),m(e,r).activeElement().duration===1/0||m(e,r).getElement().getAttribute("op-live__enabled")||(m(e,s).removeAttribute("aria-valuenow"),m(e,s).removeAttribute("aria-valuetext"))},m(this,c).media.playing=function(){E&&m(e,a).classList.contains("loading")&&m(e,a).classList.remove("loading"),E&&m(e,a).classList.contains("error")&&m(e,a).classList.remove("error")},m(this,c).media.timeupdate=function(){var t=m(e,r).activeElement();if(t.duration===1/0||m(e,r).getElement().getAttribute("op-live__enabled")&&!m(e,r).getElement().getAttribute("op-dvr__enabled"))m(e,r).getElement().getAttribute("op-dvr__enabled")||"false"!==m(e,s).getAttribute("aria-hidden")||m(e,r).getOptions().live.showProgress||m(e,s).setAttribute("aria-hidden","true");else{m(e,a).getAttribute("max")&&"0"!==m(e,a).getAttribute("max")&&parseFloat(m(e,a).getAttribute("max")||"-1")===t.duration||(m(e,a).setAttribute("max","".concat(t.duration)),m(e,s).setAttribute("aria-hidden","false"));var o=m(e,r).isMedia()?t.currentTime:t.duration-t.currentTime+1>=100?100:t.duration-t.currentTime+1,u=parseFloat(m(e,a).min),c=parseFloat(m(e,a).max);m(e,a).value=o.toString(),m(e,a).style.backgroundSize="".concat(100*(o-u)/(c-u),"% 100%"),m(e,l).value=t.duration<=0||isNaN(t.duration)||!isFinite(t.duration)?i:o/t.duration*100,m(e,r).getElement().getAttribute("op-dvr__enabled")&&Math.floor(m(e,l).value)>=99&&(n=t.currentTime,m(e,s).setAttribute("aria-hidden","false"))}},m(this,c).media.durationchange=function(){var t=m(e,r).activeElement(),n=m(e,r).isMedia()?t.currentTime:t.duration-t.currentTime;m(e,a).setAttribute("max","".concat(t.duration)),m(e,s).setAttribute("aria-valuemax",t.duration.toString()),m(e,l).value=t.duration<=0||isNaN(t.duration)||!isFinite(t.duration)?i:n/t.duration*100},m(this,c).media.ended=function(){m(e,a).style.backgroundSize="0% 100%",m(e,a).setAttribute("max","0"),m(e,o).value=0,m(e,l).value=0};var _=function(t){if(!g.hasClass(m(e,a),"op-progress--pressed")){var s=t.target;m(e,a).classList.add(".op-progress--pressed");var o=m(e,r).activeElement(),u=parseFloat(s.min),c=parseFloat(s.max),d=parseFloat(s.value);m(e,a).style.backgroundSize="".concat(100*(d-u)/(c-u),"% 100%"),m(e,l).value=o.duration<=0||isNaN(o.duration)||!isFinite(o.duration)?i:d/o.duration*100,m(e,r).getElement().getAttribute("op-dvr__enabled")?o.currentTime=Math.round(m(e,l).value)>=99?n:d:o.currentTime=d,m(e,a).classList.remove(".op-progress--pressed")}},k=function(t){var n=m(e,r).activeElement();1!==t.which&&0!==t.which||!m(e,r).isMedia()||n.paused||n.play().then((function(){n.pause.bind(e),v(e,d,!0)}))},w=function(){var t=m(e,r).activeElement();!0===m(e,d)&&m(e,r).isMedia()&&t.paused&&(t.play(),v(e,d,!1))};m(this,c).slider.input=_.bind(this),m(this,c).slider.change=_.bind(this),m(this,c).slider.mousedown=k.bind(this),m(this,c).slider.mouseup=w.bind(this),m(this,c).slider.touchstart=function(t){var n=m(e,r).activeElement();if(n.duration===1/0)return!0;var i=t.originalEvent?t.originalEvent.changedTouches:t.changedTouches,o=((i?i[0].pageX:t.pageX)-g.offset(m(e,s)).left)/m(e,s).offsetWidth*n.duration;m(e,a).value=o.toString(),_(t),k(t)}.bind(this),m(this,c).slider.touchend=w.bind(this),y.IS_IOS||y.IS_ANDROID||(m(this,c).container.mousemove=function(t){var n=m(e,r).activeElement();if(n.duration===1/0||m(e,r).isAd())return!0;var i=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches[0].pageX:t.pageX,o=i-g.offset(m(e,s)).left,l=m(e,u).offsetWidth/2,c=o/m(e,s).offsetWidth,d=c*n.duration,h=m(e,r).getContainer(),f=h.offsetWidth-m(e,u).offsetWidth;o<=0||i-g.offset(h).left<=l?o=0:i-g.offset(h).left>=f?o=f-g.offset(m(e,a)).left-10:o-=l,c>=0&&c<=1?m(e,u).classList.add("op-controls__tooltip--visible"):m(e,u).classList.remove("op-controls__tooltip--visible"),m(e,u).style.left="".concat(o,"px"),m(e,u).innerHTML=isNaN(d)?"00:00":b.formatTime(d)},m(this,c).global.mousemove=function(t){t.target.closest(".op-controls__progress")&&!m(e,r).isAd()||m(e,u).classList.remove("op-controls__tooltip--visible")}),Object.keys(m(this,c).media).forEach((function(t){m(e,r).getElement().addEventListener(t,m(e,c).media[t],y.EVENT_OPTIONS)})),Object.keys(m(this,c).slider).forEach((function(t){m(e,a).addEventListener(t,m(e,c).slider[t],y.EVENT_OPTIONS)})),m(this,s).addEventListener("keydown",m(this,r).getEvents().keydown,y.EVENT_OPTIONS),m(this,s).addEventListener("mousemove",m(this,c).container.mousemove,y.EVENT_OPTIONS),document.addEventListener("mousemove",m(this,c).global.mousemove,y.EVENT_OPTIONS),m(this,r).getContainer().addEventListener("keydown",this._keydownEvent.bind(this),y.EVENT_OPTIONS),m(this,r).getControls().getContainer().addEventListener("controlschanged",m(this,c).controls.controlschanged,y.EVENT_OPTIONS),m(this,r).getControls().getLayer(m(this,p)).appendChild(m(this,s))}},{key:"destroy",value:function(){var e=this;Object.keys(m(this,c)).forEach((function(t){m(e,r).getElement().removeEventListener(t,m(e,c)[t])})),Object.keys(m(this,c).slider).forEach((function(t){m(e,a).removeEventListener(t,m(e,c).slider[t])})),m(this,s).removeEventListener("keydown",m(this,r).getEvents().keydown),m(this,s).removeEventListener("mousemove",m(this,c).container.mousemove),document.removeEventListener("mousemove",m(this,c).global.mousemove),m(this,r).getContainer().removeEventListener("keydown",this._keydownEvent.bind(this)),m(this,r).getControls().getContainer().removeEventListener("controlschanged",m(this,c).controls.controlschanged),g.removeElement(m(this,o)),g.removeElement(m(this,l)),g.removeElement(m(this,a)),y.IS_IOS||y.IS_ANDROID||g.removeElement(m(this,u)),g.removeElement(m(this,s))}},{key:"_keydownEvent",value:function(e){var t=m(this,r).activeElement(),n=m(this,r).isAd(),i=e.which||e.keyCode||0,s=m(this,r).getOptions().step?m(this,r).getOptions().step:.05*t.duration,a=t.duration!==1/0?s:m(this,r).getOptions().progress.duration;35!==i||n?36!==i||n?37!==i&&39!==i||n||t.duration===1/0||(t.currentTime+=37===i?-1*a:a,t.currentTime<0?t.currentTime=0:t.currentTime>=t.duration&&(t.currentTime=t.duration),e.preventDefault()):(t.currentTime=0,e.preventDefault()):(t.currentTime=t.duration,e.preventDefault())}}])&&i(t.prototype,n),E&&i(t,E),e}();r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,t.default=E},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s,a,o,l,u,c,d,h,f,p=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},v=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var m=n(1),y=n(2),g=function(){function e(t,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s.set(this,void 0),a.set(this,{}),o.set(this,void 0),l.set(this,void 0),u.set(this,{global:{},media:{}}),c.set(this,""),d.set(this,void 0),h.set(this,void 0),f.set(this,void 0),p(this,s,t),p(this,d,t.getOptions().labels),p(this,h,n),p(this,f,i),this}var t,n,g;return t=e,(n=[{key:"create",value:function(){var e=this;p(this,o,document.createElement("button")),v(this,o).className="op-controls__settings op-control__".concat(v(this,h)),v(this,o).tabIndex=0,v(this,o).title=v(this,d).settings,v(this,o).setAttribute("aria-controls",v(this,s).id),v(this,o).setAttribute("aria-pressed","false"),v(this,o).setAttribute("aria-label",v(this,d).settings),v(this,o).innerHTML='<span class="op-sr">'.concat(v(this,d).settings,"</span>"),p(this,l,document.createElement("div")),v(this,l).className="op-settings",v(this,l).setAttribute("aria-hidden","true"),v(this,l).innerHTML='<div class="op-settings__menu" role="menu"></div>',this.clickEvent=function(){v(e,o).setAttribute("aria-pressed","true");for(var t=v(e,s).getContainer().querySelectorAll(".op-settings"),n=0,i=t.length;n<i;++n)t[n]!==v(e,l)&&t[n].setAttribute("aria-hidden","true");v(e,l).setAttribute("aria-hidden","false"===v(e,l).getAttribute("aria-hidden")?"true":"false")},this.hideEvent=function(){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){v(e,l).innerHTML=v(e,c),v(e,l).setAttribute("aria-hidden","true")})))},this.removeEvent=function(t){var n=t.detail,i=n.id,r=n.type;e.removeItem(i,r)},v(this,u).media.controlshidden=this.hideEvent.bind(this),v(this,u).media.settingremoved=this.removeEvent.bind(this),v(this,u).media.play=this.hideEvent.bind(this),v(this,u).media.pause=this.hideEvent.bind(this),v(this,u).global.click=function(t){t.target.closest("#".concat(v(e,s).id))&&y.hasClass(t.target,"op-speed__option")&&(v(e,s).getMedia().playbackRate=parseFloat(t.target.getAttribute("data-value").replace("speed-","")))},v(this,u).global.resize=this.hideEvent.bind(this),v(this,o).addEventListener("click",this.clickEvent.bind(this),m.EVENT_OPTIONS),Object.keys(v(this,u)).forEach((function(t){v(e,s).getElement().addEventListener(t,v(e,u).media[t],m.EVENT_OPTIONS)})),document.addEventListener("click",v(this,u).global.click,m.EVENT_OPTIONS),"undefined"!=typeof window&&window.addEventListener("resize",v(this,u).global.resize,m.EVENT_OPTIONS),v(this,s).getControls().getLayer(v(this,f)).appendChild(v(this,o)),v(this,s).getContainer().appendChild(v(this,l))}},{key:"destroy",value:function(){var e=this;v(this,o).removeEventListener("click",this.clickEvent.bind(this)),Object.keys(v(this,u)).forEach((function(t){v(e,s).getElement().removeEventListener(t,v(e,u).media[t])})),document.removeEventListener("click",v(this,u).global.click),"undefined"!=typeof window&&window.removeEventListener("resize",v(this,u).global.resize),void 0!==v(this,u).global["settings.submenu"]&&(document.removeEventListener("click",v(this,u).global["settings.submenu"]),v(this,s).getElement().removeEventListener("controlshidden",this.hideEvent)),y.removeElement(v(this,l)),y.removeElement(v(this,o))}},{key:"addSettings",value:function(){return{className:"op-speed__option",default:v(this,s)&&v(this,s).getMedia()?v(this,s).getMedia().defaultPlaybackRate.toString():"1",key:"speed",name:v(this,d).speed,subitems:[{key:"0.5",label:"0.5"},{key:"1",label:v(this,d).speedNormal},{key:"1.5",label:"1.5"},{key:"2",label:"2"}]}}},{key:"addItem",value:function(e,t,n,r,o){var d=this,h=document.createElement("div");h.className="op-settings__menu-item",h.tabIndex=0,h.setAttribute("role","menuitemradio"),h.innerHTML='<div class="op-settings__menu-label" data-value="'.concat(t,"-").concat(n,'">').concat(e,"</div>");var f=r?r.find((function(e){return e.key===n})):null;f&&(h.innerHTML+='<div class="op-settings__menu-content">'.concat(f.label,"</div>"));var g=v(this,l).querySelector(".op-settings__menu");if(g&&g.appendChild(h),p(this,c,v(this,l).innerHTML),r){var b='\n                <div class="op-settings__header">\n                    <button type="button" class="op-settings__back">'.concat(e,'</button>\n                </div>\n                <div class="op-settings__menu" role="menu" id="menu-item-').concat(t,'">\n                    ').concat(r.map((function(e){return'\n                    <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio"\n                        aria-checked="'.concat(n===e.key?"true":"false",'">\n                        <div class="op-settings__submenu-label ').concat(o||"",'" data-value="').concat(t,"-").concat(e.key,'">').concat(e.label,"</div>\n                    </div>")})).join(""),"\n                </div>");v(this,a)[t]=b}v(this,u).global["settings.submenu"]=function(e){var r=e.target;if(r.closest("#".concat(v(d,s).id))){if(y.hasClass(r,"op-settings__back"))v(d,l).classList.add("op-settings--sliding"),setTimeout((function(){v(d,l).innerHTML=v(d,c),v(d,l).classList.remove("op-settings--sliding")}),100);else if(y.hasClass(r,"op-settings__menu-content")){var o=r.parentElement?r.parentElement.querySelector(".op-settings__menu-label"):null,u=o?o.getAttribute("data-value"):null,h=u?u.split("-"):[];if(h.length>0){h.pop();var f=h.join("-").replace(/^\-|\-$/,"");void 0!==i(v(d,a)[f])&&(v(d,l).classList.add("op-settings--sliding"),setTimeout((function(){v(d,l).innerHTML=v(d,a)[f],v(d,l).classList.remove("op-settings--sliding")}),100))}}else if(y.hasClass(r,"op-settings__submenu-label")){var m=r.getAttribute("data-value"),g=m?m.replace("".concat(t,"-"),""):"",b=r.innerText,E=v(d,l).querySelector("#menu-item-".concat(t," .op-settings__submenu-item[aria-checked=true]"));E&&(E.setAttribute("aria-checked","false"),r.parentElement&&r.parentElement.setAttribute("aria-checked","true"),v(d,a)[t]=v(d,l).innerHTML,v(d,l).classList.add("op-settings--sliding"),setTimeout((function(){v(d,l).innerHTML=v(d,c);var e=v(d,l).querySelector('.op-settings__menu-label[data-value="'.concat(t,"-").concat(n,'"]'));e&&(e.setAttribute("data-value","".concat(m)),e.nextElementSibling&&(e.nextElementSibling.innerHTML=b)),n=g,p(d,c,v(d,l).innerHTML),v(d,l).classList.remove("op-settings--sliding")}),100))}}else d.hideEvent()},document.addEventListener("click",v(this,u).global["settings.submenu"],m.EVENT_OPTIONS),v(this,s).getElement().addEventListener("controlshidden",this.hideEvent,m.EVENT_OPTIONS)}},{key:"removeItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=v(this,s).getElement().querySelector(".op-settings__submenu-label[data-value=".concat(t,"-").concat(e,"]"));if(i&&y.removeElement(i),v(this,s).getElement().querySelectorAll(".op-settings__submenu-label[data-value^=".concat(t,"]")).length<n){delete v(this,a)[t];var r=v(this,s).getElement().querySelector(".op-settings__menu-label[data-value^=".concat(t,"]")),o=r?r.closest(".op-settings__menu-item"):null;o&&y.removeElement(o)}}}])&&r(t.prototype,n),g&&r(t,g),e}();s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,t.default=g},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,s,a,o,l,u,c,d,h,f=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},p=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var v=n(1),m=n(2),y=n(50),g=function(){function e(t,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,void 0),s.set(this,void 0),a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),u.set(this,{controls:{},media:{}}),c.set(this,void 0),d.set(this,void 0),h.set(this,void 0),f(this,r,t),f(this,c,t.getOptions().labels),f(this,d,n),f(this,h,i),this}var t,n,g;return t=e,(n=[{key:"create",value:function(){var e=this;f(this,s,document.createElement("time")),p(this,s).className="op-controls__current",p(this,s).setAttribute("role","timer"),p(this,s).setAttribute("aria-live","off"),p(this,s).setAttribute("aria-hidden","false"),p(this,s).innerText="0:00";var t=p(this,r).getOptions().progress.showCurrentTimeOnly;t||(f(this,a,document.createElement("span")),p(this,a).className="op-controls__time-delimiter",p(this,a).setAttribute("aria-hidden","false"),p(this,a).innerText="/",f(this,o,document.createElement("time")),p(this,o).className="op-controls__duration",p(this,o).setAttribute("aria-hidden","false"),p(this,o).innerText=y.formatTime(p(this,r).getOptions().progress.duration));var n=p(this,r).getControls().getLayer(p(this,h));f(this,l,document.createElement("span")),p(this,l).className="op-controls-time op-control__".concat(p(this,d)),p(this,l).appendChild(p(this,s)),t||(p(this,l).appendChild(p(this,a)),p(this,l).appendChild(p(this,o))),n.appendChild(p(this,l));var i=function(){var n=p(e,r).activeElement();if(n.duration===1/0||p(e,r).getElement().getAttribute("op-live__enabled"))t||p(e,o).setAttribute("aria-hidden","true"),p(e,a).setAttribute("aria-hidden","true");else{if(!t){var i=isNaN(n.duration)?p(e,r).getOptions().progress.duration:n.duration;p(e,o).innerText=y.formatTime(i)}p(e,s).innerText=y.formatTime(n.currentTime)}};p(this,u).media.loadedmetadata=i.bind(this),p(this,u).controls.controlschanged=i.bind(this);var m=p(this,r).getOptions().live.showLabel;p(this,u).media.timeupdate=function(){var n=p(e,r).activeElement();if(n.duration===1/0||p(e,r).getElement().getAttribute("op-live__enabled")||p(e,r).getElement().getAttribute("op-dvr__enabled"))p(e,r).getElement().getAttribute("op-dvr__enabled")?(t||(p(e,o).setAttribute("aria-hidden","true"),p(e,a).setAttribute("aria-hidden","true")),p(e,s).innerText=y.formatTime(n.currentTime)):t||!p(e,r).getElement().getAttribute("op-dvr__enabled")&&"false"===p(e,o).getAttribute("aria-hidden")?(t||(p(e,o).setAttribute("aria-hidden","true"),p(e,a).setAttribute("aria-hidden","true")),p(e,s).innerText=m?p(e,c).live:y.formatTime(n.currentTime)):p(e,s).innerText=m?p(e,c).live:y.formatTime(n.currentTime);else{var i=y.formatTime(n.duration);t||isNaN(n.duration)||i===p(e,o).innerText?(t||i!==p(e,o).innerText)&&(p(e,s).innerText=m?p(e,c).live:y.formatTime(n.currentTime)):(p(e,o).innerText=i,p(e,o).setAttribute("aria-hidden","false"),p(e,a).setAttribute("aria-hidden","false")),p(e,s).innerText=y.formatTime(n.currentTime)}},p(this,u).media.ended=function(){var n=p(e,r).activeElement(),i=isNaN(n.duration)?p(e,r).getOptions().progress.duration:n.duration;!t&&p(e,r).isMedia()&&(p(e,o).innerText=y.formatTime(i))},Object.keys(p(this,u).media).forEach((function(t){p(e,r).getElement().addEventListener(t,p(e,u).media[t],v.EVENT_OPTIONS)})),p(this,r).getControls().getContainer().addEventListener("controlschanged",p(this,u).controls.controlschanged,v.EVENT_OPTIONS)}},{key:"destroy",value:function(){var e=this;Object.keys(p(this,u).media).forEach((function(t){p(e,r).getElement().removeEventListener(t,p(e,u).media[t])})),p(this,r).getControls().getContainer().removeEventListener("controlschanged",p(this,u).controls.controlschanged),m.removeElement(p(this,s)),p(this,r).getOptions().progress.showCurrentTimeOnly||(m.removeElement(p(this,a)),m.removeElement(p(this,o))),m.removeElement(p(this,l))}}])&&i(t.prototype,n),g&&i(t,g),e}();r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,t.default=g},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,s,a,o,l,u,c,d,h,f,p=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},v=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var m=n(1),y=n(6),g=n(2),b=function(){function e(t,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,void 0),s.set(this,void 0),a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),u.set(this,{button:{},media:{},slider:{}}),c.set(this,void 0),d.set(this,void 0),h.set(this,void 0),f.set(this,void 0),p(this,r,t),p(this,d,t.getOptions().labels),p(this,c,v(this,r).getMedia().volume),p(this,h,n),p(this,f,i),this}var t,n,b;return t=e,(n=[{key:"create",value:function(){var e=this;p(this,a,document.createElement("div")),v(this,a).className="op-controls__volume op-control__".concat(v(this,h)),v(this,a).tabIndex=0,v(this,a).setAttribute("aria-valuemin","0"),v(this,a).setAttribute("aria-valuemax","100"),v(this,a).setAttribute("aria-valuenow","".concat(v(this,c))),v(this,a).setAttribute("aria-valuetext","".concat(v(this,d).volume,": ").concat(v(this,c))),v(this,a).setAttribute("aria-orientation","vertical"),v(this,a).setAttribute("aria-label",v(this,d).volumeSlider),p(this,l,document.createElement("input")),v(this,l).type="range",v(this,l).className="op-controls__volume--input",v(this,l).tabIndex=-1,v(this,l).value=v(this,r).getMedia().volume.toString(),v(this,l).setAttribute("min","0"),v(this,l).setAttribute("max","1"),v(this,l).setAttribute("step","0.1"),v(this,l).setAttribute("aria-label",v(this,d).volumeControl),p(this,o,document.createElement("progress")),v(this,o).className="op-controls__volume--display",v(this,o).setAttribute("max","10"),v(this,o).setAttribute("role","presentation"),v(this,o).value=10*v(this,r).getMedia().volume,v(this,a).appendChild(v(this,l)),v(this,a).appendChild(v(this,o)),p(this,s,document.createElement("button")),v(this,s).type="button",v(this,s).className="op-controls__mute op-control__".concat(v(this,h)),v(this,s).tabIndex=0,v(this,s).title=v(this,d).mute,v(this,s).setAttribute("aria-controls",v(this,r).id),v(this,s).setAttribute("aria-pressed","false"),v(this,s).setAttribute("aria-label",v(this,d).mute),v(this,s).innerHTML='<span class="op-sr">'.concat(v(this,d).mute,"</span>");var t=function(t){var n=v(e,r).activeElement(),i=parseFloat(t.target.value);n.volume=i,n.muted=0===n.volume,p(e,c,i);var s=v(e,r).getContainer().querySelector(".op-player__unmute");!n.muted&&s&&g.removeElement(s);var a=y.addEvent("volumechange");v(e,r).getElement().dispatchEvent(a)};if(v(this,u).media.volumechange=function(){var t,n,i,u=v(e,r).activeElement();n=1*(t=u).volume,i=Math.floor(100*n),v(e,l).value="".concat(t.volume),v(e,o).value=10*n,v(e,a).setAttribute("aria-valuenow","".concat(i)),v(e,a).setAttribute("aria-valuetext","".concat(v(e,d).volume,": ").concat(i)),function(t){var n=t.volume;n<=.5&&n>0?(v(e,s).classList.remove("op-controls__mute--muted"),v(e,s).classList.add("op-controls__mute--half")):0===n?(v(e,s).classList.add("op-controls__mute--muted"),v(e,s).classList.remove("op-controls__mute--half")):(v(e,s).classList.remove("op-controls__mute--muted"),v(e,s).classList.remove("op-controls__mute--half"))}(u)},v(this,u).media.timeupdate=function(){g.isAudio(v(e,r).getElement())&&(v(e,r).activeElement().duration===1/0||v(e,r).getElement().getAttribute("op-live__enabled"))},v(this,u).media.loadedmetadata=function(){var t=v(e,r).activeElement();t.muted&&(t.volume=0);var n=y.addEvent("volumechange");v(e,r).getElement().dispatchEvent(n)},v(this,u).slider.input=t.bind(this),v(this,u).slider.change=t.bind(this),v(this,u).button.click=function(){v(e,s).setAttribute("aria-pressed","true");var t=v(e,r).activeElement();t.muted=!t.muted,t.muted?(t.volume=0,v(e,s).title=v(e,d).unmute,v(e,s).setAttribute("aria-label",v(e,d).unmute)):(t.volume=v(e,c),v(e,s).title=v(e,d).mute,v(e,s).setAttribute("aria-label",v(e,d).mute));var n=y.addEvent("volumechange");v(e,r).getElement().dispatchEvent(n)},v(this,s).addEventListener("click",v(this,u).button.click,m.EVENT_OPTIONS),Object.keys(v(this,u).media).forEach((function(t){v(e,r).getElement().addEventListener(t,v(e,u).media[t],m.EVENT_OPTIONS)})),Object.keys(v(this,u).slider).forEach((function(t){v(e,l).addEventListener(t,v(e,u).slider[t],m.EVENT_OPTIONS)})),v(this,r).getContainer().addEventListener("keydown",this._keydownEvent.bind(this),m.EVENT_OPTIONS),!m.IS_ANDROID&&!m.IS_IOS){var n=v(this,r).getControls().getLayer(v(this,f));n.appendChild(v(this,s)),n.appendChild(v(this,a))}}},{key:"destroy",value:function(){var e=this;v(this,s).removeEventListener("click",v(this,u).button.click),Object.keys(v(this,u).media).forEach((function(t){v(e,r).getElement().removeEventListener(t,v(e,u).media[t])})),Object.keys(v(this,u).slider).forEach((function(t){v(e,l).removeEventListener(t,v(e,u).slider[t])})),v(this,r).getContainer().removeEventListener("keydown",this._keydownEvent.bind(this)),g.removeElement(v(this,l)),g.removeElement(v(this,o)),g.removeElement(v(this,a))}},{key:"_keydownEvent",value:function(e){var t=e.which||e.keyCode||0,n=v(this,r).activeElement();if(38===t||40===t){var i=38===t?Math.min(n.volume+.1,1):Math.max(n.volume-.1,0);n.volume=i,n.muted=!(i>0),e.preventDefault()}}}])&&i(t.prototype,n),b&&i(t,b),e}();r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,t.default=b},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a,o,l,u,c,d,h,f,p,v=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),m=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),y=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&v(t,e,n);return m(t,e),t},g=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},b=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},E=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var _=E(n(143)),k=E(n(144)),w=E(n(145)),A=E(n(146)),O=y(n(14)),T=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return r(this,e),a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),u.set(this,void 0),c.set(this,void 0),d.set(this,void 0),h.set(this,!1),f.set(this,{media:{},optionsKey:{},rules:[]}),p.set(this,void 0),g(this,a,t),g(this,c,n),g(this,l,this._getMediaFiles()),g(this,f,s),g(this,d,i),this}var t,n,v;return t=e,(n=[{key:"canPlayType",value:function(e){return b(this,o).canPlayType(e)}},{key:"load",value:function(){var e=this;if(!b(this,l).length)throw new TypeError("Media not set");b(this,o)&&"function"==typeof b(this,o).destroy&&(1===b(this,l).length&&b(this,l)[0].src===b(this,o).media.src||b(this,o).destroy()),b(this,l).some((function(t){try{g(e,o,e._invoke(t))}catch(n){g(e,o,new A.default(b(e,a),t))}return b(e,o).canPlayType(t.type)}));try{if(null===b(this,o))throw new TypeError("Media cannot be played with any valid media type");return b(this,o).promise.then((function(){b(e,o).load()}))}catch(e){throw b(this,o).destroy(),e}}},{key:"play",value:function(){var e=this;if(!this.loaded){this.loaded=!0;var t=this.load();if(t)return this.loaded=!0,t.then((function(){b(e,o).play()}))}return g(this,u,new Promise((function(e){e({})})).then(b(this,o).promise.then(b(this,o).play()))),b(this,u)}},{key:"pause",value:function(){var e=this;void 0!==b(this,u)?b(this,u).then((function(){b(e,o).pause()})):b(this,o).pause()}},{key:"destroy",value:function(){b(this,o).destroy()}},{key:"_getMediaFiles",value:function(){var e=[],t=b(this,a).querySelectorAll("source"),n=b(this,a).src;n&&e.push({src:n,type:b(this,a).getAttribute("type")||O.predictType(n)});for(var i=0,r=t.length;i<r;i++){var s=t[i],o=s.src;e.push({src:o,type:s.getAttribute("type")||O.predictType(o)}),0===i&&g(this,p,e[0])}return e.length||e.push({src:"",type:O.predictType("")}),e}},{key:"_invoke",value:function(e){var t=this,n=b(this,a).canPlayType("application/vnd.apple.mpegurl")||b(this,a).canPlayType("application/x-mpegURL");g(this,p,e);var i,r=!1;if(Object.keys(b(this,c).controls.layers).forEach((function(e){b(t,c).controls.layers[e].indexOf("levels")>-1&&(r=!0)})),Object.keys(b(this,f).media).length)return b(this,f).rules.forEach((function(n){var r=n(e.src);if(r){var s=b(t,f).media[r],o=b(t,c)[b(t,f).optionsKey[r]]||void 0;i=s(b(t,a),e,b(t,d),o)}})),i?(i.create(),i):new A.default(b(this,a),e);if(O.isHlsSource(e)){if(n&&b(this,c).forceNative&&!r)return new A.default(b(this,a),e);var s=b(this,c)&&b(this,c).hls?b(this,c).hls:void 0;return new w.default(b(this,a),e,b(this,d),s)}if(O.isDashSource(e)){var o=b(this,c)&&b(this,c).dash?b(this,c).dash:void 0;return new _.default(b(this,a),e,o)}if(O.isFlvSource(e)){var l=b(this,c)&&b(this,c).flv?b(this,c).flv:{debug:!1,type:"flv",url:e.src};return new k.default(b(this,a),e,l)}return new A.default(b(this,a),e)}},{key:"src",set:function(e){var t=this;"string"==typeof e?b(this,l).push({src:e,type:O.predictType(e)}):Array.isArray(e)?g(this,l,e):"object"===i(e)&&b(this,l).push(e),b(this,l).some((function(e){return t.canPlayType(e.type)})),b(this,a).src&&b(this,a).setAttribute("data-op-file",b(this,l)[0].src),b(this,a).src=b(this,l)[0].src,b(this,o).src=b(this,l)[0],g(this,p,b(this,l)[0])},get:function(){return b(this,l)}},{key:"current",get:function(){return b(this,p)}},{key:"mediaFiles",set:function(e){g(this,l,e)},get:function(){return b(this,l)}},{key:"volume",set:function(e){b(this,o)&&(b(this,o).volume=e)},get:function(){return b(this,o)?b(this,o).volume:b(this,a).volume}},{key:"muted",set:function(e){b(this,o)&&(b(this,o).muted=e)},get:function(){return b(this,o)?b(this,o).muted:b(this,a).muted}},{key:"playbackRate",set:function(e){b(this,o)&&(b(this,o).playbackRate=e)},get:function(){return b(this,o)?b(this,o).playbackRate:b(this,a).playbackRate}},{key:"defaultPlaybackRate",set:function(e){b(this,o)&&(b(this,o).defaultPlaybackRate=e)},get:function(){return b(this,o)?b(this,o).defaultPlaybackRate:b(this,a).defaultPlaybackRate}},{key:"currentTime",set:function(e){b(this,o)&&(b(this,o).currentTime=e)},get:function(){return b(this,o)?b(this,o).currentTime:b(this,a).currentTime}},{key:"duration",get:function(){var e=b(this,o)?b(this,o).duration:b(this,a).duration;return e===1/0&&b(this,a).seekable&&b(this,a).seekable.length?b(this,a).seekable.end(0):e}},{key:"paused",get:function(){return b(this,o)?b(this,o).paused:b(this,a).paused}},{key:"ended",get:function(){return b(this,o)?b(this,o).ended:b(this,a).ended}},{key:"loaded",set:function(e){g(this,h,e)},get:function(){return b(this,h)}},{key:"level",set:function(e){b(this,o)&&(b(this,o).level=e)},get:function(){return b(this,o)?b(this,o).level:-1}},{key:"levels",get:function(){return b(this,o)?b(this,o).levels:[]}},{key:"instance",get:function(){return b(this,o)?b(this,o).instance:null}}])&&s(t.prototype,n),v&&s(t,v),e}();a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,t.default=T},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c,d,h,f=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},p=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},v=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var m=n(1),y=n(6),g=n(2),b=n(14),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(E,e);var t,n,u,v=a(E);function E(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),i=v.call(this,e,t),c.set(l(i),void 0),d.set(l(i),{}),h.set(l(i),{}),f(l(i),h,n),i.promise="undefined"==typeof dashjs?g.loadScript("https://cdn.dashjs.org/latest/dash.all.min.js"):new Promise((function(e){e({})})),i.promise.then((function(){f(l(i),c,dashjs.MediaPlayer().create()),i.instance=p(l(i),c)})),o(i,l(i))}return t=E,(n=[{key:"canPlayType",value:function(e){return m.HAS_MSE&&"application/dash+xml"===e}},{key:"load",value:function(){var e=this;this._preparePlayer(),p(this,c).attachSource(this.media.src);var t=y.addEvent("loadedmetadata");this.element.dispatchEvent(t),p(this,d)||(f(this,d,dashjs.MediaPlayer.events),Object.keys(p(this,d)).forEach((function(t){p(e,c).on(p(e,d)[t],e._assign.bind(e))})))}},{key:"destroy",value:function(){this._revoke()}},{key:"_assign",value:function(e){if("error"===e.type){var t={detail:{message:e,type:"M(PEG)-DASH"}},n=y.addEvent("playererror",t);this.element.dispatchEvent(n)}else{var i=y.addEvent(e.type,e);this.element.dispatchEvent(i)}}},{key:"_revoke",value:function(){var e=this;p(this,d)&&(Object.keys(p(this,d)).forEach((function(t){p(e,c).off(p(e,d)[t],e._assign.bind(e))})),f(this,d,[])),p(this,c).reset()}},{key:"_preparePlayer",value:function(){void 0===p(this,c).getDebug().setLogToBrowserConsole?p(this,c).updateSettings({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE},streaming:{fastSwitchEnabled:!0,scheduleWhilePaused:!1}}):(p(this,c).getDebug().setLogToBrowserConsole(!1),p(this,c).setScheduleWhilePaused(!1),p(this,c).setFastSwitchEnabled(!0)),p(this,c).initialize(),p(this,c).attachView(this.element),p(this,c).setAutoPlay(!1),p(this,h)&&"object"===i(p(this,h).drm)&&Object.keys(p(this,h).drm).length&&(p(this,c).setProtectionData(p(this,h).drm),p(this,h).robustnessLevel&&p(this,h).robustnessLevel&&p(this,c).getProtectionController().setRobustnessLevel(p(this,h).robustnessLevel))}},{key:"src",set:function(e){var t=this;b.isDashSource(e)&&(this._revoke(),f(this,c,dashjs.MediaPlayer().create()),this._preparePlayer(),p(this,c).attachSource(e.src),f(this,d,dashjs.MediaPlayer.events),Object.keys(p(this,d)).forEach((function(e){p(t,c).on(p(t,d)[e],t._assign.bind(t))})))}},{key:"levels",get:function(){var e=[];if(p(this,c)){var t=p(this,c).getBitrateInfoListFor("video");t.length&&t.forEach((function(n){if(t[n]){var i=t[n],r={height:i.height,id:n,label:i.name||null};e.push(r)}}))}return e}},{key:"level",set:function(e){0===e?p(this,c).setAutoSwitchQuality(!0):(p(this,c).setAutoSwitchQuality(!1),p(this,c).setQualityFor("video",e))},get:function(){return p(this,c)?p(this,c).getQualityFor("video"):-1}}])&&r(t.prototype,n),u&&r(t,u),E}(v(n(31)).default);c=new WeakMap,d=new WeakMap,h=new WeakMap,t.default=E},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c,d,h,f=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},p=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},v=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var y=n(1),g=n(6),b=n(2),E=n(14),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(m,e);var t,n,i,u=a(m);function m(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),i=u.call(this,e,t),c.set(l(i),void 0),d.set(l(i),{}),h.set(l(i),void 0),f(l(i),h,n),i.element=e,i.media=t,i.promise="undefined"==typeof flvjs?b.loadScript("https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js"):new Promise((function(e){e({})})),i.promise.then(i._create.bind(l(i))),o(i,l(i))}return t=m,(n=[{key:"canPlayType",value:function(e){return y.HAS_MSE&&("video/x-flv"===e||"video/flv"===e)}},{key:"load",value:function(){var e=this;p(this,c).unload(),p(this,c).detachMediaElement(),p(this,c).attachMediaElement(this.element),p(this,c).load();var t=g.addEvent("loadedmetadata");this.element.dispatchEvent(t),p(this,d)||(f(this,d,flvjs.Events),Object.keys(p(this,d)).forEach((function(t){p(e,c).on(p(e,d)[t],(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e._assign(p(e,d)[t],i)}))})))}},{key:"destroy",value:function(){this._revoke()}},{key:"_create",value:function(){var e=this,t=p(this,h),n=t.configs,i=v(t,["configs"]);flvjs.LoggingControl.enableDebug=!(!i||!i.debug)&&i.debug,flvjs.LoggingControl.enableVerbose=!(!i||!i.debug)&&i.debug;var r=Object.assign(Object.assign({},i),{type:"flv",url:this.media.src});f(this,c,flvjs.createPlayer(r,n)),this.instance=p(this,c),p(this,d)||(f(this,d,flvjs.Events),Object.keys(p(this,d)).forEach((function(t){p(e,c).on(p(e,d)[t],(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e._assign(p(e,d)[t],i)}))})))}},{key:"_assign",value:function(e,t){if("error"===e){var n={detail:{data:t,message:"".concat(t[0],": ").concat(t[1]," ").concat(t[2].msg),type:"FLV"}},i=g.addEvent("playererror",n);this.element.dispatchEvent(i)}else{var r=g.addEvent(e,t);this.element.dispatchEvent(r)}}},{key:"_revoke",value:function(){p(this,c).destroy(),f(this,c,null)}},{key:"src",set:function(e){E.isFlvSource(e)&&(this._revoke(),this._create())}},{key:"levels",get:function(){var e=this,t=[];return p(this,c)&&p(this,c).levels&&p(this,c).levels.length&&Object.keys(p(this,c).levels).forEach((function(n){var i=p(e,c).levels[n],r={height:i.height,id:n,label:i.name||null};t.push(r)})),t}},{key:"level",set:function(e){p(this,c).currentLevel=e},get:function(){return p(this,c)?p(this,c).currentLevel:-1}}])&&r(t.prototype,n),i&&r(t,i),m}(m(n(31)).default);c=new WeakMap,d=new WeakMap,h=new WeakMap,t.default=_},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,h,f,p,v,m,y=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},b=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},E=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var _=n(1),k=n(6),w=n(2),A=n(14),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(E,e);var t,n,i,c=o(E);function E(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return r(this,E),n=c.call(this,e,t),d.set(u(n),void 0),h.set(u(n),{}),f.set(u(n),0),p.set(u(n),0),v.set(u(n),void 0),m.set(u(n),void 0),y(u(n),v,s),n.element=e,n.media=t,y(u(n),m,i),n.promise="undefined"==typeof Hls?w.loadScript("https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js"):new Promise((function(e){e({})})),n.promise.then(n._create.bind(u(n))),l(n,u(n))}return t=E,(n=[{key:"canPlayType",value:function(e){return _.SUPPORTS_HLS()&&"application/x-mpegURL"===e}},{key:"load",value:function(){var e=this;g(this,d).detachMedia(),g(this,d).loadSource(this.media.src),g(this,d).attachMedia(this.element);var t=k.addEvent("loadedmetadata");this.element.dispatchEvent(t),g(this,h)||(y(this,h,Hls.Events),Object.keys(g(this,h)).forEach((function(t){g(e,d).on(g(e,h)[t],(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e._assign(g(e,h)[t],i)}))})))}},{key:"destroy",value:function(){this._revoke()}},{key:"_create",value:function(){var e=this,t=g(this,v);t||(t={});var n=!("auto"!==this.element.preload&&!g(this,m));t.autoStartLoad=n,y(this,d,new Hls(t)),this.instance=g(this,d),y(this,h,Hls.Events),Object.keys(g(this,h)).forEach((function(t){g(e,d).on(g(e,h)[t],(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e._assign(g(e,h)[t],i)}))})),n||(this.element.addEventListener("play",(function(){g(e,d)&&g(e,d).startLoad()}),_.EVENT_OPTIONS),this.element.addEventListener("pause",(function(){g(e,d)&&g(e,d).stopLoad()}),_.EVENT_OPTIONS))}},{key:"_assign",value:function(e,t){if("hlsError"===e){var n={detail:{data:t,message:t[1].details,type:"HLS"}},i=k.addEvent("playererror",n);this.element.dispatchEvent(i);var r=t=t[1],s=r.type,a=r.fatal,o=b(t,["type","fatal"]);if(a)switch(s){case"mediaError":var l=(new Date).getTime();if(!g(this,f)||l-g(this,f)>3e3)y(this,f,(new Date).getTime()),g(this,d).recoverMediaError();else if(!g(this,p)||l-g(this,p)>3e3)y(this,p,(new Date).getTime()),console.warn("Attempting to swap Audio Codec and recover from media error"),g(this,d).swapAudioCodec(),g(this,d).recoverMediaError();else{console.error("Cannot recover, last media error recovery failed");var u=k.addEvent(s,o);this.element.dispatchEvent(u)}break;case"networkError":console.error("Network error");var c=k.addEvent(s,o);this.element.dispatchEvent(c);break;default:g(this,d).destroy();var h=k.addEvent(s,o);this.element.dispatchEvent(h)}else{var v=k.addEvent(s,o);this.element.dispatchEvent(v)}}else{if("hlsLevelLoaded"===e&&!0===t[1].details.live){this.element.setAttribute("op-live__enabled","true");var m=k.addEvent("timeupdate");this.element.dispatchEvent(m)}else if("hlsLevelUpdated"===e&&!0===t[1].details.live&&t[1].details.totalduration>_.DVR_THRESHOLD){this.element.setAttribute("op-dvr__enabled","true");var E=k.addEvent("timeupdate");this.element.dispatchEvent(E)}else if("hlsFragParsingMetadata"===e){var w=k.addEvent("metadataready",t[1]);this.element.dispatchEvent(w)}var A=k.addEvent(e,t[1]);this.element.dispatchEvent(A)}}},{key:"_revoke",value:function(){var e=this;g(this,d).stopLoad(),g(this,h)&&Object.keys(g(this,h)).forEach((function(t){g(e,d).off(g(e,h)[t],(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e._assign(g(e,h)[t],i)}))})),this.element.removeEventListener("play",(function(){g(e,d)&&g(e,d).startLoad()})),this.element.removeEventListener("pause",(function(){g(e,d)&&g(e,d).stopLoad()})),g(this,d).destroy(),y(this,d,null)}},{key:"src",set:function(e){var t=this;A.isHlsSource(e)&&(this._revoke(),y(this,d,new Hls(g(this,v))),g(this,d).loadSource(e.src),g(this,d).attachMedia(this.element),y(this,h,Hls.Events),Object.keys(g(this,h)).forEach((function(e){g(t,d).on(g(t,h)[e],(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t._assign(g(t,h)[e],i)}))})))}},{key:"levels",get:function(){var e=this,t=[];return g(this,d)&&g(this,d).levels&&g(this,d).levels.length&&Object.keys(g(this,d).levels).forEach((function(n){var i=g(e,d).levels[n],r={height:i.height,id:n,label:i.name||null};t.push(r)})),t}},{key:"level",set:function(e){g(this,d).currentLevel=e},get:function(){return g(this,d)?g(this,d).currentLevel:-1}}])&&s(t.prototype,n),i&&s(t,i),E}(E(n(31)).default);d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,t.default=O},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c,d,h,f=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},p=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},v=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var m=n(1),y=n(6),g=n(2),b=n(14),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(v,e);var t,n,i,u=a(v);function v(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),n=u.call(this,e,t),c.set(l(n),null),d.set(l(n),[]),h.set(l(n),!1);var i,r=0,s=!1;if(e.addEventListener("playing",(function(){i&&(clearInterval(i),r=0,s=!1)})),e.addEventListener("stalled",(function(){s||(s=!0,i=setInterval((function(){if(r>=30){clearInterval(i);var t="Media download failed part-way due to a network error",n={detail:{data:{message:t,error:2},message:t,type:"HTML5"}},a=y.addEvent("playererror",n);e.dispatchEvent(a),r=0,s=!1}else r++}),1e3))})),e.addEventListener("error",(function(t){var n;switch(t.target.error.code){case t.target.error.MEDIA_ERR_ABORTED:n="Media playback aborted";break;case t.target.error.MEDIA_ERR_NETWORK:n="Media download failed part-way due to a network error";break;case t.target.error.MEDIA_ERR_DECODE:n="Media playback aborted due to a corruption problem or because the media used features your browser did not support.";break;case t.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:n="Media could not be loaded, either because the server or network failed or because the format is not supported.";break;default:n="Unknown error occurred."}var i={detail:{data:Object.assign(Object.assign({},t),{message:t.message||n,error:t.target.error.code}),message:t.message||n,type:"HTML5"}},r=y.addEvent("playererror",i);e.dispatchEvent(r)}),m.EVENT_OPTIONS),!g.isAudio(e)&&!g.isVideo(e))throw new TypeError("Native method only supports video/audio tags");return f(l(n),h,b.isHlsSource(t)),n.element.addEventListener("loadeddata",n._isDvrEnabled.bind(l(n)),m.EVENT_OPTIONS),n.element.textTracks.addEventListener("addtrack",n._readMediadataInfo.bind(l(n)),m.EVENT_OPTIONS),o(n,l(n))}return t=v,(n=[{key:"canPlayType",value:function(e){return!!this.element.canPlayType(e).replace("no","")}},{key:"load",value:function(){this.element.load()}},{key:"destroy",value:function(){return this.element.removeEventListener("loadeddata",this._isDvrEnabled.bind(this)),this.element.textTracks.removeEventListener("addtrack",this._readMediadataInfo.bind(this)),this}},{key:"_isDvrEnabled",value:function(){var e=this.element.seekable.end(this.element.seekable.length-1)-this.element.seekable.start(0);if(p(this,h)&&e>m.DVR_THRESHOLD&&!this.element.getAttribute("op-dvr__enabled")){this.element.setAttribute("op-dvr__enabled","true");var t=y.addEvent("timeupdate");this.element.dispatchEvent(t)}}},{key:"_readMediadataInfo",value:function(e){var t=this,n=e;"metadata"===n.track.kind&&(n.track.mode="hidden",n.track.addEventListener("cuechange",(function(e){var n=e.target,i=n.activeCues?n.activeCues[0]:null;if(i){var r=y.addEvent("metadataready",{detail:i});t.element.dispatchEvent(r)}}),m.EVENT_OPTIONS))}},{key:"levels",get:function(){if(!p(this,d).length)for(var e=this.element.querySelectorAll("source[title]"),t=0,n=e.length;t<n;++t){var i={height:0,id:"".concat(t),label:e[t].getAttribute("title")};p(this,d).push(i)}return p(this,d)}},{key:"level",set:function(e){var t=p(this,d).findIndex((function(t){return parseInt(t.id,10)===e}));if(t>-1){f(this,c,this.levels[t]);for(var n=this.element.querySelectorAll("source[title]"),i=0,r=n.length;i<r;++i){var s=n[i].getAttribute("src");s&&parseInt(p(this,c).id,10)===i&&(this.element.src=s)}}},get:function(){return p(this,c)?p(this,c).id:"-1"}},{key:"src",set:function(e){this.element.src=e.src}}])&&r(t.prototype,n),i&&r(t,i),v}(v(n(31)).default);c=new WeakMap,d=new WeakMap,h=new WeakMap,t.default=E},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,s,a,o,l,u,c,d,h,f,p,v,m,y,g,b,E,_,k,w,A,O,T,S,L,M,P,N,I,C,x=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},j=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});var D=n(1),R=n(6),W=n(2),V=function(){function e(t,n,i,D,R){var V=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,!1),s.set(this,!1),a.set(this,!1),o.set(this,!1),l.set(this,0),u.set(this,void 0),c.set(this,!1),d.set(this,0),h.set(this,0),f.set(this,null),p.set(this,void 0),v.set(this,void 0),m.set(this,void 0),y.set(this,[]),g.set(this,void 0),b.set(this,void 0),E.set(this,void 0),_.set(this,void 0),k.set(this,void 0),w.set(this,void 0),A.set(this,!1),O.set(this,!1),T.set(this,!1),S.set(this,void 0),L.set(this,0),M.set(this,void 0),P.set(this,void 0),N.set(this,0),I.set(this,[]),C.set(this,!1);x(this,p,t),x(this,g,n),x(this,v,t.getMedia()),x(this,m,t.getElement()),x(this,A,i||!1),x(this,O,D||!1),x(this,S,Object.assign(Object.assign({},{autoPlayAdBreaks:!0,debug:!1,enablePreloading:!1,language:"en",loop:!1,numRedirects:4,sdkPath:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",src:[]}),R)),x(this,T,!1),x(this,M,j(this,m).volume),x(this,u,j(this,M));var F=j(this,S).debug?j(this,S).sdkPath.replace(/(\.js$)/,"_debug.js"):j(this,S).sdkPath;return x(this,b,"undefined"==typeof google||void 0===google.ima?W.loadScript(F):new Promise((function(e){e({})}))),j(this,b).then((function(){V.load()})),this}var t,n,V;return t=e,(n=[{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(j(this,S).autoPlayAdBreaks||t){var n=j(this,p).getContainer().querySelector(".op-ads");n&&n.parentNode&&n.parentNode.removeChild(n),x(this,o,!0),x(this,_,document.createElement("div")),j(this,_).className="op-ads",j(this,_).tabIndex=-1,j(this,m).parentElement&&j(this,m).parentElement.insertBefore(j(this,_),j(this,m).nextSibling),x(this,I,j(this,v).src),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setAutoPlayAdBreaks(j(this,S).autoPlayAdBreaks),google.ima.settings.setNumRedirects(j(this,S).numRedirects),google.ima.settings.setLocale(j(this,S).language),x(this,k,new google.ima.AdDisplayContainer(j(this,_),j(this,m))),x(this,E,new google.ima.AdsLoader(j(this,k))),j(this,E).addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded.bind(this),D.EVENT_OPTIONS),j(this,E).addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error.bind(this),D.EVENT_OPTIONS),"undefined"!=typeof window&&window.addEventListener("resize",(function(){e.resizeAds()}),D.EVENT_OPTIONS),j(this,m).addEventListener("loadedmetadata",(function(){e.resizeAds()}),D.EVENT_OPTIONS),!0!==j(this,A)&&!0!==j(this,O)&&!0!==t&&!0!==j(this,S).enablePreloading||(j(this,s)||(x(this,s,!0),j(this,k).initialize()),this._requestAds())}}},{key:"play",value:function(){var e=this,t=function(){if(j(e,s)){if(j(e,f)){j(e,l)||!1!==j(e,a)?j(e,f).resume():j(e,f).start(),x(e,a,!0);var t=R.addEvent("play");j(e,m).dispatchEvent(t)}}else e._initNotDoneAds()};return new Promise((function(e){e({})})).then(t)}},{key:"pause",value:function(){if(j(this,f)){x(this,a,!1),j(this,f).pause();var e=R.addEvent("pause");j(this,m).dispatchEvent(e)}}},{key:"destroy",value:function(){var e=this;j(this,y)&&j(this,y).forEach((function(t){j(e,f).removeEventListener(t,e._assign.bind(e))})),x(this,y,[]);var t=j(this,p).getControls(),n=t?t.events.mouse:{};Object.keys(n).forEach((function(t){j(e,_)&&j(e,_).removeEventListener(t,n[t])})),j(this,E)&&(j(this,E).removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error.bind(this)),j(this,E).removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded.bind(this)));var i=!Array.isArray(j(this,g))||j(this,L)>j(this,g).length;j(this,f)&&i&&j(this,f).destroy(),(D.IS_IOS||D.IS_ANDROID)&&j(this,m).removeEventListener("loadedmetadata",this._contentLoadedAction.bind(this)),j(this,m).removeEventListener("loadedmetadata",(function(){e.resizeAds.bind(e)})),j(this,m).removeEventListener("ended",this._contentEndedListener.bind(this)),"undefined"!=typeof window&&window.removeEventListener("resize",(function(){e.resizeAds.bind(e)})),W.removeElement(j(this,_))}},{key:"resizeAds",value:function(e,t){var n=this;if(j(this,f)){var i,r=j(this,m),s="true"===r.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL;i&&"undefined"!=typeof window&&window.cancelAnimationFrame(i),"undefined"!=typeof window&&(i=window.requestAnimationFrame((function(){j(n,f).resize(e||r.offsetWidth,t||r.offsetHeight,s)})))}}},{key:"getAdsManager",value:function(){return j(this,f)}},{key:"started",value:function(){return j(this,o)}},{key:"_assign",value:function(e){var t=this,n=e.getAd();switch(e.type){case google.ima.AdEvent.Type.LOADED:if(n.isLinear()){if(D.IS_IPHONE&&W.isVideo(j(this,m))&&(j(this,m).controls=!1),x(this,d,n.getDuration()),x(this,h,n.getDuration()),!j(this,C)&&!D.IS_IOS&&!D.IS_ANDROID){var i=R.addEvent("waiting");j(this,m).dispatchEvent(i);var s=R.addEvent("loadedmetadata");j(this,m).dispatchEvent(s),this.resizeAds()}}else this._onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:if(n.isLinear()){j(this,m).parentElement&&!j(this,m).parentElement.classList.contains("op-ads--active")&&j(this,m).parentElement.classList.add("op-ads--active"),j(this,v).paused||j(this,v).pause(),x(this,a,!0);var u,p=R.addEvent("play");if(j(this,m).dispatchEvent(p),u||(this.resizeAds(),u=!0),j(this,v).ended){x(this,r,!1);var y=R.addEvent("adsmediaended");j(this,m).dispatchEvent(y)}"undefined"!=typeof window&&x(this,l,window.setInterval((function(){if(!0===j(t,a)){x(t,h,Math.round(j(t,f).getRemainingTime()));var e=R.addEvent("timeupdate");j(t,m).dispatchEvent(e)}}),350))}break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:if(n.isLinear()){if(e.type===google.ima.AdEvent.Type.SKIPPED){var g=R.addEvent("adsskipped");j(this,m).dispatchEvent(g)}j(this,m).parentElement&&j(this,m).parentElement.classList.remove("op-ads--active"),x(this,a,!1),clearInterval(j(this,l))}break;case google.ima.AdEvent.Type.VOLUME_CHANGED:this._setMediaVolume(this.volume);case google.ima.AdEvent.Type.VOLUME_MUTED:if(n.isLinear()){var b=R.addEvent("volumechange");j(this,m).dispatchEvent(b)}break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:if(n.isLinear()&&(x(this,a,!1),x(this,r,!0),x(this,l,0),x(this,c,!1),x(this,o,!1),x(this,d,0),x(this,h,0),j(this,m).parentElement&&j(this,m).parentElement.classList.remove("op-ads--active"),this.destroy(),j(this,m).currentTime>=j(this,m).duration)){var E=R.addEvent("ended");j(this,m).dispatchEvent(E)}}if(e.type===google.ima.AdEvent.Type.LOG){var _=e.getAdData();if(_.adError){var k=_.adError.getMessage();console.warn("Ad warning: Non-fatal error occurred: ".concat(k));var w={detail:{data:_.adError,message:k,type:"Ads"}},A=R.addEvent("playererror",w);j(this,m).dispatchEvent(A)}}else{var O=R.addEvent("ads".concat(e.type));j(this,m).dispatchEvent(O)}}},{key:"_error",value:function(e){var t=e.getError(),n={detail:{data:t,message:t.toString(),type:"Ads"}},i=R.addEvent("playererror",n);j(this,m).dispatchEvent(i),Array.isArray(j(this,g))&&j(this,g).length>1&&j(this,L)<j(this,g).length-1?(x(this,L,+j(this,L)+1),x(this,T,!0),x(this,o,!0),x(this,s,!1),this.destroy(),this.load(!0),console.warn("Ad warning: ".concat(t.toString()))):([100,101,102,300,301,302,303,400,401,402,403,405,406,407,408,409,410,500,501,502,503,900,901,1005].indexOf(t.getErrorCode())>-1?(j(this,f)&&j(this,f).destroy(),console.error("Ad error: ".concat(t.toString()))):console.warn("Ad warning: ".concat(t.toString())),!0!==j(this,A)&&!0!==j(this,O)&&!0!==j(this,o)||(x(this,a,!1),this._resumeMedia()))}},{key:"_loaded",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!1,t.enablePreloading=j(this,S).enablePreloading,x(this,f,e.getAdsManager(j(this,m),t)),this._start(j(this,f))}},{key:"_start",value:function(e){var t=this;e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._onContentPauseRequested.bind(this),D.EVENT_OPTIONS),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._onContentResumeRequested.bind(this),D.EVENT_OPTIONS),x(this,y,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.VIDEO_CLICKED,google.ima.AdEvent.Type.VIDEO_ICON_CLICKED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.LOG]),j(this,S).autoPlayAdBreaks||j(this,y).push(google.ima.AdEvent.Type.AD_BREAK_READY);var n=j(this,p).getControls(),i=n?n.events.mouse:{};if(Object.keys(i).forEach((function(e){j(t,_)&&j(t,_).addEventListener(e,i[e],D.EVENT_OPTIONS)})),j(this,y).forEach((function(n){e.addEventListener(n,t._assign.bind(t),D.EVENT_OPTIONS)})),!0===j(this,A)||!0===j(this,T)){if(x(this,T,!1),!j(this,s))return void this._initNotDoneAds();e.init(j(this,m).offsetWidth,j(this,m).offsetHeight,j(this,m).parentElement&&"true"===j(this,m).parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.start();var r=R.addEvent("play");j(this,m).dispatchEvent(r);var a=R.addEvent("playing");j(this,m).dispatchEvent(a)}else!0===j(this,S).enablePreloading&&e.init(j(this,m).offsetWidth,j(this,m).offsetHeight,j(this,m).parentElement&&"true"===j(this,m).parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}},{key:"_initNotDoneAds",value:function(){x(this,s,!0),j(this,k).initialize(),D.IS_IOS||D.IS_ANDROID?(x(this,P,this._contentLoadedAction),j(this,m).addEventListener("loadedmetadata",this._contentLoadedAction.bind(this),D.EVENT_OPTIONS),j(this,m).load()):this._contentLoadedAction()}},{key:"_contentEndedListener",value:function(){x(this,r,!0),x(this,a,!1),x(this,o,!1),j(this,E).contentComplete()}},{key:"_onContentPauseRequested",value:function(){j(this,m).removeEventListener("ended",this._contentEndedListener.bind(this)),x(this,N,j(this,v).currentTime),j(this,o)?j(this,v).pause():x(this,o,!0);var e=R.addEvent("play");j(this,m).dispatchEvent(e)}},{key:"_onContentResumeRequested",value:function(){if(j(this,S).loop)Array.isArray(j(this,g))&&(j(this,L)===j(this,g).length-1?x(this,L,0):x(this,L,+j(this,L)+1)),this.destroy(),j(this,E).contentComplete(),x(this,T,!0),x(this,o,!0),x(this,s,!1),this.load(!0);else if(j(this,m).addEventListener("ended",this._contentEndedListener.bind(this),D.EVENT_OPTIONS),j(this,m).addEventListener("loadedmetadata",this._loadedMetadataHandler.bind(this),D.EVENT_OPTIONS),D.IS_IOS||D.IS_ANDROID)j(this,v).src=j(this,I),j(this,v).load(),this._prepareMedia(),j(this,m).parentElement&&j(this,m).parentElement.classList.add("op-ads--active");else{var e=R.addEvent("loadedmetadata");j(this,m).dispatchEvent(e)}}},{key:"_loadedMetadataHandler",value:function(){Array.isArray(j(this,g))?(x(this,L,+j(this,L)+1),j(this,L)<=j(this,g).length-1?(j(this,f)&&j(this,f).destroy(),j(this,E).contentComplete(),x(this,T,!0),x(this,o,!0),x(this,s,!1),this._requestAds()):(j(this,S).autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia())):j(this,m).seekable.length?j(this,m).seekable.end(0)>j(this,N)&&(j(this,S).autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia()):setTimeout(this._loadedMetadataHandler.bind(this),100)}},{key:"_resumeMedia",value:function(){var e=this;x(this,l,0),x(this,c,!1),x(this,o,!1),x(this,d,0),x(this,h,0),j(this,m).parentElement&&j(this,m).parentElement.classList.remove("op-ads--active");var t,n,i=function(t){var n=R.addEvent(t);j(e,m).dispatchEvent(n)};(t=50,n=j(this,v).ended,new Promise((function(e,i){if(n)return i();setTimeout(e,t)}))).then((function(){return j(e,v).play().then((function(){return i("play")}))})).catch((function(){return i("ended")}))}},{key:"_requestAds",value:function(){x(this,w,new google.ima.AdsRequest);var e=Array.isArray(j(this,g))?j(this,g)[j(this,L)]:j(this,g);W.isXml(e)?j(this,w).adsResponse=e:j(this,w).adTagUrl=e;var t=j(this,m).parentElement?j(this,m).parentElement.offsetWidth:0,n=j(this,m).parentElement?j(this,m).parentElement.offsetHeight:0;j(this,w).linearAdSlotWidth=t,j(this,w).linearAdSlotHeight=n,j(this,w).nonLinearAdSlotWidth=t,j(this,w).nonLinearAdSlotHeight=n/3,j(this,w).setAdWillAutoPlay(j(this,A)),j(this,w).setAdWillPlayMuted(j(this,O)),j(this,E).requestAds(j(this,w))}},{key:"_contentLoadedAction",value:function(){j(this,P)&&(j(this,m).removeEventListener("loadedmetadata",j(this,P).bind(this)),x(this,P,null)),this._requestAds()}},{key:"_resetAdsAfterManualBreak",value:function(){j(this,f)&&j(this,f).destroy(),j(this,E).contentComplete(),x(this,s,!1),x(this,T,!0)}},{key:"_prepareMedia",value:function(){j(this,v).currentTime=j(this,N),j(this,m).removeEventListener("loadedmetadata",this._loadedMetadataHandler.bind(this)),this._resumeMedia()}},{key:"_setMediaVolume",value:function(e){j(this,v).volume=e,j(this,v).muted=0===e}},{key:"playRequested",set:function(e){x(this,T,e)}},{key:"volume",set:function(e){j(this,f)&&(x(this,u,e),j(this,f).setVolume(e),this._setMediaVolume(e),x(this,c,0===e))},get:function(){return j(this,f)?j(this,f).getVolume():j(this,M)}},{key:"muted",set:function(e){j(this,f)&&(e?(j(this,f).setVolume(0),x(this,c,!0),this._setMediaVolume(0)):(j(this,f).setVolume(j(this,u)),x(this,c,!1),this._setMediaVolume(j(this,u))))},get:function(){return j(this,c)}},{key:"currentTime",set:function(e){x(this,h,e)},get:function(){return j(this,h)}},{key:"duration",get:function(){return j(this,d)}},{key:"paused",get:function(){return!j(this,a)}},{key:"ended",get:function(){return j(this,r)}}])&&i(t.prototype,n),V&&i(t,V),e}();r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,E=new WeakMap,_=new WeakMap,k=new WeakMap,w=new WeakMap,A=new WeakMap,O=new WeakMap,T=new WeakMap,S=new WeakMap,L=new WeakMap,M=new WeakMap,P=new WeakMap,N=new WeakMap,I=new WeakMap,C=new WeakMap,t.default=V}]).default}));