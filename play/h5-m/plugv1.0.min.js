"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,r=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){r=!0,l=e},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw l}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&_typeof(define.amd)?define(t):e.MuiPlayerDesktopPlugin=t()}(window,function(){return function(m){function r(e){var t=_toConsumableArray(i.defaults);"statics"!=e&&g.initSubtitleOption()&&t.push(g.initSubtitleOption()),e=f.$method.getLangObject(),t[0].functions=e.loopPlay,t[1].functions=e.playbackSpeed,t[1].childConfig[3].functions=e.normal,t[2]&&(t[2].functions=e.subtitles),t[2]&&(t[2].childConfig[0].functions=e.open),t[2]&&(t[2].childConfig[1].functions=e.selectLangage);var o=_toConsumableArray(m.customSetting||[]);if(o instanceof Array){for(var n=0;n<o.length;n++){var l=t.map(function(e){return e.name});-1!=l.indexOf(o[n].name)&&t.splice(l.indexOf(o[n].name),1)}(function e(){for(var t=0;t<o.length;t++)!1===o[t].show&&(o.splice(t,1),e())})()}1==f.option.loop&&(t[0].selected=!0),!0===f.option.live&&t.splice(0,t.length),(e=[].concat(_toConsumableArray(t),_toConsumableArray(o))).sort(function(e,t){e=e.zIndex||0,t=t.zIndex||0;return t<e?-1:e<t?1:0}),function e(t,o){for(var n=0;n<t.length;n++)t[n].panelIndex=null==o?n.toString():o.toString()+"-"+n,t[n].childConfig instanceof Array&&0<t[n].childConfig.length&&e(t[n].childConfig,t[n].panelIndex)}(c=e)}var e=this,m=m||{},f={},i={defaults:[{functions:"循环播放",name:"loopPlay",show:!0,model:"switch",selected:!1,onToggle:function(e,t){t(),e.event.currentTarget.querySelector(".toogle-switch").classList.contains("open")?f.$el.videoObject.loop=!0:f.$el.videoObject.loop=!1}},{functions:"播放速度",name:"playbackRate",show:!0,model:"select",childConfig:[{functions:"0.25"},{functions:"0.5"},{functions:"0.75"},{functions:"正常",selected:!0},{functions:"1.25"},{functions:"1.5"},{functions:"1.75"},{functions:"2"}],onToggle:function(e,t,o){t(),o();e=e.functions;"正常"!=e?(f.$el.videoObject.playbackRate=Number(e),f.$method.showToast("已切换到"+e+"倍速度播放")):(f.$el.videoObject.playbackRate=1,f.$method.showToast("已切换到默认倍速度播放"))}}],subtitle:{functions:"字幕",name:"subtitle",childConfig:[{functions:"打开",name:"loopPlay",model:"switch",selected:!0},{functions:"选择语言",childConfig:[],onToggle:function(o,n){var l=o.getPanelOption(o.panelIndex,"parent").panelIndex,i=f.$el.videoObject.textTracks;i&&i instanceof TextTrackList?function(){for(var e=0;e<i.length;e++){var t=i[e];o.functions==t.label?(t.mode="showing",o.getPanelOption(l,"parent").childConfig[0].selected=!0,n()):"showing"==t.mode&&(t.mode="hidden")}}():f.$method.showToast("the textTracks api is not supported by the browser.")}}],onToggle:function(r,a){var s=r.event.currentTarget.querySelector(".toogle-switch").classList.contains("open"),c=f.$el.videoObject.textTracks;c&&c instanceof TextTrackList?function(){if(s)for(var e=0;e<c.length;e++){var t=c[e];"showing"==t.mode&&(t.mode="hidden")}else for(var o=r.getPanelOption(r.panelIndex,"parent").childConfig[1].childConfig,e=0;e<c.length;e++){var n=c[e],l=_createForOfIteratorHelper(o);try{for(l.s();!(i=l.n()).done;){var i=i.value;if(n.label==i.functions&&1==i.selected){n.mode="showing";break}}}catch(e){l.e(e)}finally{l.f()}}a()}():f.$method.showToast("the textTracks api is not supported by the browser.")}}},d=new function(){return{popupNodeInfo:{triggerButtonRect:{},popupRect:{}}}},c=null,u={ctxmenuWrapper:function(){return f.$el.mPlayer.querySelector("#ctxmenu-wrapper")},hideShortcutPanel:function(){var e=f.$el.mPlayer.querySelector("#mplayer-shortcut");e&&(e.style.display="none")},hideCtxmenuList:function(e){(e=e||{}).stopPropagation&&e.stopPropagation();var t=u.ctxmenuWrapper().querySelector(".ctxmenulist");t.style.opacity=0,f._this._global_.ctxmenuTimer_1=setTimeout(function(){t.style.display="none"},100)},onCtxmenuFocus:function(){f._this._global_.ctxmenuTimer_1&&clearTimeout(f._this._global_.ctxmenuTimer_1),f._this._global_.ctxmenuTimer_2&&clearTimeout(f._this._global_.ctxmenuTimer_2),u.ctxmenuWrapper().style.display="block",u.hideShortcutPanel()},onCtxmenuBlur:function(e){(e=e||{}).stopPropagation&&e.stopPropagation(),u.hideCtxmenuList(),f._this._global_.ctxmenuTimer_2=setTimeout(function(){u.ctxmenuWrapper().style.display="none"},300)},getCtxmenu:function(){var e=[{name:"shortcuts",context:"快捷键",click:function(){var e=f.$el.mPlayer.querySelector("#mplayer-shortcut");e&&(e.style.display="block"),f.$el.mPlayer.focus()}}],o=_toConsumableArray(m.contextmenu||[]);if(o instanceof Array){for(var t=0;t<o.length;t++){var n=e.map(function(e){return e.name}).indexOf(o[t].name);-1!=n&&e.splice(n,1)}(function e(){for(var t=0;t<o.length;t++)!1!==o[t].show&&o[t].name&&o[t].context||(o.splice(t,1),e())})()}var l=[].concat(_toConsumableArray(o),e),i=f.option.lang||navigator.language||navigator.browserLanguage||"zh-cn";if(-1!="en".indexOf(i.toLowerCase())){var r=_createForOfIteratorHelper(l);try{for(r.s();!(a=r.n()).done;){var a=a.value;if("shortcuts"==a.name){a.context="Shortcuts";break}}}catch(e){r.e(e)}finally{r.f()}}return l.sort(function(e,t){e=e.zIndex||0,t=t.zIndex||0;return t<e?-1:e<t?1:0}),l},createCtxmenu:function(e){var t=u.getCtxmenu();if(2==e.button&&0!=t.length){var o=document.createElement("ul");o.setAttribute("class","ctxmenulist"),o.setAttribute("tabindex","0"),o.addEventListener("blur",u.onCtxmenuBlur),u.onCtxmenuFocus();for(var n=t.map(function(e){return e.name}),l=0;l<t.length;l++){var i=document.createElement("li");i.innerText=t[l].context,i.setAttribute("name",t[l].name),i.addEventListener("dblclick",function(e){e.stopPropagation()}),i.addEventListener("mousemove",function(e){e.stopPropagation()}),i.addEventListener("click",function(e){e.stopPropagation();e=n.indexOf(e.currentTarget.getAttribute("name"));t[e].click instanceof Function&&t[e].click(function(){f.$el.mPlayer.focus()})}),o.appendChild(i)}f.$method.removeNode(u.ctxmenuWrapper(),".ctxmenulist"),u.ctxmenuWrapper().appendChild(o),h.setElScale(o,{fontSize:14});var r=f.$el.mPlayer.getBoundingClientRect(),a=o.getBoundingClientRect(),s=e.clientX-r.left+a.width>r.width?r.width-a.width:e.clientX-r.left,r=e.clientY-r.top+a.height>r.height?r.height-a.height:e.clientY-r.top;o.style.top=r+"px",o.style.left=s+"px",o.focus(),setTimeout(function(){o.style.opacity=1},100)}},onContextmenuEvent:function(e){e.preventDefault()}},a={togglePictureIcon:function(){var e='<svg class="on-picture" xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24"fill="#ffffff"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z"/><path fill="none"d="M0 0h24v24H0V0z"/></svg>',t='<svg class="off-picture" xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24"fill="#ffffff"><path d="m19,7l-14,0l0,10l14,0l0,-10zm4,12l0,-14.02c0,-1.1 -0.9,-1.98 -2,-1.98l-18,0c-1.1,0 -2,0.88 -2,1.98l0,14.02c0,1.1 0.9,2 2,2l18,0c1.1,0 2,-0.9 2,-2zm-2,0.02l-18,0l0,-14.05l18,0l0,14.05z"/><path fill="none"d="m0,0l24,0l0,24l-24,0l0,-24z"/></svg>';return document.pictureInPictureElement?t:e},monitorPictureChange:function(){var t;f._this._global_.webpagePlugin.addMonitorPictureEvent||(f._this._global_.webpagePlugin.addMonitorPictureEvent=!0,t=function(){f.$el.mplayerFooter.querySelector("#picture-in-picture").innerHTML=a.togglePictureIcon()},f.$el.videoObject.addEventListener("enterpictureinpicture",function(e){t(),f.$data.isFullScreen&&f.$method.closeFullScreen(),f.$method.setTooltipText(f.$el.mplayerFooter.querySelector("#picture-in-picture"),f.$method.getLangObject().exitPictureInPicture)}),f.$el.videoObject.addEventListener("leavepictureinpicture",function(e){t(),f.$method.setTooltipText(f.$el.mplayerFooter.querySelector("#picture-in-picture"),f.$method.getLangObject().pictureInPicture)}))},onPictureInPicture:function(e){e.currentTarget.querySelector("svg").classList.contains("on-picture")?f.$el.videoObject!=document.pictureInPictureElement&&f.$el.videoObject.requestPictureInPicture():document.exitPictureInPicture(),a.monitorPictureChange()}},s={volumeContainer:null,el:null,$el:function(){return{volumeSize:s.volumeContainer.querySelector(".volume-size"),volumeCapacity:s.volumeContainer.querySelector(".volume-capacity"),volumeDragBall:s.volumeContainer.querySelector(".volume-drag-ball"),progressBar:s.volumeContainer.querySelector(".progress-bar")}},data:null,$data:function(){return{startY:null,moveY:null,_defaultVolumeSize:null,_capacityRect:{},_dragBallRect:{}}},toggleVolumeControl:function(e){var t;e=!0===s.getStorageVolume().muted?0:e,s.data&&(t=s.data._capacityRect.height*(e/100)-s.data._dragBallRect.height,s.el.volumeDragBall.style.bottom=(0<t?t:0)+"px",s.el.progressBar.style.height=e+"%",s.el.volumeSize.innerText=e+"%"),f.$el.mplayerFooter.querySelector("#volume-switch").innerHTML=s.toggleVolumeIcon()},setVolume:function(e,t){t=Number.parseFloat(s.data._defaultVolumeSize||0)+(null==t?100:t);return 100<=t?t=100:t<=0&&(t=0),t=Number.parseInt(t),e instanceof Object&&"number"==typeof e.volume&&(t=e.volume),s.setStorageVolume(t),f.$el.videoObject.volume=t/100,s.toggleVolumeControl(t),t},computeProgress:function(e,t){t(e/s.el.volumeCapacity.getBoundingClientRect().height*100)},keyEventHandle:function(e){var t=f.$method.getKeyCode(e);-1!=new Array(13,38,40).indexOf(t)&&(e.stopPropagation(),e.preventDefault()),13!=t?38!=t?40==t&&n.bottomKeyDown():n.topKeyDown():s.onClickEvent({currentTarget:f.$el.mplayerFooter.querySelector("#volume-switch")},!0)},mouseEventHandle:function(t){switch(t.type){case"mousedown":!function(){s.data.startY=t.clientY;var e=s.el.volumeCapacity.getBoundingClientRect().bottom-t.clientY;s.computeProgress(e,function(e){f.$el.videoObject.muted&&(f.$el.videoObject.muted=!1);e=s.setVolume(!1,e);f._this._global_.webpagePlugin.startDownVolumeSize=e,s.data._defaultVolumeSize=s.el.progressBar.style.height.substr(0,s.el.progressBar.style.height.length-1)||0}),s.el.volumeDragBall.style.boxShadow="0 0 20px 3px "+f.$habit.themeColor,g.focusToggle("OFF"),s.volumeContainer.addEventListener("mousemove",s.mouseEventHandle),s.volumeContainer.addEventListener("mouseup",s.mouseEventHandle)}();break;case"mousemove":!function(){s.data.moveY=t.clientY,s.data.startY||(s.data.startY=t.clientY);var e=s.data.startY-s.data.moveY;s.computeProgress(e,function(e){e=s.setVolume(!1,e);f._this._global_.webpagePlugin.endDownVolumeSize=e})}();break;case"mouseup":s.data._defaultVolumeSize=0,s.el.volumeDragBall.style.boxShadow="none",s.volumeContainer.removeEventListener("mousemove",s.mouseEventHandle),s.volumeContainer.removeEventListener("mouseup",s.mouseEventHandle)}},getStorageVolume:function(){var e={};try{e=JSON.parse(window.localStorage.getItem("mp-player-volume"))||{}}catch(e){}return e},setStorageVolume:function(e,t){var o=s.getStorageVolume(),t={volume:null!=t?o.volume||100:e,muted:null!=t?t:f.$el.videoObject instanceof Element&&f.$el.videoObject.muted,expiration:(new Date).setMonth((new Date).getMonth()+1),creation:(new Date).getTime()};window.localStorage.setItem("mp-player-volume",JSON.stringify(t))},toggleVolumeIcon:function(){var e='<svg class="volume-full"fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',t='<svg fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',o='<svg class="volume-close"fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',n=s.getStorageVolume();return n.expiration<=(new Date).getTime()?e:!0===n.muted||0==n.volume?o:n.volume<50?t:e},createVolumePopup:function(){var e=(new h.popupInstance).createPopupElement();return e.setAttribute("popup-name","volume"),e.innerHTML='<div class="volume-container keyboard-input"id="volume-container"tabindex="0"><div class="volume-size">0%</div><div class="volume-capacity"><div class="volume-drag-ball"></div><div class="progress-bar"></div></div></div>',e.querySelector(".progress-bar").style.backgroundColor=f.$habit.themeColor,s.volumeContainer=e.querySelector("#volume-container"),s.el=new s.$el,s.data=new s.$data,s.volumeContainer.addEventListener("mousedown",s.mouseEventHandle),s.volumeContainer.addEventListener("keydown",s.keyEventHandle),s.volumeContainer.addEventListener("blur",function(){(new h.popupInstance).togglePopupVisible("OFF")}),e},showVolumePopup:function(e){var t;e=e||{},f.$data.isTouchMove||((t=f.$el.mPlayer.querySelector(".mp-popup"))||(t=s.createVolumePopup(),"keydown"==e.type&&setTimeout(function(){t.querySelector("#volume-container").focus()},100),f.$el.mplayerFooter.insertBefore(t,f.$el.mplayerFooter.childNodes[0]),f.$data.isFullScreen&&(h.setElScale(t,["width","height"]),h.setElScale(t.querySelector(".volume-capacity"),["width","height"]),h.setElScale(t.querySelector(".volume-drag-ball"),["width","height"]),h.setElScale(t.querySelector(".volume-container"),["fontSize"])),s.data._capacityRect=s.el.volumeCapacity.getBoundingClientRect(),s.data._dragBallRect=s.el.volumeDragBall.getBoundingClientRect(),e=s.getStorageVolume(),s.setVolume(e),(new h.popupInstance).setVisiblePopup(t,f.$el.mplayerFooter.querySelector("#volume-switch"))))},onClickEvent:function(e,t){var o,n;!1!==e.currentTarget.exist&&(e.currentTarget.querySelector("svg").classList.contains("volume-close")?(s.setStorageVolume(null,!1),o=s.getStorageVolume().volume||100,n=f._this._global_.webpagePlugin.endDownVolumeSize,e=f._this._global_.webpagePlugin.startDownVolumeSize,s.toggleVolumeControl(0==n?e:n||o),f.$el.videoObject.muted=!1):(s.setStorageVolume(null,!0),s.toggleVolumeControl(0),f.$el.videoObject.muted=!0),!0===t&&(f.$method.createTimerCloseControl(),h.showHandleIcon("volume-icon")))}},g={currentFocusPanelId:"",isFocusActive:!1,backPanel:function(e){var t=g.getPanelOption(e,"parent");g.showPanel(t,"previous",e)},selected:function(e){for(var t=f.$el.mPlayer.querySelector(".mp-popup"),o=t.querySelectorAll(".mp-panel-selected"),n=0;n<o.length;n++)o[n].classList.remove("mp-panel-selected");t.querySelector('[panel-index="'+e+'"]').classList.add("mp-panel-selected");for(var l=g.getPanelOption(e,"parent").childConfig||[],n=0;n<l.length;n++)l[n].panelIndex==e?l[n].selected=!0:l[n].selected&&(l[n].selected=!1)},switched:function(e){var t=g.getPanelOption(e);t.selected=!t.selected;e=f.$el.mPlayer.querySelector('.mp-popup [panel-index="'+e+'"] .toogle-switch');e.classList.remove(t.selected?"close":"open"),e.classList.add(t.selected?"open":"close")},triggerSelected:function(t,e){var o,n;e.stopPropagation(),t&&(t.childConfig instanceof Array&&0<t.childConfig.length?g.showPanel(t):"switch"!=t.model&&!0===t.selected||(n=null,(n=(o=g.getPanelOption(t.panelIndex,"parent"))instanceof Array?t:o).onToggle instanceof Function&&n.onToggle({functions:t.functions,panelIndex:t.panelIndex,getPanelOption:g.getPanelOption,event:e},function(e){"switch"==t.model?g.switched(t.panelIndex):g.selected(t.panelIndex),e instanceof Function&&e()},function(e){o instanceof Object&&o.childConfig instanceof Array&&0<o.childConfig.length&&setTimeout(function(){g.backPanel(o.panelIndex)},"number"==typeof e?e:100)})))},setScalePopup:function(e){if(f.$data.isFullScreen&&e instanceof Element){h.setElScale(e,["width","height",e.classList.contains("mp-popup")?"fontSize":""]),h.setElScale(e.querySelector(".toogle-switch"),["width","height"]),h.setElScale(e.querySelector(".toogle-switch .ball"),["width","height"]);for(var t=e.querySelectorAll(".mp-menuitem"),o=0;o<t.length;o++)h.setElScale(t[o],["height","lineHeight"])}},isNextReady:!0,showPanel:function(e,o,t){var n,l,i,r,a,s,c,u,p;g.isNextReady&&(n=g.createSettingPopup(e),l=f.$el.mPlayer.querySelector(".mp-popup"),i=l.querySelector(".mp-panel-item"),l.appendChild(n.childNodes[0]),e=e instanceof Array?"homeSetting":e.functions,(r=l.querySelector('[panel-name="'+e+'"]')).classList.add("mp-panel-item"),g.setScalePopup(r),a=l.getBoundingClientRect(),s=i.getBoundingClientRect(),c=r.getBoundingClientRect(),e=(e=f.$el.mPlayer.getBoundingClientRect()).height-(e.height-c.bottom)-(e.top+10),u=c.height>=e?e:c.height,r.style.width=c.width+"px",r.style.height=u+"px",r.style.right=("previous"==o?s.width:-c.width)+"px",e=r.querySelector(".mp-panel-menu .mp-panel-selected"),t=r.querySelector('[panel-index="'+t+'"]'),p=e||t||r.querySelector("[panel-index]"),setTimeout(function(){p.focus()},250),setTimeout(function(){for(var e=l.querySelectorAll(".mp-panel"),t=0;t<e.length;t++)e[t].classList.contains("mp-popup-animation")||e[t].classList.add("mp-popup-animation");l.classList.contains("mp-popup-animation")||l.classList.add("mp-popup-animation"),i.style.opacity=0,i.style.right=("previous"==o?-s.width:c.width)+"px",a.width!=c.width&&(l.style.width=c.width+"px"),a.height!=u&&(l.style.height=u+"px"),r.style.right="0px",g.currentFocusPanelId=""},30),g.isNextReady=!1,setTimeout(function(){var e=l.getBoundingClientRect(),e={bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width,x:e.x,y:e.y};d.popupNodeInfo.popupRect=e,s.top<r.getBoundingClientRect().top&&(d.popupNodeInfo.popupRect.top=s.top,d.popupNodeInfo.popupRect.height=s.height),g.isNextReady=!0,l.removeChild(i)},250))},getPanelOption:function(i,r){var a=!1,s=null;return function e(t,o){for(var n=0;n<t.length&&!a;n++){var l=t[n];l.panelIndex==i?(a=!0,s="parent"==r?o:l):l.childConfig instanceof Array&&0<l.childConfig.length&&e(l.childConfig,l)}}(c,c),s},setCurrentModelEl:function(e){var t=e.childConfig,o=e.model||"select",n="";if("select"==o&&t instanceof Array&&0<t.length){for(var l=0;l<t.length;l++)if(!0===t[l].selected){n=t[l].functions||"";break}}else"switch"==o&&(n='<div class="toogle-switch '+(e.selected?"open":"close")+'" id="toggle-fit" style="background: '+f.$habit.themeColor+';"><div class="ball"></div></div>');return n},createSettingPopup:function(t){var e=(new h.popupInstance).createPopupElement();e.setAttribute("popup-name","setting"),t instanceof Array?e.innerHTML='<div class="mp-panel" panel-name="homeSetting"><div class="mp-panel-menu"></div></div>':(e.innerHTML='<div class="mp-panel mp-panel-child" panel-name="'+t.functions+'"><div class="mp-panel-menu"><ul class="mp-menuitem mp-panel-header"><li class="title"><div class="mp-menuitem-content left-arrow-icon">'+t.functions+"</div></li><li></li></ul></div></div>",e.querySelector(".mp-panel-header .title").addEventListener("click",function(e){e.stopPropagation(),g.isFocusActive=!0,g.backPanel(t.panelIndex)}));for(var o=t instanceof Array?t:t.childConfig,n=0;n<o.length;n++){var l,i,r,a=o[n]||{},s=a.model||"select";a.functions&&"string"==typeof a.functions&&((l=document.createElement("ul")).setAttribute("class","mp-menuitem"),l.setAttribute("panel-index",a.panelIndex),l.setAttribute("tabindex","0"),!0!==a.selected||"select"!=s||t instanceof Array||l.classList.add("mp-panel-selected"),(i=document.createElement("li")).innerHTML=a.functions,r=document.createElement("li"),(s=document.createElement("div")).setAttribute("class","mp-menuitem-content"),a.childConfig instanceof Array&&0<a.childConfig.length&&s.classList.add("arrow-icon"),"switch"==a.model&&s.classList.add("switch-icon"),s.innerHTML=g.setCurrentModelEl(a),r.appendChild(s),l.appendChild(i),l.appendChild(r),l.addEventListener("click",function(e){var t=g.getPanelOption(e.currentTarget.getAttribute("panel-index"));g.triggerSelected(t,e)}),l.addEventListener("mousedown",function(){g.focusToggle("OFF")}),l.addEventListener("blur",function(e){g.isFocusActive=!1,g.currentFocusPanelId=""}),l.addEventListener("focus",function(e){g.isFocusActive=!0,g.currentFocusPanelId=e.currentTarget.getAttribute("panel-index")}),l.addEventListener("keydown",function(e){g.settingOnKeyDownAction(e)}),e.querySelector(".mp-panel-menu").appendChild(l))}return e},showSettingPopup:function(e){if(e=e||{},!f.$data.isTouchMove){var t=f.$el.mPlayer.querySelector(".mp-popup");if(!t){r(),t=g.createSettingPopup(c),setTimeout(function(){t.querySelector("[panel-index]").focus()},100),f.$el.mplayerFooter.insertBefore(t,f.$el.mplayerFooter.childNodes[0]),g.setScalePopup(t),(new h.popupInstance).setVisiblePopup(t,e.currentTarget);for(var o=t.getBoundingClientRect(),e=f.$el.mPlayer.getBoundingClientRect(),e=e.height-(e.height-o.bottom)-(e.top+10),n=o.height>=e?e:o.height,l=t.querySelectorAll(".mp-popup .mp-panel,.mp-popup .mp-panel-menu"),i=0;i<l.length;i++)l[i].style.width=o.width+"px",l[i].style.height=n+"px";t.style.width=o.width+"px",t.style.height=n+"px",t.querySelector(".mp-panel").classList.add("mp-panel-item")}}},focusToggle:function(e){var t=f.$el.mPlayer;"ON"==e?t.classList.contains("mp-keyboard-focus")||t.classList.add("mp-keyboard-focus"):t.classList.contains("mp-keyboard-focus")&&t.classList.remove("mp-keyboard-focus")},settingOnKeyDownAction:function(e){var t=f.$el.mPlayer.querySelector(".mp-popup"),o=f.$method.getKeyCode(e);if(g.focusToggle("ON"),-1!=new Array(13,32,37,38,39,40).indexOf(o)&&(e.stopPropagation(),e.preventDefault()),32!=o&&13!=o)if(37!=o)if(38!=o)if(39!=o){if(40==o){l=[];l=(n=g.getPanelOption(g.currentFocusPanelId,"parent"))instanceof Array?n:(n||{}).childConfig||[];for(r=0;r<l.length;r++)if(l[r].panelIndex==g.currentFocusPanelId){r!=l.length-1?(i=l[r+1].panelIndex,t.querySelector('[panel-index="'+i+'"]').focus()):t.querySelector('[panel-index="'+l[0].panelIndex+'"]').focus();break}}}else(n=g.getPanelOption(g.currentFocusPanelId,"current"))&&n.childConfig instanceof Array&&0<n.childConfig.length&&g.showPanel(n,"next");else{var n,l=[];l=(n=g.getPanelOption(g.currentFocusPanelId,"parent"))instanceof Array?n:(n||{}).childConfig||[];for(var i,r=0;r<l.length;r++)if(l[r].panelIndex==g.currentFocusPanelId){0==r?t.querySelector('[panel-index="'+l[l.length-1].panelIndex+'"]').focus():(i=l[r-1].panelIndex,t.querySelector('[panel-index="'+i+'"]').focus());break}}else{var a=t.querySelector(".mp-panel-header .title");a&&a.click()}else{a=g.getPanelOption(g.currentFocusPanelId);g.triggerSelected(a,e)}},onSettingKeyDown:function(e){e.preventDefault(),f.$el.mplayerFooter.querySelector(".mp-popup").querySelector("[panel-index]").focus(),g.focusToggle("ON"),g.settingOnKeyDownAction(e)},initSubtitleOption:function(){var e=f.$el.videoObject.textTracks;if(e&&e instanceof TextTrackList&&0<e.length){var t=i.subtitle;t.childConfig[1].childConfig.splice(0,t.childConfig[1].childConfig.length);for(var o=0;o<e.length;o++){var n=e[o];t.childConfig[1].childConfig.push({functions:n.label,selected:"showing"==n.mode})}return t}}},n={toggleVisible:function(e,t){if(!0===e&&f.$data.showScreenControls)return f.$method.createTimerCloseControl(),void(f._this._global_.webpagePlugin.hiddleControl||t instanceof Function&&t());!0!==e||f.$data.showScreenControls||(f.$method.toggleControlsDisplay({type:"showControls"}),f._this._global_.webpagePlugin.hiddleControl=!0,setTimeout(function(){f._this._global_.webpagePlugin.hiddleControl=!1,t instanceof Function&&t()},300))},escKeyDown:function(){(new h.popupInstance).togglePopupVisible("OFF"),g.focusToggle("OFF"),f.$el.mPlayer.focus()},confirmKeyDown:function(){(new e.interface)._onAgentMpTap("click"),(new h.popupInstance).togglePopupVisible("OFF")},leftKeyDown:function(){var e;!0!==f.option.live&&(n.toggleVisible(!0),e=f.$el.videoObject.currentTime-5,f.$data.currentTime=0<e?e:.1,f.$el.videoObject.currentTime=f.$data.currentTime,h.showHandleIcon("progress-back"),(new h.popupInstance).togglePopupVisible("OFF"))},rightKeyDown:function(){var e,t;!0!==f.option.live&&(n.toggleVisible(!0),e=f.$data,(t=f.$el.videoObject.currentTime+5)<=e.duration?f.$data.currentTime=t:f.$data.currentTime=Number.parseInt(e.duration),f.$el.videoObject.currentTime=f.$data.currentTime,h.showHandleIcon("progress-forward"),(new h.popupInstance).togglePopupVisible("OFF"))},topKeyDown:function(){!1!==f.$el.mplayerFooter.querySelector("#volume-switch").exist&&(n.toggleVisible(!0,function(){var e=s.getStorageVolume(),t=e.volume;!0===e.muted?(f.$el.videoObject.muted=!1,t=5):t+=5,s.showVolumePopup(event),s.setVolume(!1,t)}),h.showHandleIcon("volume-icon"))},bottomKeyDown:function(){!1!==f.$el.mplayerFooter.querySelector("#volume-switch").exist&&(n.toggleVisible(!0,function(){var e=s.getStorageVolume(),t=e.volume;!0===e.muted?(f.$el.videoObject.muted=!1,t=5):t-=5,s.showVolumePopup(event),s.setVolume(!1,t)}),h.showHandleIcon("volume-icon"))},onDocKeydown:function(e){var t=f.$method.getKeyCode(e);-1!=new Array(37,38,39,40,32,13).indexOf(t)&&(e.stopPropagation(),e.preventDefault()),70!=t?77!=t?27!=t?32!=t&&75!=t?37!=t?38!=t?39!=t?40==t&&n.bottomKeyDown():n.rightKeyDown():n.topKeyDown():n.leftKeyDown():n.confirmKeyDown(e):n.escKeyDown():s.onClickEvent({currentTarget:f.$el.mplayerFooter.querySelector("#volume-switch")},!0):(e=f.$el.mplayerFooter.querySelector("#full-switch"))instanceof Element&&e.click()}},h={popupInstance:function(){this.createPopupElement=function(){var e=document.createElement("div");return e.setAttribute("class","mp-popup"),e},this.setVisiblePopup=function(e,t){this.togglePopupVisible("ON");var o=t.getBoundingClientRect(),n=e.getBoundingClientRect(),l=f.$el.mPlayer.getBoundingClientRect(),i=f.$el.touchEffective instanceof Element?f.$el.touchEffective.getBoundingClientRect():{},n=l.width-o.left+l.left-n.width/2-o.width/2;e.style.right=(12<=n?n:12)+"px";l=l.height-(i.top||o.top-5)+l.top;return e.style.bottom=l+"px",d.popupNodeInfo.triggerButtonRect=t.getBoundingClientRect(),d.popupNodeInfo.popupRect=e.getBoundingClientRect(),e},this.togglePopupVisible=function(e){var t=!!f.$el.mPlayer&&f.$el.mPlayer.querySelector(".mp-popup");t&&(t.classList.add("popup-toggle"),"OFF"==e?(f.$el.mPlayer.focus(),t.style.opacity=0,setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},110),f._this._global_.webpagePlugin.showSettingState=!1,f.$method.createTimerCloseControl(),document.removeEventListener("mousemove",h.onDocMousemoveEvent)):(setTimeout(function(){t.style.opacity=1},5),setTimeout(function(){t.classList.remove("popup-toggle")},110),f._this._global_.webpagePlugin.showSettingState=!0,setTimeout(function(){f.$method.createTimerCloseControl({type:"cancel"})},100),document.addEventListener("mousemove",h.onDocMousemoveEvent)))}},onEffectiveOverEvent:function(e){var t=(e=e||{}).type||"";if(!f._this._global_.webpagePlugin.showSettingState){var o=function(e){var t=f.$el.touchEffective.querySelectorAll("#progress-total,#progress-buffered,#progress-play");if(e){for(var o=0;o<t.length;o++)t[o].classList.add("progress-hover-scale");f.$el.progressBall.classList.add("hover-scale"),f.$el.touchEffective.querySelector(".mp-tooltip").style.display="block",f.$el.touchEffective.querySelector(".mp-thumbnails").style.display="block"}if(!e){for(o=0;o<t.length;o++)t[o].classList.remove("progress-hover-scale");f.$el.progressBall.classList.remove("hover-scale"),f.$el.touchEffective.querySelector(".mp-tooltip").style.display="none",f.$el.touchEffective.querySelector(".mp-thumbnails").style.display="none"}};switch(t){case"mouseover":o(!0),h.showTimeTooltip(e),h.showThumbnails(e),f.$el.touchEffective.addEventListener("mousemove",h.onEffectiveOverEvent),f.$el.touchEffective.addEventListener("mouseout",h.onEffectiveOverEvent);break;case"mousemove":o(!0),h.showTimeTooltip(e),h.showThumbnails(e);break;case"mouseout":o(!1),f.$el.touchEffective.removeEventListener("mousemove",h.onEffectiveOverEvent),f.$el.touchEffective.removeEventListener("mouseout",h.onEffectiveOverEvent)}}},addControlTooltip:function(){for(var e=f.$el.mplayerFooter.querySelectorAll(".footer-control"),t=0;t<e.length;t++)e[t].getAttribute("tooltip")&&(e[t].addEventListener("mouseover",function(e){var t,o,n,l=document.createElement("div");l.setAttribute("class","mp-tooltip"),l.innerText=e.currentTarget.getAttribute("tooltip"),!1!==f.$el.mplayerFooter.querySelector(".mp-tooltip").exist||f.$data.isTouchMove||(f.$el.mplayerFooter.insertBefore(l,f.$el.mplayerFooter.childNodes[0]),t=e.currentTarget.getBoundingClientRect(),o=l.getBoundingClientRect(),n=f.$el.mPlayer.getBoundingClientRect(),e=f.$el.touchEffective instanceof Element?f.$el.touchEffective.getBoundingClientRect():{},o=n.width-t.left+n.left-o.width/2-t.width/2,l.style.right=(16<=o?o:16)+"px",n=n.height-(e.top||t.top-5)+n.top,l.style.bottom=n+"px")}),e[t].addEventListener("mouseout",function(e){f.$method.removeNode(f.$el.mplayerFooter,".mp-tooltip")}))},thumbnailStyleAtBottom:function(){var e="number"==typeof m.fullScaling&&1<=m.fullScaling?m.fullScaling:1.2;return f.$data.isFullScreen?25.6*e:25.92},showThumbnails:function(e){var n,l,i,r=f.$el.touchEffective.querySelector(".mp-thumbnails"),a=0,s=0,t=m.thumbnails||{},c=t.preview||[],o=t.tile||[10,10],t=t.scale||[160,90],u=o[0]||10,p=o[1]||10,d=t[0]||160,g=t[1]||90;0!=c.length&&(n=f.$el.mPlayer.getBoundingClientRect(),l=f.$el.touchEffective.getBoundingClientRect(),i=e.clientX-l.left,f.$method.computeProgress(i,f.$el.touchEffective,function(e){100<=e?e=100:e<=0&&(e=0);var t=parseInt(e/100*f.$data.duration),o=(a=t)%u==0?0:parseInt(a%u)*d,e=a/u<1?0:parseInt(a/u)*g;!function(){s=parseInt(a/(u*p)),!1===f.$el.touchEffective.querySelector('[data-playimage-index="'+s+'"]').exist&&((e=document.createElement("div")).setAttribute("class","preview-image"),e.setAttribute("data-playimage-index",s),e.style.width="100%",e.style.height="100%",s<c.length&&(e.style.backgroundImage="url("+c[s]+")"),!1===r.exist?((r=document.createElement("div")).setAttribute("class","mp-thumbnails thumbnails-scale"),r.style.outline="2px #FFFFFF solid",r.style.width=d+"px",r.style.height=g+"px",r.style.position="absolute",r.style.pointerEvents="none",r.appendChild(e),f.$el.touchEffective.appendChild(r)):r.appendChild(e));for(var e=f.$el.touchEffective.querySelectorAll(".preview-image"),t=0;t<e.length;t++){var o=e[t].getAttribute("data-playimage-index");e[t].style.display=o!=s?"none":"block"}}();t=r.getBoundingClientRect();f.$el.touchEffective.querySelector('[data-playimage-index="'+s+'"]').style.backgroundPosition=-o+"px "+-e+"px";o=h.thumbnailStyleAtBottom();r.style.bottom=Math.round(o)+"px";e=i-t.width/2,o=l.left-n.left+e,t=n.width-(l.left-n.left+e+t.width);12<=o&&12<=t&&(r.style.left=e+"px")}))},showTimeTooltip:function(e){var t=f.$el.touchEffective.getBoundingClientRect(),l=e.clientX-t.left,i=f.$el.mPlayer.getBoundingClientRect(),r=f.$el.touchEffective.getBoundingClientRect();f.$method.computeProgress(l,f.$el.touchEffective,function(e){100<=e?e=100:e<=0&&(e=0);var t=e/100*f.$data.duration,o=f.$method.formatCurrentTime(t),n=f.$el.touchEffective.querySelector(".mp-tooltip");!1===n.exist&&((n=document.createElement("div")).setAttribute("class","mp-tooltip"),f.$el.touchEffective.appendChild(n));e=h.thumbnailStyleAtBottom();n.style.bottom=Math.round(e+2)+"px";t=n.getBoundingClientRect();n.innerText=o;e=l-t.width/2,o=r.left-i.left+e,t=i.width-(r.left-i.left+e+t.width);12<=o&&12<=t&&(n.style.left=e+"px")})},addFocusKeyboardHandle:function(){for(var e=f.$el.mPlayer.querySelectorAll(".keyboard-input"),t=0;t<e.length;t++)e[t].addEventListener("keydown",function(e){var t=f.$method.getKeyCode(e),o=e.currentTarget.getAttribute("id");-1!=new Array(13,32).indexOf(t)&&(e.stopPropagation(),e.preventDefault());-1!=new Array(13,32).indexOf(t)&&((new h.popupInstance).togglePopupVisible("OFF"),"setting-switch"!=o?"volume-switch"!=o?e.currentTarget.click():s.showVolumePopup(e):g.showSettingPopup(e))}),e[t].addEventListener("mousedown",function(e){f._this._global_.webpagePlugin.inputMousedownFlag=!0,g.focusToggle("OFF"),f.$method.createTimerCloseControl()}),e[t].addEventListener("focus",function(e){setTimeout(function(){f._this._global_.webpagePlugin.inputMousedownFlag||g.focusToggle("ON"),f._this._global_.webpagePlugin.inputMousedownFlag=!1,h.onMpMousemoveEvent(),document.activeElement.classList.contains("keyboard-input")&&f.$method.createTimerCloseControl({type:"cancel"})},10)}),e[t].addEventListener("blur",function(){f.$el.mPlayer.querySelector(".mplayer-sidebar.open")||f.$method.createTimerCloseControl()})},onMpMousemoveEvent:function(){f.$data.showScreenControls?f._this._global_.webpagePlugin.showSettingState||f.$method.createTimerCloseControl():f.$method.toggleControlsDisplay({type:"showControls"}),f._this._global_.webpagePlugin.forControlsClose=!1},onMpMouseleaveEvent:function(){f._this._global_.webpagePlugin.showSettingState||f._this._global_.webpagePlugin.forControlsClose||f.$data.isTouchMove||f.$method.toggleControlsDisplay({type:"hideControls"}),f._this._global_.webpagePlugin.forControlsClose=!0},onDocMousemoveEvent:function(e){var t=d.popupNodeInfo.popupRect,o=d.popupNodeInfo.triggerButtonRect,n=t.left,l=t.left+t.width,i=t.top,r=t.top+t.height,l=e.clientX>n&&e.clientX<l&&e.clientY>i&&e.clientY<r,i=o.left-15,r=o.left+o.width+15,t=t.bottom-5,o=o.bottom+5,o=e.clientX>i&&e.clientX<r&&e.clientY>t&&e.clientY<o;l||o||!g.isNextReady||(new h.popupInstance).togglePopupVisible("OFF")},setElScale:function(e,t){var o="number"==typeof m.fullScaling&&1<=m.fullScaling?m.fullScaling:1.2,n=f.$data.isFullScreen,l={};if(Array.isArray(t)?t.forEach(function(e){l[e]=""}):l=t,e instanceof Element){var i=function(e){return Math.round(e)},r=function(e){return Number(e.replace("px",""))},a=e.getBoundingClientRect(),s=e.getAttribute("stylesheet");try{s=s?JSON.parse(s):{}}catch(e){}var c,u,p,d,g=function(){e.style.lineHeight=n?i((l.lineHeight||a.height)*o)+"px":(l.lineHeight||i(a.height*o))+"px"};for(c in l)switch(c){case"width":d=void 0,n?(d=i((l.width||a.width)*o),e.style.width=(d%2==0?d:d+1)+"px"):e.style.width=l.width?l.width+"px":s.width||i(a.width/o)+"px";break;case"height":p=void 0,n?(p=i((l.height||a.height)*o),e.style.height=(p%2==0?p:p+1)+"px"):e.style.height=l.height?l.height+"px":s.height||i(a.height/o)+"px";break;case"fontSize":u=void 0,u=document.defaultView.getComputedStyle(e,null).fontSize,e.style.fontSize=n?i((l.fontSize||r(u))*o)+"px":l.fontSize?l.fontSize+"px":s.fontSize||i(r(u)/o)+"px";break;case"lineHeight":case"transform":g()}}},toggles:function(){this.pageFull=function(e){function t(){f.$el.mPlayer.classList.add("page-fullscreen"),n[0].style.display="none",n[1].style.display="block",n[0].parentNode.setAttribute("tooltip",f.$method.getLangObject().exitPageScreen)}function o(){f.$el.mPlayer.classList.remove("page-fullscreen"),n[0].style.display="block",n[1].style.display="none",n[0].parentNode.setAttribute("tooltip",f.$method.getLangObject().pageScreen)}var n=f.$el.mPlayer.querySelectorAll("._fullpage,._unfullpage");"change"==e?o():"initFullFixed"==e?t():((f.$el.mPlayer.classList.contains("page-fullscreen")?o:t)(),f.$data.isFullScreen&&f.$method.fullToggle())},this.timeControls=function(e){var o=f.$el.mPlayer.querySelector("#current-time");e?function e(){var t=new Date,t=(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes());o&&(o.innerHTML=t,o.style.display="inline-block"),f._this._global_.webpagePlugin.timer_1&&clearInterval(f._this._global_.webpagePlugin.timer_1),f._this._global_.webpagePlugin.timer_1=setTimeout(function(){f.$data.isFullScreen&&f.$data.showScreenControls&&e()},1e3)}():o&&(o.style.display="none")},this.scaleControls=function(e){var t="number"==typeof m.fullScaling&&1<m.fullScaling?m.fullScaling:1.2,o=f.$el.mPlayer.classList;if((!e||!o.contains("fullscreen-scaling"))&&(e||o.contains("fullscreen-scaling"))){for(var n,l,i,r,a,s=[{selector:".mplayer-header,.mplayer-footer",attr:["height"]},{selector:".header-control,.footer-control,.mplayer-sidebar",attr:["width","fontSize"]},{selector:"#mplayer-loading .mplayer-loading__circular",attr:{width:40,height:40}},{selector:".mplayer-shortcut",attr:{width:430}},{selector:".mplayer-shortcut .title",attr:{fontSize:16}},{selector:".mplayer-shortcut ul",attr:{fontSize:14}},{selector:"#progress-total,#progress-buffered,#progress-play",attr:{height:2}},{selector:"#progress-ball .progress-ball",attr:{width:15,height:15}},{selector:"#mplayer-toast",attr:["fontSize"]},{selector:"#mplayer-footer .spot",attr:["height","width"]}],c=0;c<s.length;c++)for(var u=f.$el.mPlayer.querySelectorAll(s[c].selector),p=0;p<u.length;p++)h.setElScale(u[p],s[c].attr);e?o.add("fullscreen-scaling"):o.remove("fullscreen-scaling"),e?(n="@-webkit-keyframes mp-bezel-fadeout {from{opacity: 1;}to{opacity: 0;-webkit-transform: scale("+1.5*t+");transform: scale("+1.5*t+");}}@keyframes mp-bezel-fadeout {from{opacity: 1;}to{opacity: 0;-webkit-transform: scale("+1.5*t+");transform: scale("+1.5*t+");}}",l=".mp-tooltip {font-size: "+14*t+"px !important;}",i=".mp-thumbnails.thumbnails-scale {-webkit-transform: scale("+t+");-ms-transform: scale("+t+");transform: scale("+t+");-webkit-transform-origin: left bottom;-ms-transform-origin: left bottom;transform-origin: left bottom;}",o=".toast-scaling{height: "+34*t+"px;line-height: "+34*t+"px;font-size: "+14*t+"px;}",e=".mp-keyboard-focus .mp-menuitem:focus {box-shadow: inset 0 0 0 "+2*t+"px rgba(27,127,204,0.8) !important;}.mp-keyboard-focus .keyboard-input:focus {box-shadow: inset 0 0 0 "+2*t+"px rgba(27,127,204,0.8) !important;}",t="",f.$el.mPlayer.querySelector("#progress-container")&&(r=f.$el.mPlayer.querySelector("#progress-container").getBoundingClientRect(),a=f.$el.mPlayer.querySelector("#progress-container #progress-total").getBoundingClientRect(),t=".mplayer-footer .progress .progress-container.upper-position {margin-bottom: -"+(r.height-a.height)/2+"px !important;}"),(a=(r=document.getElementsByTagName("head").item(0)).querySelector("#player-scaling-style"))?f.$method.removeNode(r,"#player-scaling-style"):((a=document.createElement("style")).setAttribute("id","player-scaling-style"),a.setAttribute("type","text/css")),a.innerHTML=n+l+i+o+e+t,r.appendChild(a)):f.$method.removeNode(document.getElementsByTagName("head").item(0),"#player-scaling-style")}}},showHandleIcon:function(e){var t='<svg t="1598581427609" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2856" width="24" height="24"><path d="M267.58370352 186.11160469h162.94419765v651.77679062H267.58370352zM593.47209883 186.11160469h162.94419765v651.77679062h-162.94419765z" p-id="2857" fill="#ffffff"></path></svg>',o='<svg t="1598581671973" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2357" width="24" height="24"><path d="M287.49910545 187.55999756l502.5923252 324.51242209-502.5923252 324.44000244z" p-id="2358" fill="#ffffff"></path></svg>',n='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16579" width="100%" height="100%"><path d="M512 8v237.17647013h237.17647013m148.23529481 266.82352987a59.29411753 59.29411753 0 1 1-59.29411753 59.29411753 59.29411753 59.29411753 0 0 1 59.29411753-59.29411753zM512 245.17647012a326.11764741 326.11764741 0 1 0 326.11764741 326.11764741h118.58823506A444.70588247 444.70588247 0 1 1 512 126.58823506v118.58823507z m-60.77647013 140.17129482l-24.90352987 194.3068237a300.23576494 300.23576494 0 0 1 48.32470617-3.20188247c71.74588247 0 106.72941136 32.61176494 106.72941136 84.34588247a81.79623506 81.79623506 0 0 1-85.68 83.27858766 166.70541136 166.70541136 0 0 1-77.97176494-20.30823507l-13.93411753 46.99058864a191.31247013 191.31247013 0 0 0 93.9811763 22.4131763 137.76988247 137.76988247 0 0 0 146.75294123-137.71058864c0-82.21129383-63.14823506-124.93270617-136.08-124.93270617-11.26588247 0-18.67764741 1.06729383-26.68235259 1.60094123l13.3411763-95.55247012h140.82352987v-51.23011753h-184.70117629z" p-id="16580" fill="#ffffff"></path></svg>',l='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16817" width="100%" height="100%"><path d="M512 1016A444.70588247 444.70588247 0 0 1 67.29411753 571.29411753a59.29411753 59.29411753 0 0 1 118.58823506 0A326.11764741 326.11764741 0 1 0 512 245.17647012V126.58823506a444.70588247 444.70588247 0 0 1 0 889.41176494z m108.50823506-360.53788247a137.76988247 137.76988247 0 0 1-146.75294123 137.71058864 190.42305877 190.42305877 0 0 1-93.9811763-22.4131763l13.63764741-46.99058864a166.70541136 166.70541136 0 0 0 77.97176493 20.30823507 82.03341136 82.03341136 0 0 0 85.97647013-83.27858766c0-51.79341136-35.28-84.34588247-106.72941136-84.34588247a304.23811753 304.23811753 0 0 0-48.62117728 3.20188247l25.2-194.3068237h184.70117728v51.23011753h-140.82352987l-13.3411763 95.55247012c8.00470617-0.53364741 15.41647013-1.60094123 26.68235259-1.60094123 72.93176494 0 136.08 42.72141136 136.08 124.93270617zM512 8v237.17647013H274.82352987z" p-id="16818" fill="#ffffff"></path></svg>',i=f.$el.mPlayer.querySelector(".mp-bezel-text-hide");switch(e){case"mouseclick":f.$data.isPlay?i.querySelector(".mp-bezel-icon").innerHTML=t:i.querySelector(".mp-bezel-icon").innerHTML=o;break;case"progress-forward":i.querySelector(".mp-bezel-icon").innerHTML=n;break;case"progress-back":i.querySelector(".mp-bezel-icon").innerHTML=l;break;case"volume-icon":i.querySelector(".mp-bezel-icon").innerHTML=s.toggleVolumeIcon()}"none"==i.style.display?i.style.display="block":(i.style.display="none",f._this._global_.webpagePlugin.handleIconTimer_1||(f._this._global_.webpagePlugin.handleIconTimer_1=setTimeout(function(){f._this._global_.webpagePlugin.handleIconTimer_1=!1,i.style.display="block"},15))),f._this._global_.webpagePlugin.handleIconTimer_2&&window.clearTimeout(f._this._global_.webpagePlugin.handleIconTimer_2),f._this._global_.webpagePlugin.handleIconTimer_2=setTimeout(function(){i.style.display="none"},400)},buildBasePanel:function(e){var t=e.querySelector("#right-part"),o=document.createElement("button");o.setAttribute("class","player-btn keyboard-input footer-control"),o.setAttribute("id","volume-switch"),o.setAttribute("control",""),o.innerHTML=s.toggleVolumeIcon(),t.insertBefore(o,t.childNodes[t.childNodes.length-1]),o.addEventListener("mouseover",s.showVolumePopup),o.addEventListener("click",s.onClickEvent),!document.pictureInPictureEnabled||e.querySelector("video").disablePictureInPicture||((o=document.createElement("button")).setAttribute("class","player-btn keyboard-input footer-control picture-in-picture"),o.setAttribute("id","picture-in-picture"),o.setAttribute("tooltip",f.$method.getLangObject().pictureInPicture),o.setAttribute("control",""),o.innerHTML=a.togglePictureIcon(),t.insertBefore(o,t.childNodes[t.childNodes.length-1]),o.addEventListener("click",a.onPictureInPicture)),r("statics"),0<c.length&&((n=document.createElement("button")).setAttribute("class","player-btn keyboard-input footer-control"),n.setAttribute("id","setting-switch"),n.setAttribute("control",""),n.innerHTML='<svg t="1607605827678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2386"><path d="M857.9375 512c0-49.125 30.84375-90.75 74.0625-107.34375-10.3125-40.5-26.25-78.65625-47.0625-113.71875C842.5625 309.78125 791.375 302.09375 756.6875 267.3125c-34.6875-34.6875-42.375-85.96875-23.53125-128.25C698 118.25 659.84375 102.3125 619.34375 92c-16.6875 43.21875-58.3125 74.0625-107.34375 74.0625-49.125 0-90.75-30.84375-107.34375-74.0625-40.5 10.3125-78.65625 26.25-113.71875 47.0625 18.84375 42.375 11.15625 93.5625-23.53125 128.25-34.6875 34.6875-85.96875 42.375-128.25 23.625C118.25 326 102.3125 364.15625 92 404.65625c43.21875 16.6875 74.0625 58.3125 74.0625 107.34375 0 49.125-30.84375 90.75-74.0625 107.34375 10.3125 40.5 26.25 78.65625 47.0625 113.71875C181.4375 714.21875 232.625 721.90625 267.3125 756.6875c34.6875 34.6875 42.375 85.96875 23.53125 128.25C326 905.75 364.15625 921.6875 404.65625 932c16.6875-43.21875 58.3125-74.0625 107.34375-74.0625 49.125 0 90.75 30.84375 107.34375 74.0625 40.5-10.3125 78.65625-26.25 113.71875-47.0625-18.84375-42.375-11.15625-93.5625 23.53125-128.25 34.6875-34.6875 85.96875-42.375 128.25-23.625C905.75 698 921.6875 659.84375 932 619.34375c-43.21875-16.59375-74.0625-58.21875-74.0625-107.34375zM512 627.3125c-63.65625 0-115.3125-51.65625-115.3125-115.3125s51.65625-115.3125 115.3125-115.3125 115.3125 51.65625 115.3125 115.3125-51.65625 115.3125-115.3125 115.3125z" p-id="2387" fill="#ffffff"></path></svg>',n.addEventListener("mouseover",g.showSettingPopup),t.insertBefore(n,t.childNodes[t.childNodes.length-1]));var n=document.createElement("button");n.setAttribute("class","player-btn keyboard-input footer-control"),n.setAttribute("id","pagefull-switch"),n.setAttribute("tooltip",f.$method.getLangObject().pageScreen),n.setAttribute("control",""),n.innerHTML='<div class="_fullpage"controls="full-page"><svg t="1607605504727"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2356"><path d="M948.90666667 851.69493333H75.09333333c-27.30666667 0-49.152-21.84533333-49.152-43.69066666v-655.36c0-27.30666667 21.84533333-49.152 49.152-49.152h873.81333334c27.30666667 0 43.69066667 21.84533333 43.69066666 49.152v655.36c0 27.30666667-16.384 43.69066667-43.69066666 43.69066666z m-824.66133334-87.38133333h780.97066667V196.33493333H124.24533333v567.97866667z"p-id="2357"fill="#ffffff"></path><path d="M238.93333333 496.70826667c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066667v-136.53333333c0-21.84533333 16.384-43.69066667 43.69066666-43.69066667h136.53333334c21.84533333 0 43.69066667 16.384 43.69066666 43.69066667s-21.84533333 38.22933333-43.69066666 38.22933333H282.624v98.304c0 21.84533333-21.84533333 43.69066667-43.69066667 43.69066667zM785.06666667 687.85493333h-136.53333334c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066666s16.384-43.69066667 43.69066666-43.69066667h92.84266667v-98.304c0-21.84533333 16.384-43.69066667 43.69066667-43.69066667s43.69066667 16.384 43.69066666 43.69066667v141.99466667c-5.46133333 21.84533333-21.84533333 43.69066667-43.69066666 43.69066666z"p-id="2358"fill="#ffffff"></path></svg></div><div class="_unfullpage"controls="unfull-page"style="display: none;"><svg t="1607605550628"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2519"><path d="M948.90666667 851.69493333H75.09333333c-27.30666667 0-49.152-21.84533333-49.152-43.69066666v-655.36c0-27.30666667 21.84533333-49.152 49.152-49.152h873.81333334c27.30666667 0 43.69066667 21.84533333 43.69066666 49.152v655.36c0 27.30666667-16.384 43.69066667-43.69066666 43.69066666z m-824.66133334-87.38133333h780.97066667V196.33493333H124.24533333v567.97866667z"p-id="2520"fill="#ffffff"></path><path d="M375.46666667 496.70826667H238.93333333c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066667s21.84533333-38.22933333 43.69066666-38.22933333h92.84266667v-98.304c0-21.84533333 16.384-43.69066667 43.69066667-43.69066667s38.22933333 21.84533333 38.22933333 43.69066667v136.53333333c0 21.84533333-16.384 43.69066667-38.22933333 43.69066667zM648.53333333 687.85493333c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066666v-136.53333334c0-21.84533333 16.384-43.69066667 43.69066666-43.69066666H785.06666667c21.84533333 0 43.69066667 16.384 43.69066666 43.69066666s-16.384 43.69066667-43.69066666 43.69066667h-92.84266667v92.84266667c-5.46133333 21.84533333-21.84533333 43.69066667-43.69066667 43.69066666z"p-id="2521"fill="#ffffff"></path></svg></div>',t.insertBefore(n,t.childNodes[t.childNodes.length-1]),n.addEventListener("click",(new h.toggles).pageFull),f.$method.removeNode(e,"#back-button #back-icon-svg");n=document.createElement("button");f.$method.setElementStyle(n,{fontSize:"18px",color:"#FFFFFF",width:"auto"}),n.setAttribute("class","player-btn header-control"),n.setAttribute("id","current-time"),n.setAttribute("control",""),n.innerHTML='<div id="" style="display: none;"></div>',e.querySelector("#buttom-group").appendChild(n);e.appendChild(f.$method.createRangeIsDocFragment('<div style="display: none;"class="mp-bezel-text-hide"><div class="mp-bezel"><div class="mp-bezel-icon"></div></div></div>'));n=document.createElement("div");n.setAttribute("class","ctxmenu-wrapper"),n.setAttribute("id","ctxmenu-wrapper"),n.addEventListener("click",function(e){e.stopPropagation()}),e.appendChild(n);var l=document.createElement("div");l.setAttribute("class","mplayer-shortcut"),l.setAttribute("id","mplayer-shortcut");n=f.option.lang||navigator.language||navigator.browserLanguage||"zh-cn";return l.innerHTML=-1!="en".indexOf(n.toLowerCase())?'<p class="title">Shortcuts function</p><div class="close-shortcut-panel">×</div><ul><li><label>Space：</label><span>play/pause</span></li><li><label>Esc：</label><span>exit full screen</span></li></ul><ul><li><label>↑：</label><span>voice increase 5%</span></li><li><label>↓：</label><span>voice reduce 5%</span></li></ul><ul><li><label>→：</label><span>fast forward 5 seconds</span></li><li><label>←：</label><span>fast backward 5 seconds</span></li></ul>':'<p class="title">快捷功能</p><div class="close-shortcut-panel">×</div><ul><li><label>空格：</label><span>播放/暂停</span></li><li><label>Esc：</label><span>退出全屏</span></li></ul><ul><li><label>↑：</label><span>音量增加5%</span></li><li><label>↓：</label><span>音量减少5%</span></li></ul><ul><li><label>→：</label><span>快进5秒</span></li><li><label>←：</label><span>快退5秒</span></li></ul>',l.addEventListener("click",function(e){e.stopPropagation()}),l.addEventListener("dblclick",function(e){e.stopPropagation()}),l.addEventListener("mouseup",function(e){e.stopPropagation()}),l.querySelector(".close-shortcut-panel").addEventListener("click",function(){l.style.display="none"}),e.appendChild(l),e},initConfigControls:function(e){1!=f.option.live&&((i=document.createElement("button")).setAttribute("class","player-btn footer-control keyboard-input"),i.setAttribute("style","color: white;display: flex;align-items: center;width: auto;"),i.innerHTML='<div class="progress-begin" id="progress-begin"style="width: initial;margin-right: 5px;font-size: inherit;">开始</div><div class="time-symbol">/</div><div class="progress-long" id="progress-long" style="color: #dddddd;width: initial;margin-left: 5px;font-size: inherit;">结束</div>',f.$method.setElementStyle(i,{color:"#FFFFFF",display:"flex",width:"auto"}),f.$method.removeNode(e,"#progress-begin"),f.$method.removeNode(e,"#progress-long"),e.querySelector("#left-part").appendChild(i)),e.querySelector("#progress-ball")&&e.querySelector("#progress-ball").classList.add("default-scale"),e.querySelector(".progress-ball")&&(e.querySelector(".progress-ball").style.height="15px"),e.querySelector(".progress-ball")&&(e.querySelector(".progress-ball").style.width="15px"),e.querySelector("#progress-container")&&e.querySelector("#progress-container").setAttribute("style","left: 12px;right: 12px;"),e.querySelector("#touch-effective")&&(e.querySelector("#touch-effective").style.margin="0");for(var t=e.querySelectorAll("#progress-total,#progress-buffered,#progress-play"),o=0;o<t.length;o++)t[o]&&t[o].classList.add("progress-default-scale");var n=s.getStorageVolume(),l=n.expiration,i=n.muted,n=n.volume;return"number"==typeof l&&l>(new Date).getTime()?("boolean"==typeof i&&(e.querySelector("video").muted=i),"number"==typeof n&&(e.querySelector("video").volume=0<n&&n<100?Number.parseInt(n)/100:1)):(n=f.option.volume,s.setStorageVolume(0<=n&&n<=1?100*n:100)),e=h.buildBasePanel(e)},onFullscreenChange:function(e){f._this._global_.isReady&&(e.fullscreen?((new h.toggles).pageFull("change"),(new h.toggles).timeControls(!0),(new h.toggles).scaleControls(!0)):((new h.toggles).scaleControls(!1),(new h.toggles).timeControls(!1),(new h.popupInstance).togglePopupVisible("OFF")))},onControlsToggle:function(e){e.show||(new h.popupInstance).togglePopupVisible("OFF"),f.$data.isFullScreen&&(new h.toggles).timeControls(e.show)},onReady:function(){var e;"function"==typeof f.$el&&(e=new f.$el,f.$el=e),!0===f.option.initFullFixed&&(new h.toggles).pageFull("initFullFixed"),h.addFocusKeyboardHandle(),h.addControlTooltip(),h.toggleEventListenerGlobal("add","playerReady")},onDestory:function(){h.toggleEventListenerGlobal("remove","playerDestory")},onError:function(){h.toggleEventListenerGlobal("remove","playerError")},onAction:function(e){e="add"==e?"on":"off";f._this[e]("fullscreen-change",h.onFullscreenChange),f._this[e]("controls-toggle",h.onControlsToggle),f._this[e]("ready",h.onReady),f._this[e]("destory",h.onDestory),f._this[e]("error",h.onError)},toggleEventListenerGlobal:function(e,t){var o="add"==e?"addEventListener":"removeEventListener";f._this._global_.webpagePlugin.eventStatus=o;f.$el.touchEffective instanceof Element&&f.$el.touchEffective[o]("mouseover",h.onEffectiveOverEvent),f.$el.mPlayer[o]("mousemove",h.onMpMousemoveEvent),!0===m.leaveHiddenControls&&f.$el.mPlayer[o]("mouseleave",h.onMpMouseleaveEvent),f.$el.mPlayer[o]("keydown",n.onDocKeydown),f.$el.mPlayer[o]("mouseup",u.createCtxmenu),f.$el.mPlayer[o]("contextmenu",u.onContextmenuEvent),"playerDestory"==t&&h.onAction("remove")}};this.interface=function(t){this._onAgentMpTap=function(e){if("click"==e){if(f.$el.mPlayer.querySelector(".mplayer-sidebar.open"))return void f.$method.toggleControlsDisplay(t);f.$method.onPlayTap({type:"dblscreen"}),h.showHandleIcon("mouseclick"),"removeEventListener"==f._this._global_.webpagePlugin.eventStatus&&this._addEvent()}"dbclick"==e&&f.$method.fullToggle(t)},this._removeEvent=function(){h.toggleEventListenerGlobal("remove","activeRemove")},this._addEvent=function(){h.toggleEventListenerGlobal("add")}},this.appendTemplate=function(e,t){return f={},f=t,h.onAction("add"),e=h.initConfigControls(e)},this.name="MuiPlayerDesktopPlugin"}});
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&_typeof(define.amd)?define(t):e.MuiPlayerMobilePlugin=t()}(window,function(){return function(u){function l(){return{mPlayer:t,mplayerTime:t.querySelector("#mplayer-time"),timeStart:t.querySelector("#time-start"),timeEnd:t.querySelector("#time-end"),timeProgress:t.querySelector("#time-progress"),timeTotal:t.querySelector("#time-total"),volumeControl:t.querySelector("#volume-control"),volumeProgress:t.querySelector("#volume-progress"),volumeTotal:t.querySelector("#volume-total"),luminanceControl:t.querySelector("#luminance-control"),luminanceProgress:t.querySelector("#luminance-progress"),luminanceTotal:t.querySelector("#luminance-total"),mplayerLeft:t.querySelector("#mplayer-left"),lockScreen:t.querySelector("#lock-screen"),menuButton:t.querySelector("#menu-button"),batteryInfo:t.querySelector("#battery-info"),mplayerSidebar:t.querySelector("#mplayer-sidebar"),toggleFit:t.querySelector("#toggle-fit"),toggleLoop:t.querySelector("#toggle-loop")}}var u=u||{},m={},t=null,i=new function(){return{isLockScreen:!1,startX:null,startY:null,moveX:null,moveY:null,_defaultVolumePro:null,_defaultLuminanicePro:null,isTouchMove:!1,useTouchType:null}},o='\x3c!-- 播放器中央进度控件 --\x3e<div class="mplayer-time"id="mplayer-time"><div class="time"><span class="time-start"id="time-start"></span><span class="time-symbol">/</span><span class="time-end"id="time-end"></span></div>\x3c!--Progress Time--\x3e<div class="time-progress"id="time-progress"><div style="width: 0%;"class="time-total"id="time-total"></div></div></div>',n='\x3c!-- Mplayer屏幕亮度显示控件 --\x3e<div class="small-control"id="luminance-control"><svg t="1574053406895"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="1562"width="19"height="19"><path d="M496.011864 847.708901l0 96.02603c0 8.697079 7.158027 15.941064 15.988136 15.941064 8.891508 0 15.988136-7.137561 15.988136-15.941064l0-96.02603c0-8.697079-7.158027-15.941064-15.988136-15.941064C503.107469 831.767837 496.011864 838.905398 496.011864 847.708901zM738.110761 738.110761c-6.287193 6.287193-6.259564 16.35141-0.033769 22.577205l67.900459 67.900459c6.15007 6.15007 16.33299 6.210445 22.577205-0.032746 6.287193-6.287193 6.258541-16.352433 0.032746-22.577205l-67.900459-67.900459C754.537895 731.925898 744.353952 731.865523 738.110761 738.110761zM527.988136 176.291099 527.988136 80.265068c0-8.697079-7.158027-15.941064-15.988136-15.941064-8.891508 0-15.988136 7.137561-15.988136 15.941064l0 96.02603c0 8.697079 7.158027 15.941064 15.988136 15.941064C520.891508 192.231139 527.988136 185.094602 527.988136 176.291099zM512 512m-255.81427 0a249.988 249.988 0 1 0 511.62854 0 249.988 249.988 0 1 0-511.62854 0ZM828.554656 195.445344c-6.287193-6.287193-16.352433-6.258541-22.577205-0.032746l-67.900459 67.900459c-6.15007 6.15007-6.210445 16.334014 0.033769 22.577205 6.287193 6.287193 16.352433 6.259564 22.577205 0.033769l67.900459-67.901483C834.737472 211.872478 834.797847 201.689558 828.554656 195.445344zM943.734932 496.011864l-96.02603 0c-8.697079 0-15.941064 7.158027-15.941064 15.988136 0 8.891508 7.137561 15.988136 15.941064 15.988136l96.02603 0c8.697079 0 15.941064-7.158027 15.941064-15.988136C959.674972 503.107469 952.538435 496.011864 943.734932 496.011864zM176.291099 496.011864 80.265068 496.011864c-8.697079 0-15.941064 7.158027-15.941064 15.988136 0 8.891508 7.137561 15.988136 15.941064 15.988136l96.02603 0c8.697079 0 15.941064-7.158027 15.941064-15.988136C192.231139 503.107469 185.094602 496.011864 176.291099 496.011864zM263.312034 738.075968l-67.900459 67.900459c-6.15007 6.15007-6.210445 16.33299 0.032746 22.577205 6.287193 6.287193 16.352433 6.258541 22.577205 0.032746l67.901483-67.900459c6.15007-6.151094 6.210445-16.334014-0.033769-22.577205C279.602046 731.822544 269.537829 731.851197 263.312034 738.075968zM218.022549 195.411575c-6.15007-6.15007-16.33299-6.210445-22.577205 0.032746-6.287193 6.287193-6.258541 16.352433-0.032746 22.577205l67.900459 67.901483c6.15007 6.15007 16.334014 6.210445 22.577205-0.033769 6.287193-6.287193 6.259564-16.35141 0.033769-22.577205L218.022549 195.411575z"p-id="1563"fill="#ffffff"></path></svg><div class="progress"id="luminance-progress"><div class="total"id="luminance-total"style="width: 0%;"></div></div></div>',r='\x3c!-- Mplayer音量显示控件 --\x3e<div class="small-control"id="volume-control"><img class="icon-two"style="display: inline;"width="19"height="19"src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAANlBMVEUAAAD////////////////////////////////////////////////////////////////////xY8b8AAAAEXRSTlMAQBDA8KAg0IBg4HCQUDCwn9QHtzAAAAEQSURBVEjH7ZTBcoQgEEQVQRFEff//s4FC1gSXkDnktn0Ri37FTEPN8NE37bPMb9ESQp3AKPAviIDd8ROYbfjNP2oqYIK17V+hBg7AtvwnT0AZILxv9+AJREVCz414bqDaMK+/MBVpKkBNLuQkgNcRvNd4JbCVorYeUGq01xG6D0SZUouDsQeUWzvSdwPbBUq7Krdz9ICsJS4zOPWBqxaf+gf9N8CCvWz/BJi4FJXkYJY0HY1uEMSaHocXXJyawKn7OrpAtLGnxd57fHc0a8nKFMDr9glhm/OkyY+21q5roGgB0555T+CkNWuVqYDib48y/wQ8qaCmgq4BG/2iYay8F477vowUGNYUo0izGj4q+gKKsi0nAoxfOwAAAABJRU5ErkJggg=="/><img class="icon-one"style="display: none;"width="19"height="19"src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAOVBMVEUAAAD///////////////////////////////////////////////////////////////////////8KOjVvAAAAEnRSTlMAQBC/8NAggDCgcGBQ4N+QsJ/fLHffAAAAsklEQVRIx+3Uuw6DMAxGYWOSkBu38/4PWxakVqhV/4GNM+cbYlm2p7dyMqmJoAjfgUF4H5FAXpDAEJBAAwnsSMA3JOCRf0AfzwJ8Ah+XfgVcO0EDVgV4BCYBmBUgKcBG2CQwAK4AizBIYIUqgQmme0FR/7BAEsc6mwA8QhWAjzC7ACKQlW2F0C7rXcNXYH1NPy9SAPEIRBGYFw0cVRVYDyKwPMO95/6oqMAaIZlUcns6ewG5zilmwncwVgAAAABJRU5ErkJggg=="/><img class="icon-zero"style="display: none;"width="19"height="19"src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAM1BMVEUAAAD///////////////////////////////////////////////////////////////+3leKCAAAAEHRSTlMAQL8Q8NAwIOCgn3BgUK9/0BJchgAAAGtJREFUSMft1DkWgCAQBNHRGcDdvv9pNeFhSMVScf+0bfQpF0PdCiJ8kzSBfRICeRECUwiBQ0JgEwJ+CQFP6gHnXAt1AbUGGOD3YA8IWjkgME8QmK8MvO0U2BkNsDPmdw9aKbBDUQxV3Ea1ByaZIX0l0zmlAAAAAElFTkSuQmCC"/><div class="progress"id="volume-progress"><div class="total"id="volume-total"style="width: 0%;"></div></div></div>',a='\x3c!-- Mplayer 左侧操作按钮 --\x3e<div class="mplayer-left"id="mplayer-left">\x3c!--锁屏--\x3e<div class="control-icon"id="lock-screen"control>\x3c!--Lock--\x3e<div class="_unlock"id="_unlock"><svg t="1573132768516"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="1405"width="22"height="22"><path d="M758.5 931h-497c-50.453 0-91.5-41.047-91.5-91.5v-335c0-50.453 41.047-91.5 91.5-91.5h497c50.453 0 91.5 41.047 91.5 91.5v335c0 50.453-41.047 91.5-91.5 91.5z m-497-454c-15.164 0-27.5 12.336-27.5 27.5v335c0 15.163 12.336 27.5 27.5 27.5h497c15.163 0 27.5-12.337 27.5-27.5v-335c0-15.164-12.337-27.5-27.5-27.5h-497z"fill="#ffffff"p-id="1406"></path><path d="M512.1 791c-17.673 0-32-14.327-32-32V588.999c0-17.673 14.327-32 32-32 17.673 0 32 14.327 32 32V759c0 17.673-14.328 32-32 32zM297.472 446.595c-17.673 0-32-14.327-32-32 0-109.504 25.127-192.098 74.684-245.486 22.309-24.034 49.483-42.036 80.767-53.505 27.139-9.95 57.454-14.995 90.101-14.995 76.909 0 134.36 20.286 175.638 62.018 51.002 51.562 75.166 134.096 73.874 252.317-0.191 17.552-14.481 31.649-31.99 31.65-0.12 0-0.237 0-0.357-0.002-17.672-0.193-31.842-14.676-31.648-32.348 1.08-98.854-17.552-168.368-55.379-206.611-28.637-28.952-71.205-43.025-130.137-43.025-52.665 0-94.371 16.163-123.96 48.04-38.214 41.169-57.59 109.113-57.59 201.946-0.003 17.674-14.329 32.001-32.003 32.001z"fill="#ffffff"p-id="1407"></path></svg></div>\x3c!--Open--\x3e<div class="_lock"id="_lock"style="display: none;"><svg t="1573132914638"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="1990"width="22"height="22"><path d="M813.72147413 436.3513088h-56.8729696V300.99145813c0-135.14152853-109.706976-245.06682667-244.84850453-245.06682666C376.85847147 55.92463147 267.15149547 165.9590912 267.15149547 301.20978027c0 19.430688 15.82837013 35.25905813 35.25905813 35.25905813 19.430688 0 35.25905813-15.82837013 35.25905813-35.25905813 0-96.38931307 78.15939733-174.7670336 174.33038827-174.76703254S686.33038827 204.71130667 686.33038827 300.99145813v135.35985067H210.93349333c-19.430688 0-35.58654187 15.5008864-35.58654186 34.9315744v408.91774293c0 48.57672107 39.8438272 88.09306453 88.42054826 88.09306454h497.119968c48.57672107 0 87.87474133-39.51634347 87.87474134-88.09306454V471.2828832c-0.1091616-19.430688-15.5008864-34.9315744-35.04073494-34.9315744z m-35.47738026 443.84931733c0 9.715344-7.64128213 17.68410987-17.35662614 17.68410987H263.76749973c-9.715344 0-18.01159253-7.96876587-18.0115936-17.68410987v-373.33120106h532.48818774v373.33120106z"fill="#ffffff"p-id="1991"></path><path d="M512 807.93593173c19.430688 0 35.25905813-15.82837013 35.25905813-35.25905813V645.83159467c0-19.430688-15.71920853-35.25905813-35.25905813-35.25905814-19.430688 0-35.25905813 15.82837013-35.25905813 35.25905814v126.95444053c0.1091616 19.430688 15.82837013 35.14989653 35.25905813 35.14989653z"fill="#ffffff"p-id="1992"></path></svg></div></div></div>',s='\x3c!-- Mplayer弹出右侧栏菜单 --\x3e<div class="mplayer-sidebar"id="mplayer-sidebar"slot="mplayer-sidebar"><div class="title">设置</div><div class="setting-box"><svg t="1572955773659"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="4387"width="21"height="21"><path d="M810.666667 96H213.333333A117.461333 117.461333 0 0 0 96 213.333333v597.333334c0 64.682667 52.629333 117.333333 117.333333 117.333333h597.333334c64.682667 0 117.333333-52.650667 117.333333-117.333333V213.333333c0-64.682667-52.650667-117.333333-117.333333-117.333333zM864 810.666667c0 29.418667-23.914667 53.333333-53.333333 53.333333H213.333333A53.397333 53.397333 0 0 1 160 810.666667V213.333333c0-29.418667 23.936-53.333333 53.333333-53.333333h597.333334c29.418667 0 53.333333 23.914667 53.333333 53.333333v597.333334z"p-id="4388"fill="#ffffff"></path><path d="M448 245.333333h-170.666667c-4.138667 0-8.042667 0.853333-11.669333 2.282667l-0.490667 0.149333c-7.893333 3.242667-14.165333 9.536-17.429333 17.429334l-0.149333 0.490666A31.893333 31.893333 0 0 0 245.333333 277.333333v170.666667a32 32 0 1 0 64 0v-93.418667l105.365334 105.365334c6.250667 6.272 14.442667 9.386667 22.634666 9.386666s16.384-3.114667 22.634667-9.365333a32 32 0 0 0 0-45.248l-105.386667-105.386667H448a32 32 0 1 0 0-64zM746.666667 544a32 32 0 0 0-32 32v93.418667l-105.365334-105.365334a32 32 0 1 0-45.248 45.248l105.365334 105.365334H576a32 32 0 0 0 0 64h170.666667c4.117333 0 8.042667-0.853333 11.669333-2.261334l0.490667-0.149333c7.872-3.242667 14.165333-9.536 17.408-17.408l0.149333-0.490667c1.429333-3.648 2.282667-7.573333 2.282667-11.690666v-170.666667a32 32 0 0 0-32-32z"p-id="4389"fill="#ffffff"></path></svg><div class="box-name">铺满全屏</div><div class="toogle-switch close"id="toggle-fit"><div class="ball"></div></div></div><div class="setting-box"><svg t="1574076029235"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="1557"width="21"height="21"><path d="M683 833H215l45 42c9 6 15 15 15 27-3 18-18 30-36 30-9 0-21-6-27-12l-102-90c-12-12-15-33 0-45L212 692c6-6 18-9 27-9 18 0 33 15 33 33 0 9-6 18-12 24l-39 36h465c105 0 186-84 186-186v-81c0-18 12-30 30-30s30 12 30 30v81c0 132-111 243-249 243zM341 191h465l-45-42c-9-6-15-15-15-27 3-18 18-30 36-30 9 0 21 6 27 12l102 90c12 12 15 33 0 45L812 332c-6 6-18 9-27 9-18 0-33-15-33-33 0-9 6-18 12-24l39-36H338C236 251 152 335 152 440v84c0 18-12 30-30 30s-30-12-30-30v-81C92 302 203 191 341 191z"p-id="1558"fill="#ffffff"></path></svg><div class="box-name">循环播放</div><div class="toogle-switch close"id="toggle-loop"><div class="ball"></div></div></div><div class="title">播放速度</div><div class="setting-box"><div class="play-speed"data="0.8">0.8</div><div class="play-speed"data="1.0">1.0</div><div class="play-speed"data="1.25">1.25</div><div class="play-speed"data="1.5">1.5</div><div class="play-speed"data="2.0">2.0</div></div><div class="title">分享视频</div><div class="setting-box">\x3c!--微信--\x3e<div class="share-box"data="1"style="background: #00c80d;"><svg t="1572959869357"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2984"width="28"height="28"><path d="M693.12 347.264c11.776 0 23.36 0.896 35.008 2.176-31.36-146.048-187.456-254.528-365.696-254.528C163.2 94.912 0 230.656 0 403.136c0 99.52 54.272 181.248 145.024 244.736L108.8 756.864l126.72-63.488c45.312 8.896 81.664 18.112 126.912 18.112 11.392 0 22.656-0.512 33.792-1.344-7.04-24.256-11.2-49.6-11.2-76.032C385.088 475.776 521.024 347.264 693.12 347.264zM498.304 249.024c27.392 0 45.376 17.984 45.376 45.248 0 27.136-17.984 45.312-45.376 45.312-27.072 0-54.336-18.176-54.336-45.312C443.968 266.944 471.168 249.024 498.304 249.024zM244.672 339.584c-27.2 0-54.592-18.176-54.592-45.312 0-27.264 27.392-45.248 54.592-45.248S289.92 266.944 289.92 294.272C289.92 321.408 271.872 339.584 244.672 339.584zM1024 629.76c0-144.896-145.024-262.976-307.904-262.976-172.48 0-308.224 118.144-308.224 262.976 0 145.28 135.808 262.976 308.224 262.976 36.096 0 72.512-9.024 108.736-18.112l99.392 54.528-27.264-90.624C969.728 783.872 1024 711.488 1024 629.76zM616.128 584.384c-17.984 0-36.224-17.92-36.224-36.224 0-18.048 18.24-36.224 36.224-36.224 27.52 0 45.376 18.176 45.376 36.224C661.504 566.464 643.648 584.384 616.128 584.384zM815.488 584.384c-17.856 0-36.032-17.92-36.032-36.224 0-18.048 18.112-36.224 36.032-36.224 27.264 0 45.376 18.176 45.376 36.224C860.864 566.464 842.752 584.384 815.488 584.384z"p-id="2985"fill="#ffffff"></path></svg></div>\x3c!--朋友圈--\x3e<div class="share-box"data="2"style="background: #47d300;"><svg t="1572960303277"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="3166"width="30"height="30"><path d="M679.170882 398.98197 679.170882 126.497019c0 0-133.338844-71.481008-288.989857-16.365736L679.170882 398.98197zM704.414823 559.284933 704.414823 137.748271c0 0 157.630087 71.433936 202.051809 244.963131L704.414823 559.284933zM619.614461 681.811524l290.99042-273.64845c0 0 51.487651 83.708494-25.293059 273.64845L619.614461 681.811524zM471.029378 716.50672l393.014048 0c0 0-47.444569 128.594797-217.255069 181.688016L471.029378 716.50672zM342.736457 629.695562l0 256.17959c0 0 102.071723 65.36573 276.878005 21.478174L342.736457 629.695562zM115.370099 642.946354 314.44511 464.326211l0 406.206512C314.44511 870.5317 194.172863 828.782853 115.370099 642.946354zM110.3252 614.376669c0 0-45.538149-146.935514 18.154475-274.554076l273.811156 0L110.3252 614.376669zM145.682475 311.183322c0 0 57.602929-130.594337 214.20971-191.869912l186.893574 191.869912L145.682475 311.183322z"p-id="3167"fill="#ffffff"></path></svg></div>\x3c!--QQ--\x3e<div class="share-box"data="3"style="background: #19b8ef;"><svg t="1572960366859"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2494"width="28"height="28"><path d="M116.435 593.714c-33.54 78.964-38.985 154.297-12.059 168.37 18.572 9.696 47.686-12.382 74.936-52.909 10.791 44.157 37.493 84.137 75.633 116.21-40.004 14.768-66.135 38.886-66.135 66.232 0 44.954 70.709 81.302 157.978 81.302 78.716 0 143.907-29.538 155.94-68.371 3.232-0.049 15.663-0.049 18.796 0 12.083 38.784 77.324 68.371 155.989 68.371 87.267 0 157.978-36.398 157.978-81.302 0-27.297-26.105-51.464-66.135-66.232 38.089-32.123 64.889-72.053 75.631-116.21 27.251 40.527 56.29 62.605 74.887 52.909 26.95-14.073 21.631-89.456-12.032-168.37-26.355-62.058-62.11-107.754-89.457-117.848 0.398-3.929 0.596-7.958 0.596-11.935 0-23.968-6.661-46.146-18.049-64.196 0.199-1.393 0.199-2.834 0.199-4.227 0-11.038-2.636-21.381-7.114-30.332-6.909-161.309-111.93-289.402-281.866-289.402-170.036 0-275.106 128.093-281.943 289.402-4.525 9.001-7.135 19.343-7.135 30.332 0 1.393 0.099 2.835 0.15 4.227-11.288 18.05-17.951 40.178-17.951 64.196 0 3.978 0.15 7.955 0.498 11.935-27.151 10.094-63.028 55.841-89.333 117.848z"p-id="2495"fill="#ffffff"></path></svg></div>\x3c!--复制链接--\x3e<div class="share-box"data="4"style="background: #f1f1f2;"><svg t="1572960510060"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2890"width="28"height="28"><path d="M829.19277102 195.1443091l-2.9663086-2.9663086a175.14703937 175.14703937 0 0 0-246.94519043 0L421.86466874 349.52718832a175.21445555 175.21445555 0 0 0 0 247.0126066l2.89889242 2.89889243c5.66295251 5.59553633 11.73040204 10.71916093 17.86526774 15.50570393l57.57335289-57.64076905c-6.74161051-3.91013426-13.07872399-8.76409343-18.8090934-14.49446285l-2.89889241-2.83147625a94.71962648 94.71962648 0 0 1 0-133.82096684l157.48402015-157.41660399a94.58479415 94.58479415 0 0 1 133.68613523 1e-8l2.89889242 2.89889242a94.65221032 94.65221032 0 0 1 0 133.75355141L701.4392537 456.71879472c12.33714684 30.60691161 18.20234786 63.10147379 17.59560307 95.52861981l110.15791425-110.09049883a175.0796232 175.0796232 0 0 0 0-246.94519043z m-232.58555993 226.78777509a172.85489176 172.85489176 0 0 0-17.9326839-15.50570395l-57.57335289 57.57335363c6.74161051 4.04496659 13.14614016 8.76409343 18.87650882 14.56187828l2.9663086 2.89889242a94.65221032 94.65221032 0 0 1 0 133.75355141L385.52738847 772.63065995a94.78704266 94.78704266 0 0 1-133.82096757 0l-2.89889242-2.96630859a94.65221032 94.65221032 0 0 1 0-133.7535514l71.19140625-71.12399008a244.04629801 244.04629801 0 0 1-17.66301922-95.52861981L192.1780005 579.21385583a175.21445555 175.21445555 0 0 0 0 247.08002277l2.89889244 2.96630858a175.28187172 175.28187172 0 0 0 247.01260659 0L599.50610352 671.77616776a175.28187172 175.28187172 0 0 0 0-247.0126066l-2.89889243-2.89889242z"p-id="2891"fill="#000000"></path></svg></div></div></div>',c='<button class="player-btn menu-button header-control"id="menu-button"style="display: none;"control><svg t="1607605827678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2386"><path d="M857.9375 512c0-49.125 30.84375-90.75 74.0625-107.34375-10.3125-40.5-26.25-78.65625-47.0625-113.71875C842.5625 309.78125 791.375 302.09375 756.6875 267.3125c-34.6875-34.6875-42.375-85.96875-23.53125-128.25C698 118.25 659.84375 102.3125 619.34375 92c-16.6875 43.21875-58.3125 74.0625-107.34375 74.0625-49.125 0-90.75-30.84375-107.34375-74.0625-40.5 10.3125-78.65625 26.25-113.71875 47.0625 18.84375 42.375 11.15625 93.5625-23.53125 128.25-34.6875 34.6875-85.96875 42.375-128.25 23.625C118.25 326 102.3125 364.15625 92 404.65625c43.21875 16.6875 74.0625 58.3125 74.0625 107.34375 0 49.125-30.84375 90.75-74.0625 107.34375 10.3125 40.5 26.25 78.65625 47.0625 113.71875C181.4375 714.21875 232.625 721.90625 267.3125 756.6875c34.6875 34.6875 42.375 85.96875 23.53125 128.25C326 905.75 364.15625 921.6875 404.65625 932c16.6875-43.21875 58.3125-74.0625 107.34375-74.0625 49.125 0 90.75 30.84375 107.34375 74.0625 40.5-10.3125 78.65625-26.25 113.71875-47.0625-18.84375-42.375-11.15625-93.5625 23.53125-128.25 34.6875-34.6875 85.96875-42.375 128.25-23.625C905.75 698 921.6875 659.84375 932 619.34375c-43.21875-16.59375-74.0625-58.21875-74.0625-107.34375zM512 627.3125c-63.65625 0-115.3125-51.65625-115.3125-115.3125s51.65625-115.3125 115.3125-115.3125 115.3125 51.65625 115.3125 115.3125-51.65625 115.3125-115.3125 115.3125z" p-id="2387" fill="#ffffff"></path></svg></button>',d='<button class="player-btn battery-info header-control"id="battery-info"><div class="capacity"id="capacity"><div class="level"id="level"><div class="count"id="count"></div></div></div><div class="time"id="time"></div></button>',g=null,y={overloadingEl:function(){g=new l;for(var e=0,t=Object.keys(g);e<t.length;e++){var o=t[e];"mPlayer"!=o&&(g[o]||(g[o]={style:{},classList:{add:function(){},contains:function(){},remove:function(){}},addEventListener:function(){},removeEventListener:function(){}}),g[o].querySelector=function(e){e=this.querySelectorAll?this.querySelectorAll(e):[];return e[0]||{exist:!1,style:{},height:"",width:""}})}},plusRuntimeAction:function(){function e(){(new y.plusRuntimeHandle)._volume_luminance("init")}window.plus?e():setTimeout(function(){window.plus?e():y.unPlusRuntimeHandle()},3e3)},initLanguage:function(e){var t=m.$method.getLangObject(),o=e.querySelector("#mplayer-sidebar").children;return o[0].innerText=t.settings,o[1].querySelector(".box-name").innerText=t.coveredPlay,o[2].querySelector(".box-name").innerText=t.loopPlay,o[3].innerText=t.playbackSpeed,o[5].innerText=t.share,e},initConifgAttribute:function(e){var t=m.option.volume;return 0<=t&&t<=1?(e.querySelector("#volume-total").style.width=100*t+"%",e.querySelector("video").volume=t):e.querySelector("#volume-total").style.width="100%",0<=u.defaultLuminance&&u.defaultLuminance<=1?e.querySelector("#luminance-total").style.width=100*u.defaultLuminance+"%":e.querySelector("#luminance-total").style.width="100%",e},initConfigControls:function(s){!1===u.showLock&&m.$method.removeNode(s,"#lock-screen"),!1!==u.showBattery&&navigator.getBattery||m.$method.removeNode(s,"#battery-info");var e=u.hotKeyConfig||{};!1===e.volumeHandle&&m.$method.removeNode(s,"#volume-control"),1!=e.luminanceHandle&&m.$method.removeNode(s,"#luminance-control"),!0===m.option.loop&&(s.querySelector("#toggle-loop").classList.add("open"),s.querySelector("#toggle-loop").classList.remove("close")),"cover"==m.option.objectFit&&(s.querySelector("#toggle-fit").classList.add("open"),s.querySelector("#toggle-fit").classList.remove("close"));return 0!=u.showMenuButton?function(){var e=u.defaultMenuConfig||{};!0===m.option.live&&(e.showSpeedSwitch=!1,e.showLoopSwitch=!1,m.$method.removeNode(s,"#mplayer-time")),!1===e.showFillSwitch&&s.querySelector("#toggle-fit").parentNode.parentNode.removeChild(s.querySelector("#toggle-fit").parentNode),!1===e.showLoopSwitch&&s.querySelector("#toggle-loop").parentNode.parentNode.removeChild(s.querySelector("#toggle-loop").parentNode),!1===e.showSpeedSwitch&&s.querySelector(".play-speed").parentNode.parentNode.removeChild(s.querySelector(".play-speed").parentNode);for(var t=e.showShare||[],o=s.querySelectorAll(".share-box"),l=0;l<o.length;l++){for(var n=o[l].getAttribute("data"),i=!1,r=0;r<t.length;r++)if(n==t[r]){i=!0;break}i||o[l]&&o[l].parentNode.removeChild(o[l])}for(var a=s.querySelectorAll("#mplayer-sidebar .title"),l=0;l<a.length;l++)0==a[l].nextElementSibling.children.length&&a[l]&&a[l].parentNode.removeChild(a[l])}():(m.$method.removeNode(s,"#menu-button"),m.$method.removeNode(s,"#mplayer-sidebar")),s},initConfigTheme:function(e){return m.$habit.forwardRate=0<u.forwardRate&&u.forwardRate<=1?u.forwardRate:.1,e.querySelector("#time-start")&&(e.querySelector("#time-start").style.color=m.$habit.themeColor),e.querySelector("#time-total")&&(e.querySelector("#time-total").style.background=m.$habit.themeColor),e.querySelector("#toggle-fit")&&(e.querySelector("#toggle-fit").style.background=m.$habit.themeColor),e.querySelector("#toggle-loop")&&(e.querySelector("#toggle-loop").style.background=m.$habit.themeColor),0<e.querySelectorAll("#mplayer-sidebar .play-speed").length&&(e.querySelectorAll("#mplayer-sidebar .play-speed")[1].style.background=m.$habit.themeColor),e},parseCamel:function(e){return e.replace(/\B([A-Z])/g,"-$1").toLowerCase()},unPlusRuntimeHandle:function(){},plusRuntimeHandle:function(){var o=this,l=0;this._volume_luminance=function(e){var t=plus.device.getVolume();if(0==t&&l<3&&"init"==e)return l++,void setTimeout(function(){o._volume_luminance(e)},200);1<t?t=100<=10*t?100:10*t:t<=1&&(t=100<=100*t?100:100*t),g.volumeTotal.style.width=t+"%",m.$el.videoObject.volume=1;t=plus.screen.getBrightness();1<t?t=100<10*t?100:10*t:t<=1&&(t=100<100*t?100:100*t),g.luminanceTotal.style.width=t+"%"}},toggleControlsDisplay:function(){var e,t=g.mplayerLeft.getBoundingClientRect().width;m.$method.hasNotchInScreen()&&(e=plus.navigator.getStatusbarHeight(),t+=Math.round(e)/2),this.ON_SideLeft=function(){g.mplayerLeft.style.left=t+"px"},this.OFF_SideLeft=function(){g.mplayerLeft.style.left=-t+"px"}},readBattery:function(e){var t,o,n;"showControls"!=(e=e||{}).type&&!1!==m.option.showBattery&&(t=new Date,o=1==(o=t.getHours()).toString().length?"0"+o:o,t=t.getMinutes(),t=o+":"+(t=1==t.toString().length?"0"+t:t),g.batteryInfo.querySelector("#time").innerHTML=t,n=!1,e=function l(){navigator.getBattery().then(function(e){var t=e.level,o=e.charging;0<t&&(n=!0),o=o,g.batteryInfo.querySelector("#count").style.background=o?"#55c612":"#FFFFFF",o=null,1<(t=t)?o=100<10*t?100:10*t:t<=1&&(o=100<10*t?100:100*t),100==o?g.batteryInfo.querySelector("#count").style.borderRadius="1px":o<10&&(g.batteryInfo.querySelector("#count").style.background="red"),g.batteryInfo.querySelector("#count").style.width=o+"%",e.onlevelchange=function(e){l()},e.onchargingchange=function(e){l()}})},navigator.getBattery&&e(),setTimeout(function(){n||g.batteryInfo instanceof Element&&m.$method.removeNode(g.mPlayer,"#battery-info")},1e3))},onLockScreenTap:function(e){e.stopPropagation(),i.isLockScreen?(g.lockScreen.querySelector("#_lock").style.display="flex",g.lockScreen.querySelector("#_unlock").style.display="none",i.isLockScreen=!1,m.$method.toggleControlsDisplay({type:"showControls"}),y.toggleEventListenerGlobal("add")):(g.lockScreen.querySelector("#_lock").style.display="none",g.lockScreen.querySelector("#_unlock").style.display="flex",i.isLockScreen=!0,m.$method.toggleControlsDisplay({type:"hideControls"}),y.toggleEventListenerGlobal("remove","lockAction"))},onShareBox:function(e){e.stopPropagation();e=Number.parseFloat(e.currentTarget.getAttribute("data"));m._this.emit("share",{type:e})},onPlaySpeed:function(o){o.stopPropagation();var e=Number.parseFloat(o.currentTarget.getAttribute("data"));m.$el.videoObject.playbackRate!=e&&(m.$method.toggleControlsDisplay(o),function(){for(var e=g.mplayerSidebar.querySelectorAll(".play-speed"),t=0;t<e.length;t++)e[t].style.background="transparent";o.currentTarget.style.background=m.$habit.themeColor}(),1!=(m.$el.videoObject.playbackRate=e)?m.$method.showToast("已切换到"+e+"倍速度播放"):m.$method.showToast("已切换到默认倍速度播放"))},onToggleLoop:function(e){e.stopPropagation(),-1<e.currentTarget.getAttribute("class").indexOf("open")?(m.$el.videoObject.loop=!1,e.currentTarget.classList.add("close"),e.currentTarget.classList.remove("open")):(m.$el.videoObject.loop=!0,e.currentTarget.classList.add("open"),e.currentTarget.classList.remove("close"))},onToggleFit:function(e){(e=e||{}).stopPropagation&&e.stopPropagation();this.fill=function(){-1<(g.toggleFit instanceof Element?g.toggleFit.getAttribute("class"):"").indexOf("close")&&(g.toggleFit.classList.add("open"),g.toggleFit.classList.remove("close"),m.$el.videoObject.classList.add("covered"))},this.unfill=function(){-1<(g.toggleFit instanceof Element?g.toggleFit.getAttribute("class"):"").indexOf("open")&&(g.toggleFit.classList.add("close"),g.toggleFit.classList.remove("open"),m.$el.videoObject.classList.remove("covered"))},e.type&&(-1<g.toggleFit.getAttribute("class").indexOf("close")?this.fill():this.unfill())},videoScreenTouch:function(e){if(e=e||{},e.stopPropagation&&e.stopPropagation(),m.$data.mediaStatus&&!(m.$data.duration<=1)&&(!1!==u.pageGetsture||m.$data.isFullScreen)){if("touchstart"==e.type){if(i.isTouchMove)return;i.startX=e.touches[0].clientX,i.startY=e.touches[0].clientY,g.mPlayer.addEventListener("touchmove",y.videoScreenTouch),g.mPlayer.addEventListener("touchend",y.videoScreenTouch),g.mPlayer.addEventListener("touchcancel",y.videoScreenTouch)}var t,o;if("touchmove"==e.type)switch(e.preventDefault(),i.moveX=e.touches[0].clientX,i.moveY=e.touches[0].clientY,i.isTouchMove||(i.isTouchMove=!0,m.$method.createTimerCloseControl("cancel")),m.$data.showScreenControls&&i.useTouchType&&m.$method.toggleControlsDisplay(e),i.useTouchType||(t=u.hotKeyConfig||{},10<Math.abs(i.moveX-i.startX)&&!m.option.live&&m.$data.duration!=1/0&&0!=t.processHandle?i.useTouchType="forward":10<Math.abs(i.moveY-i.startY)&&(!1===t.volumeHandle||1!=t.luminanceHandle?(0!=t.volumeHandle&&(i.useTouchType="volume"),!0===t.luminanceHandle&&(i.useTouchType="luminance")):(o=g.mPlayer.getBoundingClientRect().width,i.useTouchType=o/2>o-i.startX?0!=t.volumeHandle?"volume":"":0!=t.luminanceHandle?"luminance":"")),function(){switch(i.useTouchType){case"forward":m.$data._defaultPlayProgressPro=m.$el.progressPlay.style.width.substr(0,m.$el.progressPlay.style.width.length-1)||0,g.timeTotal.style.width=m.$data._defaultPlayProgressPro+"%",m.$data._defaultPlayProgressPro;break;case"volume":window.plus&&(new y.plusRuntimeHandle)._volume_luminance(),i._defaultVolumePro=g.volumeTotal.style.width.substr(0,g.volumeTotal.style.width.length-1),y.toggleVolumeIcon(Number.parseFloat(i._defaultVolumePro)),g.volumeControl.style.transition="none",g.volumeControl.style.opacity=1;break;case"luminance":window.plus&&(new y.plusRuntimeHandle)._volume_luminance(),i._defaultLuminanicePro=g.luminanceTotal.style.width.substr(0,g.luminanceTotal.style.width.length-1),g.luminanceControl.style.transition="none",g.luminanceControl.style.opacity=1}}()),i.useTouchType){case"forward":var l=i.moveX-i.startX;m.$method.progressControlHandle(l,g.timeProgress,m.$habit.forwardRate),y.toggleMiddleProgress("show");break;case"volume":l=i.startY-i.moveY;y.screenVolumeHandle(l);break;case"luminance":l=i.startY-i.moveY;y.screenLuminanceHandle(l)}"touchend"==e.type&&(g.mPlayer.removeEventListener("touchmove",y.videoScreenTouch),g.mPlayer.removeEventListener("touchend",y.videoScreenTouch),g.mPlayer.removeEventListener("touchcancel",y.videoScreenTouch),"forward"==i.useTouchType?(m.$el.videoObject.currentTime=m.$data.currentTime,y.toggleMiddleProgress("hide")):"volume"==i.useTouchType?(g.volumeControl.style.transition="opacity 0.5s",g.volumeControl.style.opacity=0):"luminance"==i.useTouchType&&(g.luminanceControl.style.transition="opacity 0.5s",g.luminanceControl.style.opacity=0),y.resetTouchVariable()),"touchcancel"==e.type&&(g.mPlayer.removeEventListener("touchmove",y.videoScreenTouch),g.mPlayer.removeEventListener("touchend",y.videoScreenTouch),g.mPlayer.removeEventListener("touchcancel",y.videoScreenTouch),g.volumeControl.style.transition="opacity 0.5s",g.volumeControl.style.opacity=0,g.luminanceControl.style.transition="opacity 0.5s",g.luminanceControl.style.opacity=0,y.resetTouchVariable())}},screenLuminanceHandle:function(e){m.$method.computeProgress(e,g.luminanceProgress,function(e){e=Number.parseFloat(i._defaultLuminanicePro)+.35*e;100<=e?e=100:e<=0&&(e=0),g.luminanceTotal.style.width=e+"%",m._this.emit("luminance-change",{size:(.01*e).toFixed(2)})})},screenVolumeHandle:function(e){m.$method.computeProgress(e,g.volumeProgress,function(e){e=Number.parseFloat(i._defaultVolumePro)+.35*e;100<=e?e=100:e<=0&&(e=0),y.toggleVolumeIcon(e),g.volumeTotal.style.width=e+"%",m._this.emit("volume-change",{size:(.01*e).toFixed(2)})})},toggleVolumeIcon:function(e){0==e?(g.volumeControl.querySelector(".icon-zero").style.display="inline",g.volumeControl.querySelector(".icon-two").style.display="none",g.volumeControl.querySelector(".icon-one").style.display="none"):50<=e?(g.volumeControl.querySelector(".icon-two").style.display="inline",g.volumeControl.querySelector(".icon-zero").style.display="none",g.volumeControl.querySelector(".icon-one").style.display="none"):(g.volumeControl.querySelector(".icon-one").style.display="inline",g.volumeControl.querySelector(".icon-zero").style.display="none",g.volumeControl.querySelector(".icon-two").style.display="none")},resetTouchVariable:function(){setTimeout(function(){i.startX=null,i.startY=null,i.moveX=null,i.moveY=null,i.isTouchMove=!1,i.useTouchType=null,m.$data._defaultPlayProgressPro=null,i._defaultVolumePro=null,i._defaultLuminanicePro=null},200)},toggleMiddleProgress:function(e){"show"==e?(g.mplayerTime.style.transition="none",g.mplayerTime.style.opacity=1,m.$method.showCover()):"hide"==e&&(g.mplayerTime.style.transition="opacity 1s",g.mplayerTime.style.opacity=0,m.$method.hideCover())},onAgentEventAction:function(e){switch(e){case"touchmove-footerbar":y.toggleMiddleProgress("show");break;case"touchend-footerbar":y.toggleMiddleProgress("hide");break;case"remove-event":y.toggleEventListenerGlobal("remove")}},onMenuTap:function(e){e.stopPropagation(),m._this.showRightSidebar("mplayer-sidebar")},showThumbnails:function(e){var n=0,i=0,t=u.thumbnails||{},r=t.preview||[],o=t.tile||[10,10],t=t.scale||[160,90],a=o[0]||10,s=o[1]||10,c=t[0]||160,d=t[1]||90;0!=r.length&&(t=parseInt(e/100*m.$data.duration),e=(n=t)%a==0?0:parseInt(n%a)*c,t=n/a<1?0:parseInt(n/a)*d,function(){var e;i=parseInt(n/(a*s)),!1===g.mplayerTime.querySelector('[data-playimage-index="'+i+'"]').exist&&((t=document.createElement("div")).setAttribute("class","preview-image"),t.setAttribute("data-playimage-index",i),t.style.width="100%",t.style.height="100%",t.style.borderRadius="4px",t.style.backgroundImage="url("+r[i]+")",!1===(e=g.mplayerTime.querySelector(".mp-thumbnails")).exist?((e=document.createElement("div")).setAttribute("class","mp-thumbnails"),e.style.width=c+"px",e.style.height=d+"px",e.style.margin="12px auto auto auto",e.appendChild(t),g.mplayerTime.appendChild(e)):e.appendChild(t));for(var t=g.mplayerTime.querySelectorAll(".preview-image"),o=0;o<t.length;o++){var l=t[o].getAttribute("data-playimage-index");t[o].style.display=l!=i?"none":"block"}}(),g.mplayerTime.querySelector('[data-playimage-index="'+i+'"]').style.backgroundPosition=-e+"px "+-t+"px")},onSeekProgress:function(e){g.timeTotal.style.width=e.percentage+"%",m.$method.computePlayTime(m.$data.percentage,m.$data.duration,function(e){g.timeStart.innerHTML=e}),"landscape"==m._this._global_.mobilePlugin.direction&&y.showThumbnails(e.percentage)},onDurationChange:function(t){setTimeout(function(){var e;t.duration!=1/0&&(e=m.$method.formatCurrentTime(t.duration),g.timeEnd.innerHTML=e)},100)},onControlsToggle:function(t){var e;i.isLockScreen||(t.show&&g&&y.readBattery(),e=function(){var e=new y.toggleControlsDisplay;t.show?e.ON_SideLeft():e.OFF_SideLeft()},m._this._global_.isReady?e():setTimeout(function(){e()},150))},onFullscreenChange:function(e){function t(){m._this._global_.mobilePlugin.direction=e.direction,"portrait"==e.direction&&(g.menuButton.style.display="none",g.batteryInfo.style.display="none",g.mplayerLeft.style.opacity=0,g.mplayerTime.style.top="50%",g.mplayerTime.querySelector(".mp-thumbnails").style.display="none"),"landscape"==e.direction&&(g.menuButton.style.display="block",g.batteryInfo.style.display="flex",g.mplayerLeft.style.opacity=1,g.mplayerTime.style.top="35%",g.mplayerTime.querySelector(".mp-thumbnails").style.display="block")}m._this._global_.isReady?t():setTimeout(function(){t()},150)},onReady:function(){var e;"function"==typeof m.$el&&(e=new m.$el,m.$el=e),t=m.$el.mPlayer,y.overloadingEl(),y.plusRuntimeAction(),y.toggleEventListenerGlobal("add","playerReady"),y.readBattery()},onDestory:function(){y.toggleEventListenerGlobal("remove","playerDestory")},onError:function(){y.toggleEventListenerGlobal("remove","playerError")},onAction:function(e){e="add"==e?"on":"off";m._this[e]("seek-progress",y.onSeekProgress),m._this[e]("duration-change",y.onDurationChange),m._this[e]("controls-toggle",y.onControlsToggle),m._this[e]("fullscreen-change",y.onFullscreenChange),m._this[e]("ready",y.onReady),m._this[e]("destory",y.onDestory),m._this[e]("error",y.onError)},toggleEventListenerGlobal:function(e,t){var l="add"==e?"addEventListener":"removeEventListener";m._this._global_.mobilePlugin.eventStatus=l;!function(){g.mPlayer[l]("touchstart",y.videoScreenTouch),g.menuButton[l]("click",y.onMenuTap),g.toggleFit&&g.toggleFit[l]("click",y.onToggleFit),g.toggleLoop&&g.toggleLoop[l]("click",y.onToggleLoop);for(var e=g.mplayerSidebar instanceof Element?g.mplayerSidebar.querySelectorAll(".play-speed"):[],t=0;t<e.length;t++)e[t][l]("click",y.onPlaySpeed);for(var o=g.mplayerSidebar instanceof Element?g.mplayerSidebar.querySelectorAll(".share-box"):[],t=0;t<o.length;t++)o[t][l]("click",y.onShareBox)}(),"playerReady"==t&&g.lockScreen.addEventListener("click",y.onLockScreenTap),"removeEventListener"==l&&"lockAction"!=t&&y.onAction("remove")}};this.interface=function(n){this._onAgentMpTap=function(e){var t,o,l;i.isLockScreen?(t=new y.toggleControlsDisplay,o=g.mplayerLeft.getBoundingClientRect(),l=g.mPlayer.getBoundingClientRect(),0<o.left-l.left?t.OFF_SideLeft():t.ON_SideLeft()):("click"==e&&m.$method.toggleControlsDisplay(n),"dbclick"==e&&m.$method.onPlayTap({type:"dblscreen"}))},this._onAgentEventAction=function(e){y.onAgentEventAction(e)}},this.appendTemplate=function(e,t){m={},m=t,y.onAction("add");t=(t=o+n+r+a+s).toString().replace(/<!--.*?-->/g,""),t=m.$method.createRangeIsDocFragment(t);return y.initLanguage(t),e.appendChild(t),e.querySelector("#buttom-group").appendChild(m.$method.createRangeIsDocFragment(c)),e.querySelector("#buttom-group").appendChild(m.$method.createRangeIsDocFragment(d)),e=y.initConifgAttribute(e),e=y.initConfigControls(e),e=y.initConfigTheme(e)},this.name="MuiPlayerMobilePlugin"}});